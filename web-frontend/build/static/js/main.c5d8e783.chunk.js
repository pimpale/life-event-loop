(this["webpackJsonptodo-app-web-frontend"]=this["webpackJsonptodo-app-web-frontend"]||[]).push([[0],{419:function(e,t,a){},424:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(45),i=a.n(s),c=a(4),l=a(7),o=a(174),u=a(31),d=a(38),b=a(432),j=a(431),h=a(21),p=a(24),m=a(29),x=a(30),O=a(435),f=a(447),g=a(230),y=a(0),v=function(e){Object(m.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).listenToScroll=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight);n.setState({scroll:e})},n.state={scroll:0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.listenToScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.listenToScroll)}},{key:"render",value:function(){var e=0===this.state.scroll&&this.props.transparentTop,t=e?{transitionDuration:"0.4s",backgroundColor:"#1C2B2D"}:{transitionDuration:"0.4s",backgroundColor:"#F6F0E5"},a=e?{color:"#F6F0E5",marginLeft:"25px"}:{color:"#2A4043",marginLeft:"25px"};return Object(y.jsx)("header",{children:Object(y.jsx)("nav",{style:t,className:"navbar navbar-expand-lg py-3"+(this.props.fixed?" fixed-top":""),children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)("a",{style:{background:"linear-gradient(#87C6F0, #EFCB8C)",color:"transparent",backgroundClip:"text",webkitBackgroundClip:"text",fontWeight:"bold"},className:"navbar-brand font-weight-bold",href:"/",children:this.props.title}),Object(y.jsx)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent",children:Object(y.jsx)(O.a,{style:a})}),Object(y.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(y.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(y.jsx)("a",{style:a,className:"nav-item nav-link font-weight-bold",href:"/instructions",children:"Instructions"}),Object(y.jsx)("a",{style:a,className:"nav-item nav-link font-weight-bold",href:"/dashboard",children:"Login"}),Object(y.jsx)("a",{style:a,className:"nav-item nav-link font-weight-bold",href:"/register",children:"Register"})]})})]})})})}}]),a}(r.a.Component),k=function(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(v,{fixed:e.fixed,transparentTop:e.transparentTop,title:e.branding.name}),e.children,Object(y.jsx)(f.a,{bg:"dark",variant:"dark",children:Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(f.a.Brand,{href:"#home",children:[Object(y.jsx)("img",{alt:"".concat(e.branding.name," Logo"),src:e.branding.darkAdaptedIcon,width:"30",height:"30",className:"d-inline-block align-top"})," ",e.branding.name]}),!!e.branding.copyrightOrg&&Object(y.jsx)(g.a,{className:"mr-auto",children:Object(y.jsxs)(g.a.Link,{children:["\xa9 ",e.branding.copyrightOrg,", 2021"]})})]})})]})},E=a(23),T=a.p+"static/media/lady_sit.2719e2ee.png";var w=function(e){return Object(y.jsxs)(k,{branding:e.branding,fixed:!0,transparentTop:!0,children:[Object(y.jsxs)(b.a,{fluid:!0,style:{height:"80vh",alignItems:"center",backgroundAttachment:"fixed",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",display:"flex",backgroundColor:"#FFFFFF",justifyContent:"center",marginTop:"25px"},children:[Object(y.jsx)("img",{src:T,width:"450",height:"450"}),Object(y.jsxs)("div",{style:{marginLeft:"150px"},children:[Object(y.jsx)("h1",{style:{background:"linear-gradient(#9DC6E1, #CBC0AC)",color:"transparent",backgroundClip:"text",webkitBackgroundClip:"text",fontWeight:"bold",letterSpacing:"1px",marginBottom:"20px",fontSize:"45px"},children:e.branding.tagline}),Object(y.jsxs)("h5",{style:{fontWeight:"lighter",marginBottom:"25px",lineHeight:"25px"},children:["Easily organize and manage your ",Object(y.jsx)("br",{}),"calendar to accomplish long-term goals."]}),Object(y.jsx)(j.a,{style:{backgroundColor:"#9DC6E1",color:"#FFFFFF",border:"none",borderRadius:"5px",width:"33vh",fontSize:"20px",fontWeight:"bolder",letterSpacing:"1px",marginLeft:"10px"},href:"/register",children:" Get Started \u2192 "})]})]}),Object(y.jsx)("div",{className:"custom-shape-divider-bottom-1624938662",children:Object(y.jsx)("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:Object(y.jsx)("path",{d:"M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84, 11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z",className:"shape-fill"})})}),Object(y.jsx)("div",{style:{backgroundColor:"#F6F0E5"},children:Object(y.jsxs)(b.a,{children:[Object(y.jsx)(E.d,{id:"welcome",name:"Welcome to ".concat(e.branding.name),children:Object(y.jsxs)("div",{children:["Welcome to ",e.branding.name,", an application built for a class project, but an application designed for the busiest of people. As students at UCLA, we know how frustrating it is to schedule classes, clubs, and homework so we made this application to help all kinds of people efficiently plan their schedule. We invite you to join us and be prepared for what the day has in store.",Object(y.jsx)("a",{href:"/register",children:"Register"})]})}),Object(y.jsx)(E.d,{id:"why_us",name:"Our Application",children:Object(y.jsxs)("div",{children:["A scheduling app shouldn't have to take more than a few minutes to arrange the multiple events of your day; therefore, we use an algorithm modeled after simulated annealing to choose the best fit for certain events around your Commitments (immovable events such as classes, interviews, work, etc.).",Object(y.jsx)("br",{}),"With all your events in one place, our application gives you a simple TO-DO feed to see what is upcoming in your schedule, allowing you to take a quick glance and go back to working efficiently."]})}),Object(y.jsx)(E.d,{id:"aboutCreators",name:"About the Creators",children:Object(y.jsxs)("div",{children:["Govind Pimpale: I am a 1st year Computer Science major who is interested in working for startup companies after school",Object(y.jsx)("br",{}),"Edmund Yim: I am a 3rd year Computer Science and Engineering major interested in working as a software engineer after UCLA.",Object(y.jsx)("br",{}),"Brandon Le: I am a 3rd year Computer Science major interested in working as a software engineer after graduating.",Object(y.jsx)("br",{}),"Edgar Hukassian: I am a 3rd Year Computer Science Major interested in working as a software engineer after school.",Object(y.jsx)("br",{}),"Warren Pagsuguiron: I am a 4th year Electrical Engineering major who is also passionate about Computer Science. After UCLA, I plan on working on robotics."]})}),Object(y.jsx)(E.d,{id:"specialThanks",name:"Special Thanks",children:Object(y.jsxs)("div",{children:["We want to thank Professor Eggert & the Language and Teaching Assistants of Winter 2021 CS 97 for their hard-work during the quarter.",Object(y.jsx)("a",{href:"/register",children:"Register"})]})})]})})]})};var I=function(e){return Object(y.jsx)(E.e,{branding:e.branding,children:Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{children:"Registering & Logging In"}),Object(y.jsx)("p",{children:'Looking at the home page of 4cast, we can see at the top right corner a "register" button. Clicking on this button will redirect you to our register page where you will have to enter in your Name, Email, and Password. The last thing to do is to agree to the terms of services and click "Submit Form" This should send a verification link to the email you specified and upon clicking the link in the email, you are fully registed and ready to start "Optimizing Your Day"! (Note: the verification link only works for 15 minutes after it sent. Please check your spam folder if it is not in your inbox) From the verification link or from the home page of 4cast, we can see a "Login" button right next to "Register" that we used earlier. Simply fill out the bozes that require your email and password that was created and you are ready to use 4cast.'}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("h2",{children:"The Sidebar"}),Object(y.jsx)("p",{children:"Inside the app, we can see a gray bar with 6 icons: Expand, Dashboard, Calendar, Search, Settings, and Log Out. - Expand increases the size of the sidebar and allows descriptions of the other icons, as well as a greeting so you know what account your are using. - Dashboard is the first thing you will see when entering the app. Here, we can see our upcoming Goals/Tasks along with info such their Name, Time, Description, and Utility. - Calendar is where we can see all of our current, future, and past events. - Search is where we can find our Tasks/Goals in one neat page. - Settings is where we can change our password."}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("h2",{children:"The Dashboard"}),Object(y.jsx)("p",{children:"Looking at the Dashboard page we can see attributes of our Goals/Tasks, as well as a plus button to add them."}),Object(y.jsx)("br",{}),Object(y.jsx)("h4",{children:"Adding a Task"}),Object(y.jsx)("p",{children:'Click the plus button opens up a form for us to fill out attributes about our Goal/Task. At the top, we can see fields for the Date, Start and End Times, as well as a Utility Distribution. - The Utility Distribution can handle three diffent types: No Time Preference, Deadline, Interval. - No Time Preference: something like watching a movie can be done no matter what day it is or time - Deadline: something like finishing a homework assignment that has a no late policy restriction - Interval: something like an interview, or a metting, or even a class. - After choosing a distribution, you can move the little vertices of the graph to adhere to how important that particular goal is around certain times of the day. - for example, an interval distribution for a hw that has a late policy. Now the graph doesn\'t necesarily have to be a hard deadline but have a finite negative slope. At the bottom, we can see fields for inputting the Goal Name, Duration, and an optional Goal Desciption. Submitting the form, make the Goal/Task, but notice that it will say "Not Scheduled". To actually schedule the Goal/Task that was just made, we will need to head over to the Calendar Page and schedule it.'}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("h2",{children:"The Calendar"}),Object(y.jsx)("p",{children:'Lookin at the Calendar page, we can see a few things. At the top, we see buttons to scroll through the calendar, an optimize button, and a perspective changer in the form of "day" or "week"'}),Object(y.jsx)("br",{}),Object(y.jsx)("h4",{children:"Adding a Goal/Task"}),Object(y.jsx)("p",{children:'If we have made Goals and Tasks through the Dashboard, we noticed that they were "Not Scheduled". To schedule them, we will need to click-and-drag them to their appropriate time slots. Looking at the top left corner, we should see the Goals and Tasks we created through the Dashboard. If we click on the places Goals, we can see that Time attribute will reflect what time you set it at. Adding a Goal/Task directly through the Calendar automatically schedules it for where you set it. Simply click and drag an empty spot on the calendar and fill out a form similar to how we added a Goal/Task through the Dashboard.'}),Object(y.jsx)("br",{}),Object(y.jsx)("h4",{children:"Editing a Goal/Task"}),Object(y.jsx)("p",{children:'To edit a task through the Calendar, simply click on the task and "Manage Event" window will pop up. On the right, there is a column called "Actions" where we can choose to edit (clicking on the pencil) or delete (clicking on the x) the task. Clicking the edit button will bring out a form similar to making that task while clicking the delete button will bring a pop-up asking if you want to delete the event.'}),Object(y.jsx)("h4",{children:"Optimizing Your Schedule"}),Object(y.jsx)("p",{children:'Now that we have task(s) on our calendar, we can optimize them! Clicking on the "optimize" button at the top brings out a new calendar view that shows us the taskts that can be optimized. - In this view we can see three new buttons: Start, Commit Changes, and Cancel Changes By choosing start, 4cast will automatically move your tasks around based on their utility distributions to find the best spot. (Note: this process will continue forever, so the user has to manually stop the optimization when they are satisfied with the results) Cicking on "Commit Changes" will reflect what was optimized to your regular calendar.'}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("h2",{children:"The Search"}),Object(y.jsx)("p",{children:'By clicking the magnifying glass on the sidebar, we are brought to the Search Page. At the top, you can see a search bar and can query for an exact task or tasks that have the same name. After typing in what you want to look for, simply click "search" and 4cast will display the tasks with the keywords you searched for. Like with the Calendar and Dashboard, you can edit and delete the tasks that pop up on this page.'}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("h2",{children:"Settings"}),Object(y.jsx)("p",{children:'The settings page allows you to change your password and is similar to other "change password" forms'})]})})};var S=function(e){return Object(y.jsx)(E.e,{branding:e.branding,children:Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{children:"Our Product"}),Object(y.jsx)("p",{children:'We have designed a state-of-the-art calendar that also doubles as a to-do app. Now there is no need for multiple apps for calendars and lists when we have the perfect solution for you, our all-in-one scheduler: "The insert our name here". Perfect for work. Perfect for students. Perfect for everyday users that need to find the extra time in their day.'}),Object(y.jsx)("br",{}),Object(y.jsx)("h2",{children:"What Our Product Does"}),Object(y.jsx)("p",{children:"Our web-based application allows you to efficiently schedule your commitments from the day-to-day, week-to-week, and month-to-month. We know how hectic and convoluted life can be so we designed this scheduler to make it easy on our users."}),Object(y.jsx)("h4",{children:"Commitments"}),Object(y.jsx)("p",{children:"As students, we understand that there are immovable events in our day-to-day activities that prevent us from doing other things and so we have implemented a feature for our users to easily input these types of Commitments."}),Object(y.jsx)("h4",{children:"Automatic Scheduling"}),Object(y.jsx)("p",{children:"Our automatic scheduling algorithm allows events to be appropriately placed in the day and respects the Commitments you have in place. This algorithm can schedule your recurring tasks and appropriately place them to where it seems best fit. Of course, you can always rearrange the tasks placed for you by dragging them arround the calendar."}),Object(y.jsx)("h4",{children:"To-Do Feed"}),Object(y.jsx)("p",{children:"As a result of your Commitments and scheduled events, we have designed a To-Do feed that chronoligically lists out your tasks. This tool allows you to easly view your activities and remind you of upcoming events."}),Object(y.jsx)("h4",{children:"Short Term Goal Manager"}),Object(y.jsx)("p",{children:"On the go and need to quickly add something to your calendar? We got you! Our application also works from your phones. With this in mind, we have also made it possible to add Goals that can be done in your off-times or be pushed later in the day or week. We have also made it possible to break tasks into subgoals for planning to be easier."}),Object(y.jsx)("br",{}),Object(y.jsx)("h3",{children:"Technologies Used For This Product"}),Object(y.jsx)("p",{children:"In building our application, we used various programming languages: TypeScript, Java, JavaScript, React, HTML, CSS, and SQL."})]})})};var C=function(){return Object(y.jsx)("div",{style:{display:"flex",height:"100vh",width:"100vw"},children:Object(y.jsxs)("div",{className:"my-auto mx-auto text-center",children:[Object(y.jsx)("h1",{children:"404 Error."}),Object(y.jsx)("h5",{children:"Page Not Found"}),Object(y.jsx)(o.b,{to:"/",children:"Return Home"})]})})},R=a(22),D=a(32),A=a(8),K=a.n(A),N=a(34),F=a(42),G=a.n(F),U=a(184),V=a(185),L=a(143),P=a(436),M=a(437),H=a(438),B=a(434),z=a(439);function Y(e){return Object(y.jsxs)(d.d,{apiKey:e.apiKey,logoutCallback:function(){return e.setApiKey(null)},children:[Object(y.jsx)(d.d.SidebarEntry,{label:"Dashboard",icon:P.a,href:"/dashboard"}),Object(y.jsx)(d.d.SidebarEntry,{label:"Calendar",icon:M.a,href:"/calendar"}),Object(y.jsx)(d.d.SidebarEntry,{label:"Search",icon:H.a,href:"/search"}),Object(y.jsx)(d.d.SidebarEntry,{label:"Settings",icon:B.a,href:"/settings"}),Object(y.jsx)(d.d.SidebarEntry,{label:"Account",icon:z.a,href:"/account"}),Object(y.jsx)(d.d.Body,{children:e.children})]})}var W=a(25),_=a(28);var X=function(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("p",{className:"text-danger",children:[e.error.name,": ",Object(y.jsx)("code",{children:e.error.message})]}),Object(y.jsxs)("p",{className:"text-danger",children:["Source: ",Object(y.jsx)("code",{children:e.error.stack})]})]})},Q=a(449);function Z(e){return{id:"ExternalEventData:".concat(e.externalEvent.externalEventId),start:new Date(e.startTime),end:new Date(e.endTime),color:"#00000000",borderColor:"#00000000",externalEventData:e}}function J(e,t){return{id:"GoalData:".concat(e.goal.goalId),start:new Date(t.startTime),end:new Date(t.endTime),color:"#00000000",borderColor:"#00000000",goalData:e,goalEvent:t}}function q(e){return Object(y.jsx)(Q.a,{className:"px-1 py-1 h-100 w-100 bg-primary text-light overflow-hidden",children:e.goalData.name})}function $(e){return Object(y.jsx)(Q.a,{className:"px-1 py-1 h-100 w-100 bg-secondary text-light overflow-hidden",children:e.externalEventData.name})}var ee=function(e){var t=e.event.extendedProps;switch(e.event.id.split(":")[0]){case"ExternalEventData":return Object(y.jsx)($,{externalEventData:t.externalEventData});case"GoalData":return Object(y.jsx)(q,{goalData:t.goalData})}},te=a(20),ae=a(226),ne=a(225),re=function(e,t,a){return Object(ne.a)(Object(ae.a)(e,t),a)};function se(e,t,a){return e.out(t,a)}var ie=a(9),ce=a(198),le=a.n(ce),oe=function(e,t,a){var n=(a-e.startTime)/(t.startTime-e.startTime);return e.utils*(1-n)+t.utils*n},ue=function(e){return e.map((function(e){return console.log(e),function(e){var t=0;le()(e.startTime>Math.min.apply(Math,Object(D.a)(e.tuf.map((function(e){return e.startTime})))),"sgd's start time must be greater than at least one point in tuf"),le()(e.endTime<Math.max.apply(Math,Object(D.a)(e.tuf.map((function(e){return e.startTime})))),"sgd's end time must be less than at least one point in tuf");for(var a=Object(ie.c)(e.tuf,(function(t){return t.startTime>e.startTime})),n={startTime:e.startTime,utils:oe(e.tuf[a-1],e.tuf[a],e.startTime)},r=Object(ie.d)(e.tuf,(function(t){return t.startTime<e.endTime})),s={startTime:e.endTime,utils:oe(e.tuf[r],e.tuf[r+1],e.endTime)},i=[n].concat(Object(D.a)(e.tuf.slice(a,r+1)),[s]),c=1;c<i.length;c++){var l=i[c].startTime-i[c-1].startTime;t+=(i[c].utils+i[c-1].utils)/2*l}return t}(e)})).reduce((function(e,t){return e+t}),0)};function de(e){var t=r.a.useState(0),a=Object(l.a)(t,2),n=a[0],s=a[1],i=r.a.useState(!1),c=Object(l.a)(i,2),o=c[0],u=c[1];r.a.useEffect((function(){o&&setTimeout((function(){return s(n+1)}),100)}),[n,o]);var d,b=r.a.useRef(e.data),j=function(e){var t=Math.floor(Math.random()*e.length);return e.map((function(e,a){return{data:e.data,tuf:e.tuf,endTime:e.endTime,startTime:a===t?e.startTime+1e7*(Math.random()-.5):e.startTime}}))}(b.current);return d=ue(b.current),ue(j)>=d&&(b.current=j),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(U.a,{plugins:[V.a,L.b],customButtons:{stop:{text:"Stop",click:function(){return u(!1)}},start:{text:"Start",click:function(){return u(!0)}},commit:{text:"Commit Changes",click:function(){var t=Object(N.a)(K.a.mark((function t(){var a,n,r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(W.a)(b.current.slice(1,-1)),t.prev=1,a.s();case 3:if((n=a.n()).done){t.next=10;break}return r=n.value,t.next=7,Object(te.f)({goalId:r.data.goal.goalId,startTime:r.startTime,endTime:r.endTime,active:!0,apiKey:e.apiKey.key}).then(ie.h);case 7:t.sent;case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a.e(t.t0);case 15:return t.prev=15,a.f(),t.finish(15);case 18:e.onHide();case 19:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}}()},cancel:{text:"Cancel Changes",click:e.onHide}},headerToolbar:{left:"title prev,next today",center:o?"stop":"start commit cancel",right:"timeGridDay,timeGridWeek"},initialView:"timeGridWeek",height:"auto",datesSet:function(e){return e.view.calendar.updateSize()},allDaySlot:!1,slotDuration:"00:30:00",nowIndicator:!0,editable:!1,selectable:!1,events:b.current.map((function(e){return{id:"GoalData:".concat(e.data.goal.goalId),start:new Date(e.startTime),end:new Date(e.endTime),color:"#00000000",borderColor:"#00000000",goalData:e.data}})),eventContent:ee})})}var be=function(){var e=Object(N.a)(K.a.mark((function e(t){var a,n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)({creatorUserId:[t.apiKey.creatorUserId],status:["PENDING"],scheduled:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 2:return a=e.sent,e.next=5,Object(te.g)({goalId:a.map((function(e){return e.goal.goalId})),onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 5:return n=e.sent,r=a.map((function(e){var t=e.timeUtilityFunction.startTimes,a=e.timeUtilityFunction.utils,r=t.map((function(e,t){return{startTime:e,utils:a[t]}})).sort((function(e,t){return e.startTime-t.startTime})),s=n.find((function(t){return t.goal.goalId===e.goal.goalId}));return{data:e,startTime:s.startTime,endTime:s.endTime,duration:e.durationEstimate,tuf:[{startTime:0,utils:r[0].utils}].concat(Object(D.a)(r),[{startTime:999999999999999,utils:r[r.length-1].utils}])}})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var je=function(e){return Object(y.jsxs)(_.a,{promiseFn:be,apiKey:e.apiKey,children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(t){return Object(y.jsx)(de,Object(c.a)({data:t},e))}})]})},he=a(433),pe=a(222),me=a(450),xe=a(451),Oe=a(33),fe=a(446);var ge=function(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},s=!1,""===a.name&&(r.name="Please enter an event name",s=!0),n.setErrors(r),!s){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Object(te.c)({name:a.name,startTime:a.startTime,endTime:a.endTime,apiKey:e.apiKey.key});case 8:if(i=t.sent,!Object(ie.e)(i)){t.next=18;break}t.t0=i.Err,t.next="UNAUTHORIZED"===t.t0?13:15;break;case 13:return n.setStatus({failureResult:"Unable to authenticate. Please relogin.",successResult:""}),t.abrupt("break",17);case 15:return n.setStatus({failureResult:"An unknown or network error has occured while trying to create externalEvent.",successResult:""}),t.abrupt("break",17);case 17:return t.abrupt("return");case 18:n.setStatus({failureResult:"",successResult:"Event Created"}),e.postSubmit();case 20:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:"",description:"",startTime:e.startTime,endTime:e.endTime},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==e.status.successResult,children:[Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"ExternalEvent Name"}),Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Event Name",as:"input",value:e.values.name,onChange:function(t){return e.setFieldValue("name",t.target.value)},isInvalid:!!e.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.name})]}),Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Description"}),Object(y.jsx)(fe.a.Control,{name:"description",type:"text",placeholder:"Description",as:"input",value:e.values.description,onChange:function(t){return e.setFieldValue("description",t.target.value)},isInvalid:!!e.errors.description}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.description})]}),Object(y.jsx)(j.a,{type:"submit",className:"mb-3",children:"Submit Form"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})},ye=a(180),ve=a(231),ke=a(76);var Ee=function(e){for(var t=[],a=0;a<24;a++)for(var n=0;n<60;n+=30)e.minTime&&e.minTime>=re(e.time,a,n)||e.maxTime&&e.maxTime<=re(e.time,a,n)||t.push({value:re(e.time,a,n),label:Object(ke.a)(re(e.time,a,n),"p")});return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(ye.a,{className:e.className,options:t,defaultValue:{value:new Date(e.time),label:Object(ke.a)(e.time,"p")},isClearable:!1,onChange:function(t){return e.setTime(t.value)}})})},Te=a(199),we=a(200),Ie=a(228),Se=a(227),Ce=a.n(Se),Re=(a(272),a(273),100);function De(e,t){return[{x:(e+t)/2,y:Re}]}var Ae=function(e){var t,a,n,s,i=r.a.useState(null!==(t=null===(a=e.span)||void 0===a?void 0:a[0])&&void 0!==t?t:Date.now()),c=Object(l.a)(i,2),o=c[0],u=c[1],d=r.a.useState(null!==(n=null===(s=e.span)||void 0===s?void 0:s[1])&&void 0!==n?n:Object(Ie.a)(new Date,3).valueOf()),b=Object(l.a)(d,2),j=b[0],h=b[1],p=r.a.useRef([]);p.current=[{x:o,y:0===e.points.length?0:e.points[0].y}].concat(Object(D.a)(e.points),[{x:j,y:0===e.points.length?0:e.points[e.points.length-1].y}]),r.a.useEffect((function(){e.setPoints(De(o,j))}),[]);var m={line:"scatter",responsive:!0,animation:{duration:0},plugins:{dragData:{round:0,dragX:!0,showTooltip:!0,onDragStart:function(t,a,n,r){return!!e.mutable&&(0!==n&&n!==p.current.length-1)},onDrag:function(e,t,a,n){return!(n.y>100)},onDragEnd:function(t,a,n,r){r.y>100&&(r.y=100),p.current[n]=r,e.setPoints(p.current.slice(1,p.current.length-1))}},tooltip:{callbacks:{title:function(e){return Object(ke.a)(e[0].parsed.x,"hh:mm a")}}}},scales:{x:{type:"linear",min:o,max:j,ticks:{callback:function(e){return Object(ke.a)(e,"hh:mm a")}}},y:{type:"linear",beginAtZero:!0,steps:1,stepValue:1,max:120}},legend:{display:!1}},x={datasets:[{lineTension:0,label:"Utility",fill:!1,borderColor:"rgba(255, 99, 132, 0.8)",data:p.current}]};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(he.a,{children:[Object(y.jsxs)(pe.a,{children:[Object(y.jsx)("div",{children:"Date:"}),Object(y.jsx)(Ce.a,{value:new Date(o),onDayChange:function(e){u(re(e,Object(Te.a)(o),Object(we.a)(o)).valueOf()),h(re(e,Object(Te.a)(j),Object(we.a)(j)).valueOf())}})]}),Object(y.jsxs)(pe.a,{sm:3,children:[Object(y.jsx)("div",{children:"From:"}),Object(y.jsx)(Ee,{time:new Date(o),setTime:function(e){return u(e.valueOf())},maxTime:new Date(j)})]}),Object(y.jsxs)(pe.a,{sm:3,children:[Object(y.jsx)("div",{children:"To:"}),Object(y.jsx)(Ee,{time:new Date(j),setTime:function(e){return h(e.valueOf())},minTime:new Date(o)})]}),Object(y.jsxs)(pe.a,{hidden:!e.mutable,children:[Object(y.jsx)("div",{children:"Utility Distribution"}),Object(y.jsx)(ye.a,{isClearable:!1,defaultValue:{value:"constant",label:"No Time Preference"},options:[{value:"constant",label:"No Time Preference"},{value:"deadline",label:"Deadline"},{value:"interval",label:"Interval"}],onChange:function(t){var a=(o.valueOf()+j.valueOf())/2;switch(t.value){case"constant":e.setPoints(De(o,j));break;case"deadline":e.setPoints([{x:a-1,y:Re},{x:a+1,y:0}]);break;case"interval":e.setPoints([{x:a-1000001,y:0},{x:a-1e6,y:Re},{x:a+1e6,y:Re},{x:a+1000001,y:0}])}}})]})]}),Object(y.jsx)(ve.a,{options:m,data:x})]})},Ke=a(72),Ne=a(96),Fe=a(97);var Ge=function(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i,c,l,o;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},s=!1,""===a.name&&(r.name="Please enter an event name",s=!0),null===(i=Object(Ke.a)(a.durationEstimate))&&(r.durationEstimate="Invalid duration estimate",s=!0),n.setErrors(r),!s){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Object(te.p)({startTimes:a.points.map((function(e){return e.x})),utils:a.points.map((function(e){return e.y})),apiKey:e.apiKey.key});case 10:if(c=t.sent,!Object(ie.e)(c)){t.next=22;break}t.t0=c.Err,t.next="UNAUTHORIZED"===t.t0?15:"TIME_UTILITY_FUNCTION_NOT_VALID"===t.t0?17:19;break;case 15:return n.setStatus({failureResult:"Unable to authenticate request. Please relogin.",successResult:""}),t.abrupt("break",21);case 17:return n.setErrors({points:"Utility function is invalid."}),t.abrupt("break",21);case 19:return n.setStatus({failureResult:"An unknown or network error has occured while trying to create utility function.",successResult:""}),t.abrupt("break",21);case 21:return t.abrupt("return");case 22:return l=c.Ok,t.next=25,Object(te.h)({name:a.name,durationEstimate:i,timeUtilityFunctionId:l.timeUtilityFunctionId,timeSpan:e.span,apiKey:e.apiKey.key});case 25:if(o=t.sent,!Object(ie.e)(o)){t.next=35;break}t.t1=o.Err,t.next="UNAUTHORIZED"===t.t1?30:32;break;case 30:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",34);case 32:return n.setStatus({failureResult:"An unknown or network error has occured while trying to create goal.",successResult:""}),t.abrupt("break",34);case 34:return t.abrupt("return");case 35:n.setStatus({failureResult:"",successResult:"Goal Created"}),e.postSubmit(o.Ok);case 37:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:"",durationEstimate:Object(Ne.a)(e.span?Object(Fe.a)({start:e.span[0],end:e.span[1]}):{minutes:30}),points:[]},initialStatus:{failureResult:"",successResult:""},children:function(t){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:t.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==t.status.successResult,children:[Object(y.jsxs)(fe.a.Group,{children:[Object(y.jsx)(Q.a,{children:Object(y.jsx)(Q.a.Body,{children:Object(y.jsx)(Ae,{span:e.span,points:t.values.points,setPoints:function(e){return t.setFieldValue("points",e)},mutable:!0})})}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:t.errors.points})]}),Object(y.jsxs)(he.a,{children:[Object(y.jsxs)(fe.a.Group,{as:pe.a,children:[Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Goal Name",as:"input",value:t.values.name,onChange:function(e){return t.setFieldValue("name",e.target.value)},isInvalid:!!t.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:t.errors.name})]}),Object(y.jsxs)(fe.a.Group,{as:pe.a,children:[Object(y.jsx)(fe.a.Control,{name:"durationEstimate",type:"text",placeholder:"Estimated Duration",as:"input",value:t.values.durationEstimate,onChange:function(e){return t.setFieldValue("durationEstimate",e.target.value)},isInvalid:!!t.errors.durationEstimate}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:t.errors.durationEstimate})]})]}),Object(y.jsx)(j.a,{type:"submit",children:"Submit Form"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:t.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:t.status.successResult})]})})}})})},Ue=a(440),Ve=a(448);function Le(e){return Object(y.jsxs)(Ve.a,{show:e.show,onHide:e.onClose,keyboard:!1,backdrop:"static",size:"xl",centered:!0,children:[Object(y.jsx)(Ve.a.Header,{closeButton:!0,children:Object(y.jsx)(Ve.a.Title,{children:e.title})}),Object(y.jsx)(Ve.a.Body,{children:e.children})]})}var Pe=a(441),Me=a(442),He=a(443);function Be(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.a)({externalEventId:e.externalEventData.externalEvent.externalEventId,apiKey:e.apiKey.key,name:a.name,startTime:e.externalEventData.startTime,endTime:e.externalEventData.endTime,active:e.externalEventData.active});case 2:if(r=t.sent,!Object(ie.e)(r)){t.next=14;break}t.t0=r.Err,t.next="UNAUTHORIZED"===t.t0?7:"EXTERNAL_EVENT_NONEXISTENT"===t.t0?9:11;break;case 7:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",13);case 9:return n.setStatus({failureResult:"This event does not exist.",successResult:""}),t.abrupt("break",13);case 11:return n.setStatus({failureResult:"An unknown or network error has occured while modifying event data.",successResult:""}),t.abrupt("break",13);case 13:return t.abrupt("return");case 14:n.setStatus({failureResult:"",successResult:"Event Successfully Modified"}),e.postSubmit();case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:e.externalEventData.name},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==e.status.successResult,children:[Object(y.jsxs)(fe.a.Group,{children:[Object(y.jsx)(fe.a.Label,{children:"Event Name"}),Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Event Name",as:"input",value:e.values.name,onChange:function(t){return e.setFieldValue("name",t.target.value)},isInvalid:!!e.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.name})]}),Object(y.jsx)(j.a,{type:"submit",children:"Submit"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})}function ze(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.a)({externalEventId:e.externalEventData.externalEvent.externalEventId,apiKey:e.apiKey.key,name:e.externalEventData.name,startTime:e.externalEventData.startTime,endTime:e.externalEventData.endTime,active:!e.externalEventData.active});case 2:if(r=t.sent,!Object(ie.e)(r)){t.next=14;break}t.t0=r.Err,t.next="UNAUTHORIZED"===t.t0?7:"EXTERNAL_EVENT_NONEXISTENT"===t.t0?9:11;break;case 7:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",13);case 9:return n.setStatus({failureResult:"This event does not exist.",successResult:""}),t.abrupt("break",13);case 11:return n.setStatus({failureResult:"An unknown or network error has occured while managing event.",successResult:""}),t.abrupt("break",13);case 13:return t.abrupt("return");case 14:n.setStatus({failureResult:"",successResult:"Event Edited"}),e.postSubmit();case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{},initialStatus:{failureResult:"",successResult:""},children:function(t){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:t.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==t.status.successResult,children:[Object(y.jsxs)("p",{children:["Are you sure you want to ",e.externalEventData.active?"archive":"unarchive"," ",e.externalEventData.name,"?"]}),Object(y.jsx)(j.a,{type:"submit",children:"Confirm"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:t.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:t.status.successResult})]})})}})})}var Ye=function(){var e=Object(N.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.b)({externalEventId:t.externalEventId,onlyRecent:!0,apiKey:t.apiKey.key});case 2:if(a=e.sent,!Object(ie.e)(a)){e.next=7;break}throw Error(a.Err);case 7:return e.abrupt("return",a.Ok[0]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],i=r.a.useState(!1),c=Object(l.a)(i,2),o=c[0],u=c[1];return Object(y.jsx)(_.a,{promiseFn:Ye,apiKey:e.apiKey,externalEventId:e.externalEventId,children:function(t){var a=t.reload;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(t){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Ue.a,{hover:!0,bordered:!0,children:Object(y.jsxs)("tbody",{children:[Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("td",{children:t.active?"Active":"Archived"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Name"}),Object(y.jsx)("td",{children:t.name})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Creation Time"}),Object(y.jsxs)("td",{children:[Object(ke.a)(t.externalEvent.creationTime,"MMM do")," "]})]})]})}),Object(y.jsxs)(j.a,{variant:"secondary",onClick:function(e){return s(!0)},children:["Edit ",Object(y.jsx)(Pe.a,{})]}),t.active?Object(y.jsxs)(j.a,{variant:"danger",onClick:function(e){return u(!0)},children:["Archive ",Object(y.jsx)(Me.a,{})]}):Object(y.jsxs)(j.a,{variant:"success",onClick:function(e){return u(!0)},children:["Unarchive ",Object(y.jsx)(He.a,{})]}),Object(y.jsx)(Le,{title:"Edit Event",show:n,onClose:function(){return s(!1)},children:Object(y.jsx)(Be,{externalEventData:t,apiKey:e.apiKey,postSubmit:function(){s(!1),a()}})}),Object(y.jsx)(Le,{title:"Archive Event",show:o,onClose:function(){return u(!1)},children:Object(y.jsx)(ze,{externalEventData:t,apiKey:e.apiKey,postSubmit:function(){u(!1),a()}})})]})}})]})}})},_e=a(201),Xe=a.n(_e),Qe=a(202),Ze=a.n(Qe),Je=a(50),qe=Xe()(Ze.a);qe.learnCustomEntities([{name:"PARENT_GOAL",patterns:["for [HASHTAG]"]},{name:"DURATION_ESTIMATE",patterns:["for [DURATION]"]},{name:"GOAL_VALID_BEFORE_GOAL",patterns:["before [HASHTAG]"]},{name:"GOAL_VALID_AFTER_GOAL",patterns:["after [HASHTAG]"]},{name:"GOAL_VALID_BEFORE_TIME",patterns:["[to|by|before] [DATE|TIME]","[to|by|before] [TIME] [DATE]","[to|by|before] [DATE] [TIME]"]},{name:"GOAL_VALID_AFTER_TIME",patterns:["[from|after] [DATE|TIME]","[from|after] [TIME] [DATE]","[from|after] [DATE] [TIME]"]}]);var $e=function(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i,c,l,o,u,d,b,j,h,p,m,x,O,f,g,y;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,""!==a.name){t.next=3;break}throw new Error("Please enter an event name");case 3:if((r=Xe()(Ze.a)).learnCustomEntities(e.templates.map((function(e,t){return{name:(t+1).toString(),patterns:e.gtp.map((function(e){return e.pattern}))}}))),r.readDoc(a.name).customEntities().each((function(e){return console.log(e.out())})),qe.readDoc(a.name).customEntities().each((function(e){return console.log(e.out())})),s=r.readDoc(a.name).customEntities().itemAt(0),i=void 0===s?void 0:e.templates[parseInt((v=s,k=r.its.detail,v.out(k)).type,10)-1].gtd,c=se(qe.readDoc(a.name).customEntities(),qe.its.detail,qe.as.array),c.filter((function(e){return"GOAL_VALID_AFTER_GOAL"===e.type})).map((function(e){return e.value.split("#")[1]}))[0],c.filter((function(e){return"GOAL_VALID_BEFORE_GOAL"===e.type})).map((function(e){return e.value.split("#")[1]}))[0],c.filter((function(e){return"PARENT_GOAL"===e.type})).map((function(e,t){return 0===t?e.value.split("#")[1]:Object(ie.g)(Error("Duplicate parent goal."))}))[0],l=c.filter((function(e){return"GOAL_VALID_AFTER_TIME"===e.type})).map((function(e,t){return 0===t?e.value.slice(e.value.indexOf(" ")+1):Object(ie.g)(Error("Duplicate goal beginline."))}))[0],o=c.filter((function(e){return"GOAL_VALID_BEFORE_TIME"===e.type})).map((function(e,t){return 0===t?e.value.slice(e.value.indexOf(" ")+1):Object(ie.g)(Error("Duplicate goal deadline."))}))[0],u=c.filter((function(e){return"DURATION_ESTIMATE"===e.type})).map((function(e,t){return 0===t?e.value.slice(e.value.indexOf(" ")+1):Object(ie.g)(Error("Duplicate duration estimate."))}))[0],d=void 0===(null===i||void 0===i?void 0:i.durationEstimate)?36e5:i.durationEstimate,void 0===u){t.next=24;break}if(null!==(null===i||void 0===i?void 0:i.durationEstimate)){t.next=20;break}throw Error('The goal template "'.concat(i.name,"\" is abstract and can't be assigned a duration."));case 20:if(null!==(b=Object(Ke.a)(u))){t.next=23;break}throw Error("Couldn't parse duration string \"".concat(u,'"'));case 23:d=b;case 24:if(j=null,h=null,void 0===l){t.next=31;break}if(null!==(p=Je.casual.parseDate(l,new Date,{forwardDate:!0}))){t.next=30;break}throw Error("Couldn't parse date string \"".concat(l,'"'));case 30:j=p.valueOf();case 31:if(void 0===o){t.next=36;break}if(null!==(m=Je.casual.parseDate(o,new Date,{forwardDate:!0}))){t.next=35;break}throw Error("Couldn't parse date string \"".concat(o,'"'));case 35:h=m.valueOf();case 36:return x=[],O=[],null===j&&null===h?(x.push(Date.now()),O.push(100)):(null!==j&&(x.push(j-1),O.push(0),x.push(j),O.push(100)),null!==h&&(x.push(h),O.push(100),x.push(h+1),O.push(0))),t.next=41,Object(te.p)({startTimes:x,utils:O,apiKey:e.apiKey.key}).then(ie.h);case 41:return f=t.sent,t.next=44,Object(te.h)({name:a.name,durationEstimate:Object(ie.f)(d),timeUtilityFunctionId:f.timeUtilityFunctionId,apiKey:e.apiKey.key});case 44:if(g=t.sent,!Object(ie.e)(g)){t.next=54;break}t.t0=g.Err,t.next="UNAUTHORIZED"===t.t0?49:51;break;case 49:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",53);case 51:return n.setStatus({failureResult:"An unknown or network error has occured while trying to create goal.",successResult:""}),t.abrupt("break",53);case 53:return t.abrupt("return");case 54:n.setFieldValue("name",""),e.postSubmit(g.Ok),t.next=63;break;case 58:t.prev=58,t.t1=t.catch(0),(y={}).name=t.t1.message,n.setErrors(y);case 63:case"end":return t.stop()}var v,k}),t,null,[[0,58]])})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:""},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Goal Name",as:"input",value:e.values.name,onChange:function(t){return e.setFieldValue("name",t.target.value)},isInvalid:!!e.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.name}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})},et=a(444);function tt(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i,c,l;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,s={},""===a.name&&(s.name="Please enter an event name",r=!0),(null===(i=Object(Ke.a)(a.durationEstimate))||i<1)&&(s.durationEstimate="Invalid duration estimate",r=!0),n.setErrors(s),!r){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Object(te.p)({startTimes:a.points.map((function(e){return e.x})),utils:a.points.map((function(e){return e.y})),apiKey:e.apiKey.key});case 10:if(c=t.sent,!Object(ie.e)(c)){t.next=22;break}t.t0=c.Err,t.next="UNAUTHORIZED"===t.t0?15:"TIME_UTILITY_FUNCTION_NOT_VALID"===t.t0?17:19;break;case 15:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",21);case 17:return n.setErrors({points:"Utility function is invalid."}),t.abrupt("break",21);case 19:return n.setStatus({failureResult:"An unknown or network error has occured while trying to create utility function.",successResult:""}),t.abrupt("break",21);case 21:return t.abrupt("return");case 22:return t.next=24,Object(te.d)({goalId:e.goalData.goal.goalId,name:a.name,durationEstimate:i,timeUtilityFunctionId:c.Ok.timeUtilityFunctionId,status:e.goalData.status,apiKey:e.apiKey.key});case 24:if(l=t.sent,!Object(ie.e)(l)){t.next=36;break}t.t1=l.Err,t.next="UNAUTHORIZED"===t.t1?29:"GOAL_NONEXISTENT"===t.t1?31:33;break;case 29:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",35);case 31:return n.setStatus({failureResult:"This goal does not exist.",successResult:""}),t.abrupt("break",35);case 33:return n.setStatus({failureResult:"An unknown or network error has occured while modifying goal data.",successResult:""}),t.abrupt("break",35);case 35:return t.abrupt("return");case 36:n.setStatus({failureResult:"",successResult:"Goal Successfully Modified"}),e.setGoalData(l.Ok);case 38:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:e.goalData.name,durationEstimate:null===e.goalData.durationEstimate?"":Object(Ne.a)(Object(Fe.a)({start:0,end:e.goalData.durationEstimate})),points:e.goalData.timeUtilityFunction.startTimes.map((function(t,a){return{x:t,y:e.goalData.timeUtilityFunction.utils[a]}}))},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==e.status.successResult,children:[Object(y.jsxs)(he.a,{children:[Object(y.jsxs)(fe.a.Group,{as:pe.a,children:[Object(y.jsx)(fe.a.Label,{children:"Name"}),Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Goal Name",as:"input",value:e.values.name,onChange:function(t){return e.setFieldValue("name",t.target.value)},isInvalid:!!e.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.name})]}),Object(y.jsxs)(fe.a.Group,{as:pe.a,children:[Object(y.jsx)(fe.a.Label,{children:"Estimated Duration"}),Object(y.jsx)(fe.a.Control,{name:"durationEstimate",type:"text",placeholder:"Estimated Duration",as:"input",value:e.values.durationEstimate,onChange:function(t){return e.setFieldValue("durationEstimate",t.target.value)},isInvalid:!!e.errors.durationEstimate}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.durationEstimate})]})]}),Object(y.jsxs)(fe.a.Group,{children:[Object(y.jsx)(Q.a,{children:Object(y.jsx)(Q.a.Body,{children:Object(y.jsx)(Ae,{span:[Math.min.apply(Math,Object(D.a)(e.values.points.map((function(e){return e.x}))))-1e5,Math.max.apply(Math,Object(D.a)(e.values.points.map((function(e){return e.x}))))+1e5],points:e.values.points,setPoints:function(t){return e.setFieldValue("points",t)},mutable:!0})})}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.errors.points})]}),Object(y.jsx)(j.a,{type:"submit",children:"Submit"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})}function at(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.d)({goalId:e.goalData.goal.goalId,apiKey:e.apiKey.key,name:e.goalData.name,durationEstimate:null===e.goalData.durationEstimate?void 0:e.goalData.durationEstimate,timeUtilityFunctionId:e.goalData.timeUtilityFunction.timeUtilityFunctionId,status:"CANCEL"});case 2:if(r=t.sent,!Object(ie.e)(r)){t.next=14;break}t.t0=r.Err,t.next="UNAUTHORIZED"===t.t0?7:"GOAL_NONEXISTENT"===t.t0?9:11;break;case 7:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",13);case 9:return n.setStatus({failureResult:"This goal does not exist.",successResult:""}),t.abrupt("break",13);case 11:return n.setStatus({failureResult:"An unknown or network error has occured while managing goal.",successResult:""}),t.abrupt("break",13);case 13:return t.abrupt("return");case 14:n.setStatus({failureResult:"",successResult:"Event Edited"}),e.setGoalData(r.Ok);case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{},initialStatus:{failureResult:"",successResult:""},children:function(t){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:t.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==t.status.successResult,children:[Object(y.jsxs)("p",{children:["Are you sure you want to cancel goal for ",e.goalData.name,"?"]}),Object(y.jsx)(j.a,{type:"submit",children:"Confirm"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:t.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:t.status.successResult})]})})}})})}var nt=function(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],i=r.a.useState(!1),c=Object(l.a)(i,2),o=c[0],u=c[1];return Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:[e.data.gd.name,Object(y.jsx)("br",{}),Object(y.jsx)("small",{children:e.data.gd.status})]}),Object(y.jsxs)("td",{children:[void 0!==e.data.ge?Object(ke.a)(e.data.ge.startTime,"p EEE, MMM do"):"NOT SCHEDULED",Object(y.jsx)("br",{}),null!==e.data.gd.durationEstimate&&Object(y.jsxs)("small",{children:["Estimate: ",Object(Ne.a)(Object(Fe.a)({start:0,end:e.data.gd.durationEstimate}))]})]}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(y.jsx)(E.a,{title:"Edit",onClick:function(){return s(!0)},icon:Pe.a,hidden:!e.mutable}),Object(y.jsx)(E.a,{title:"Cancel",onClick:function(){return u(!0)},hidden:"CANCEL"==e.data.gd.status||!e.mutable,variant:"danger",icon:et.a})]})}),Object(y.jsx)(Le,{title:"Edit Goal",show:n,onClose:function(){return s(!1)},children:Object(y.jsx)(tt,{goalData:e.data.gd,setGoalData:function(t){s(!1),e.setData(G()(e.data,{gd:{$set:t}}))},apiKey:e.apiKey})}),Object(y.jsx)(Le,{title:"Cancel Goal",show:o,onClose:function(){return u(!1)},children:Object(y.jsx)(at,{goalData:e.data.gd,apiKey:e.apiKey,setGoalData:function(t){u(!1),e.setData(G()(e.data,{gd:{$set:t}}))}})})]})};var rt=function(e){var t=e.data.map((function(e,t){return{d:e,i:t}})).filter((function(t){var a=t.d;return e.showInactive||"CANCEL"!==a.gd.status}));return Object(y.jsxs)(y.Fragment,{children:[!!e.addable&&Object(y.jsx)($e,{apiKey:e.apiKey,tags:e.tags,templates:e.templates,postSubmit:function(t){e.setData(G()(e.data,{$push:[{gd:t,ge:void 0}]}))}}),Object(y.jsxs)(Ue.a,{hover:!0,bordered:!0,className:"mt-2",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Name"}),Object(y.jsx)("th",{children:"Time"}),Object(y.jsx)("th",{children:"Actions"})]})}),Object(y.jsxs)("tbody",{children:[0===t.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"text-center",colSpan:4,children:"No Goals Yet"})}):Object(y.jsx)(y.Fragment,{children:" "}),t.reverse().map((function(t){var a=t.d,n=t.i;return Object(y.jsx)(nt,{mutable:e.mutable,data:a,setData:function(t){return e.setData(G()(e.data,Object(R.a)({},n,{$set:t})))},apiKey:e.apiKey},n)}))]})]})]})};function st(e){var t=r.a.useRef(null),a={id:"GoalData:".concat(e.goalData.goal.goalId),duration:e.goalData.durationEstimate,color:"#00000000",borderColor:"#00000000",goalData:e.goalData};return r.a.useEffect((function(){var e=new L.a(t.current,{eventData:a});return function(){return e.destroy()}})),Object(y.jsx)(Q.a,{ref:t,className:"px-1 py-1 mb-3 bg-primary text-light overflow-hidden","data-custom":JSON.stringify({goalData:e.goalData}),title:e.goalData.name,style:{cursor:"pointer"},children:Object(y.jsx)("div",{className:"fc-event-main",children:Object(y.jsx)("div",{children:e.goalData.name})})})}var it=function(){var e=Object(N.a)(K.a.mark((function e(t){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)({creatorUserId:[t.apiKey.creatorUserId],status:["PENDING"],scheduled:!1,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ct(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],i=r.a.useState(null),c=Object(l.a)(i,2),o=c[0],u=c[1],d=function(e){u(e),e||null==g.current||g.current.getApi().unselect()},b=r.a.useState(null),j=Object(l.a)(b,2),h=j[0],p=j[1],m=r.a.useState(null),x=Object(l.a)(m,2),O=x[0],f=x[1],g=r.a.useRef(null),v=function(){var t=Object(N.a)(K.a.mark((function t(a){var n,r,s;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.b)({creatorUserId:[e.apiKey.creatorUserId],minStartTime:a.start.valueOf(),maxStartTime:a.end.valueOf(),active:!0,onlyRecent:!0,apiKey:e.apiKey.key}).then(ie.h);case 2:return n=t.sent,t.next=5,Object(te.g)({creatorUserId:[e.apiKey.creatorUserId],minStartTime:a.start.valueOf(),maxStartTime:a.end.valueOf(),onlyRecent:!0,apiKey:e.apiKey.key}).then(ie.h);case 5:return r=t.sent,t.next=8,Object(te.e)({goalId:r.map((function(e){return e.goal.goalId})),status:["PENDING"],onlyRecent:!0,apiKey:e.apiKey.key}).then(ie.h);case 8:return s=t.sent,t.abrupt("return",[].concat(Object(D.a)(n.map(Z)),Object(D.a)(s.map((function(e){return{gd:e,ge:r.find((function(t){return t.goal.goalId===e.goal.goalId}))}})).map((function(e){return J(e.gd,e.ge)})))));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(N.a)(K.a.mark((function t(a,n,r){var s,i,c,l;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a.id.split(":")[0],t.next="ExternalEventData"===t.t0?3:"GoalData"===t.t0?9:15;break;case 3:return s=n.externalEventData,t.next=6,Object(te.a)({externalEventId:s.externalEvent.externalEventId,name:s.name,startTime:a.start.valueOf(),endTime:a.end.valueOf(),active:s.active,apiKey:e.apiKey.key});case 6:return i=t.sent,Object(ie.e)(i)?r():a.setExtendedProp("externalEventData",i.Ok),t.abrupt("break",17);case 9:return c=n.goalData,t.next=12,Object(te.f)({goalId:c.goal.goalId,startTime:a.start.valueOf(),endTime:a.end.valueOf(),active:!0,apiKey:e.apiKey.key});case 12:return l=t.sent,Object(ie.e)(l)?r():a.setExtendedProp("goalEvent",l.Ok),t.abrupt("break",17);case 15:return r(),t.abrupt("break",17);case 17:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}();return n?Object(y.jsx)(je,{apiKey:e.apiKey,onHide:function(){return s(!1)}}):Object(y.jsxs)(he.a,{children:[Object(y.jsx)(pe.a,{lg:2,children:Object(y.jsx)(_.a,{promiseFn:it,apiKey:e.apiKey,children:function(e){var t=e.setData;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(e){return e.map((function(a,n){return Object(y.jsx)(st,{goalData:a,setGoalData:function(a){return t(G()(e,Object(R.a)({},n,{$set:a})))}},n)}))}})]})}})}),Object(y.jsx)(pe.a,{xl:10,children:Object(y.jsx)(U.a,{ref:g,plugins:[V.a,L.b],customButtons:{optimize:{text:"Optimize",click:function(){return s(!0)}}},headerToolbar:{left:"title prev,next today",center:"optimize",right:"timeGridDay,timeGridWeek"},initialView:"timeGridWeek",height:"auto",datesSet:function(e){return e.view.calendar.updateSize()},allDaySlot:!1,slotDuration:"00:30:00",nowIndicator:!0,editable:!0,selectable:!0,selectMirror:!0,events:v,eventContent:ee,unselectCancel:".modal-content",eventClick:function(e){var t=e.event.extendedProps;switch(e.event.id.split(":")[0]){case"ExternalEventData":f(t.externalEventData);break;case"GoalData":p({gd:t.goalData,ge:t.goalEvent})}},eventOverlap:!1,eventResize:function(e){return k(e.event,e.oldEvent.extendedProps,e.revert)},eventDrop:function(e){return k(e.event,e.oldEvent.extendedProps,e.revert)},eventReceive:function(e){e.draggedEl.hidden=!0,k(e.event,JSON.parse(e.draggedEl.getAttribute("data-custom")),e.revert),e.event.remove(),null!=g.current&&g.current.getApi().refetchEvents()},unselect:function(){d(null)},select:function(e){e.start.valueOf()>Date.now()?d([e.start.valueOf(),e.end.valueOf()]):null!=g.current&&g.current.getApi().unselect()}})}),null===o?Object(y.jsx)(y.Fragment,{children:" "}):Object(y.jsx)(Le,{title:"New Event",show:null!==o,onClose:function(){return d(null)},children:Object(y.jsxs)(me.a,{children:[Object(y.jsx)(xe.a,{eventKey:"goal",title:"Create Goal",className:"mt-3",children:Object(y.jsx)(Ge,{apiKey:e.apiKey,span:o,postSubmit:function(){return d(null)}})}),Object(y.jsx)(xe.a,{eventKey:"event",title:"Create Event",className:"mt-3",children:Object(y.jsx)(ge,{apiKey:e.apiKey,startTime:o[0],endTime:o[1],postSubmit:function(){return d(null)}})})]})}),null===O?Object(y.jsx)(y.Fragment,{children:" "}):Object(y.jsx)(Le,{title:"Manage Event",show:null!==O,onClose:function(){return f(null)},children:Object(y.jsx)(We,{externalEventId:O.externalEvent.externalEventId,apiKey:e.apiKey})}),null===h?Object(y.jsx)(y.Fragment,{children:" "}):Object(y.jsx)(Le,{title:"Manage Event",show:null!==h,onClose:function(){return p(null)},children:Object(y.jsx)(rt,{data:[h],setData:function(){return p(null)},apiKey:e.apiKey,tags:e.tags,templates:e.templates,mutable:!0,addable:!1,showInactive:!1})})]})}var lt=function(){var e=Object(N.a)(K.a.mark((function e(t){var a,n,r,s,i,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.j)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 2:return a=e.sent,e.next=5,Object(te.n)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 5:return n=e.sent,e.next=8,Object(te.o)({namedEntityId:n.map((function(e){return e.namedEntity.namedEntityId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 8:return r=e.sent,s=n.map((function(e){return{ned:e,nep:r.filter((function(t){return t.namedEntity.namedEntityId===e.namedEntity.namedEntityId}))}})),e.next=12,Object(te.m)({goalTemplateId:a.map((function(e){return e.goalTemplate.goalTemplateId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 12:return i=e.sent,c=a.map((function(e){return{gtd:e,gtp:i.filter((function(t){return t.goalTemplate.goalTemplateId===e.goalTemplate.goalTemplateId}))}})),e.abrupt("return",{tags:s,templates:c});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ot(e){return Object(y.jsxs)(E.f,{title:"Upcoming Appointments",children:[Object(y.jsx)("span",{children:"This screen shows all future appointments. You can click any date to add an appointment on that date, or click an existing appointment to delete it."}),Object(y.jsxs)(_.a,{promiseFn:lt,apiKey:e.apiKey,children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(t){return Object(y.jsx)(ct,{apiKey:e.apiKey,tags:t.tags,templates:t.templates})}})]})]})}var ut=function(e){return Object(y.jsx)(Y,Object(c.a)(Object(c.a)({},e),{},{children:Object(y.jsx)(b.a,{fluid:!0,className:"py-3 px-3",children:Object(y.jsx)(ot,Object(c.a)({},e))})}))},dt=function(){var e=Object(N.a)(K.a.mark((function e(t){var a,n,r,s,i,c,l,o,u;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)({creatorUserId:[t.apiKey.creatorUserId],status:["PENDING"],onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 2:return a=e.sent,e.next=5,Object(te.g)({goalId:a.map((function(e){return e.goal.goalId})),onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 5:return n=e.sent,r=a.map((function(e){return{gd:e,ge:n.find((function(t){return t.goal.goalId===e.goal.goalId}))}})),e.next=9,Object(te.j)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 9:return s=e.sent,e.next=12,Object(te.n)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 12:return i=e.sent,e.next=15,Object(te.o)({namedEntityId:i.map((function(e){return e.namedEntity.namedEntityId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 15:return c=e.sent,l=i.map((function(e){return{ned:e,nep:c.filter((function(t){return t.namedEntity.namedEntityId===e.namedEntity.namedEntityId}))}})),e.next=19,Object(te.m)({goalTemplateId:s.map((function(e){return e.goalTemplate.goalTemplateId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 19:return o=e.sent,u=s.map((function(e){return{gtd:e,gtp:o.filter((function(t){return t.goalTemplate.goalTemplateId===e.goalTemplate.goalTemplateId}))}})),e.abrupt("return",{data:r,tags:l,templates:u});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var bt=function(e){return Object(y.jsx)(Y,Object(c.a)(Object(c.a)({},e),{},{children:Object(y.jsx)(b.a,{fluid:!0,className:"py-4 px-4",children:Object(y.jsx)(he.a,{className:"justify-content-md-center",children:Object(y.jsx)(pe.a,{md:8,children:Object(y.jsx)(E.d,{id:"goalIntents",name:"My Goals",children:Object(y.jsx)(_.a,{promiseFn:dt,apiKey:e.apiKey,children:function(t){var a=t.setData;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(t){return Object(y.jsx)(rt,{data:t.data,setData:function(e){return a(G()(t,{data:{$set:e}}))},tags:t.tags,templates:t.templates,apiKey:e.apiKey,mutable:!0,addable:!0,showInactive:!1})}})]})}})})})})})}))},jt=a(445),ht=a(223),pt=function(e){Object(m.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).formControlRef=void 0,n.divRef=void 0,n.formControlRef=r.a.createRef(),n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){e.chips.length!==this.props.chips.length&&(this.formControlRef.current.value="")}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{ref:this.divRef,tabIndex:-1,className:"form-control d-flex flex-wrap",style:{height:"auto"},onFocus:function(){return e.formControlRef.current.focus()},onBlur:function(){return e.formControlRef.current.blur()},children:[this.props.chips.map((function(t,a){return Object(y.jsxs)(jt.a,{bg:"secondary",className:"mx-1 mb-1",children:[Object(y.jsx)("span",{className:"align-middle",children:t}),Object(y.jsx)(ht.a,{variant:"white",className:"ms-1 align-middle",onClick:function(){return e.props.onRemove(a)}})]},a)})),Object(y.jsx)("input",{className:"flex-grow-1",ref:this.formControlRef,name:"chipInput",placeholder:this.props.placeholder,"aria-label":"Chip Input",autoComplete:"off",style:{outline:"none",border:"none"},onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),e.props.onSubmit(e.formControlRef.current.value))}})]})}}]),a}(r.a.Component);var mt=function(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i,c,l,o,u,d,b,j,h,p;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},s=!1,""===a.name&&(r.name="Please enter an event name",s=!0),NaN===parseInt(a.utility)&&(r.name="Couldn't parse Utility",s=!0),a.abstract?i=void 0:null===(c=Object(Ke.a)(a.durationEstimate))?(r.durationEstimate="Couldn't parse duration",s=!0):i=c,n.setErrors(r),!s){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Object(te.q)({sourceLang:"test",sourceCode:"test",wasmCache:[],apiKey:e.apiKey.key}).then(ie.h);case 10:return l=t.sent,t.next=13,Object(te.k)({name:a.name,utility:parseInt(a.utility),durationEstimate:i,userGeneratedCodeId:l.userGeneratedCodeId,apiKey:e.apiKey.key});case 13:if(o=t.sent,!Object(ie.e)(o)){t.next=23;break}t.t0=o.Err,t.next="UNAUTHORIZED"===t.t0?18:20;break;case 18:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",22);case 20:return n.setStatus({failureResult:"An unknown or network error has occured while trying to create goalTemplate.",successResult:""}),t.abrupt("break",22);case 22:return t.abrupt("return");case 23:u=o.Ok,d=[],b=Object(W.a)(a.patterns),t.prev=26,b.s();case 28:if((j=b.n()).done){t.next=36;break}return h=j.value,t.next=32,Object(te.l)({goalTemplateId:u.goalTemplate.goalTemplateId,pattern:h,active:!0,apiKey:e.apiKey.key}).then(ie.h);case 32:p=t.sent,d.push(p);case 34:t.next=28;break;case 36:t.next=41;break;case 38:t.prev=38,t.t1=t.catch(26),b.e(t.t1);case 41:return t.prev=41,b.f(),t.finish(41);case 44:n.setFieldValue("name",""),e.postSubmit({gtd:u,gtp:d});case 46:case"end":return t.stop()}}),t,null,[[26,38,41,44]])})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:"",utility:"30",abstract:!1,durationEstimate:"30 minutes",patterns:[]},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Template Name"}),Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Template Name",value:e.values.name,onChange:function(t){return e.setFieldValue("name",t.target.value)},isInvalid:!!e.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.name})]}),Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Goal Utility"}),Object(y.jsx)(fe.a.Control,{name:"utility",type:"number",placeholder:"Goal Utility",value:e.values.utility,onChange:function(t){return e.setFieldValue("utility",t.target.value)},isInvalid:!!e.errors.utility}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.utility})]}),Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsxs)(fe.a.Check,{children:[Object(y.jsx)(fe.a.Check.Input,{type:"radio",name:"abstract",checked:e.values.abstract,isInvalid:!!e.errors.abstract,onClick:function(){e.setFieldValue("abstract",!0)}}),Object(y.jsx)(fe.a.Check.Label,{children:"Abstract Goal"})]}),Object(y.jsxs)(fe.a.Check,{children:[Object(y.jsx)(fe.a.Check.Input,{type:"radio",name:"abstract",isInvalid:!!e.errors.abstract,checked:!e.values.abstract,onClick:function(){e.setFieldValue("abstract",!1)}}),Object(y.jsx)(fe.a.Check.Label,{children:"Schedulable Goal"}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.abstract})]})]}),Object(y.jsxs)(fe.a.Group,{hidden:e.values.abstract,className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Duration Estimate"}),Object(y.jsx)(fe.a.Control,{name:"durationEstimate",type:"text",placeholder:"Duration Estimate",value:e.values.durationEstimate,onChange:e.handleChange,isInvalid:!!e.errors.durationEstimate}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.durationEstimate})]}),Object(y.jsx)(fe.a.Group,{className:"mb-3",children:Object(y.jsx)(pt,{placeholder:"Goal Patterns",chips:e.values.patterns,onSubmit:function(t){e.setFieldValue("patterns",G()(e.values.patterns,{$push:[t]}))},onRemove:function(t){return e.setFieldValue("patterns",e.values.patterns.filter((function(e,a){return a!=t})))}})}),Object(y.jsx)(j.a,{type:"submit",children:"Submit"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})};function xt(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i,c,l,o,u,d,b,j,h,p,m,x,O,f,g;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,s={},""===a.name&&(s.name="Please enter an event name",r=!0),a.abstract?i=void 0:null===(c=Object(Ke.a)(a.durationEstimate))?(s.durationEstimate="Couldn't parse duration",r=!0):i=c,n.setErrors(s),!r){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,Object(te.i)({goalTemplateId:e.data.gtd.goalTemplate.goalTemplateId,name:a.name,utility:a.utility,durationEstimate:i,userGeneratedCodeId:e.data.gtd.userGeneratedCode.userGeneratedCodeId,active:e.data.gtd.active,apiKey:e.apiKey.key});case 9:if(l=t.sent,!Object(ie.e)(l)){t.next=21;break}t.t0=l.Err,t.next="UNAUTHORIZED"===t.t0?14:"GOAL_TEMPLATE_NONEXISTENT"===t.t0?16:18;break;case 14:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",20);case 16:return n.setStatus({failureResult:"This goalTemplate does not exist.",successResult:""}),t.abrupt("break",20);case 18:return n.setStatus({failureResult:"An unknown or network error has occured while modifying goalTemplate data.",successResult:""}),t.abrupt("break",20);case 20:return t.abrupt("return");case 21:o=l.Ok,u=e.data.gtp.map((function(e){return e.pattern})),d=e.data.gtp.filter((function(e){return a.patterns.includes(e.pattern)})),b=a.patterns.filter((function(e){return!u.includes(e)})),j=Object(W.a)(b),t.prev=26,j.s();case 28:if((h=j.n()).done){t.next=36;break}return p=h.value,t.next=32,Object(te.l)({goalTemplateId:o.goalTemplate.goalTemplateId,pattern:p,active:!0,apiKey:e.apiKey.key}).then(ie.h);case 32:m=t.sent,d.push(m);case 34:t.next=28;break;case 36:t.next=41;break;case 38:t.prev=38,t.t1=t.catch(26),j.e(t.t1);case 41:return t.prev=41,j.f(),t.finish(41);case 44:x=u.filter((function(e){return!a.patterns.includes(e)})),O=Object(W.a)(x),t.prev=46,O.s();case 48:if((f=O.n()).done){t.next=54;break}return g=f.value,t.next=52,Object(te.l)({goalTemplateId:o.goalTemplate.goalTemplateId,pattern:g,active:!1,apiKey:e.apiKey.key}).then(ie.h);case 52:t.next=48;break;case 54:t.next=59;break;case 56:t.prev=56,t.t2=t.catch(46),O.e(t.t2);case 59:return t.prev=59,O.f(),t.finish(59);case 62:n.setStatus({failureResult:"",successResult:"GoalTemplate Successfully Modified"}),e.setData({gtd:o,gtp:d});case 64:case"end":return t.stop()}}),t,null,[[26,38,41,44],[46,56,59,62]])})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{name:e.data.gtd.name,utility:e.data.gtd.utility,abstract:null===e.data.gtd.durationEstimate,durationEstimate:null===e.data.gtd.durationEstimate?"":Object(Ne.a)(Object(Fe.a)({start:0,end:e.data.gtd.durationEstimate})),patterns:e.data.gtp.map((function(e){return e.pattern}))},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Template Name"}),Object(y.jsx)(fe.a.Control,{name:"name",type:"text",placeholder:"Template Name",value:e.values.name,onChange:function(t){return e.setFieldValue("name",t.target.value)},isInvalid:!!e.errors.name}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.name})]}),Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Goal Utility"}),Object(y.jsx)(fe.a.Control,{name:"utility",type:"number",placeholder:"Goal Utility",value:e.values.utility,onChange:function(t){return e.setFieldValue("utility",parseInt(t.target.value,10))},isInvalid:!!e.errors.utility}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.utility})]}),Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsxs)(fe.a.Check,{children:[Object(y.jsx)(fe.a.Check.Input,{type:"radio",name:"abstract",checked:e.values.abstract,isInvalid:!!e.errors.abstract,onClick:function(){e.setFieldValue("abstract",!0)}}),Object(y.jsx)(fe.a.Check.Label,{children:"Abstract Goal"})]}),Object(y.jsxs)(fe.a.Check,{children:[Object(y.jsx)(fe.a.Check.Input,{type:"radio",name:"abstract",isInvalid:!!e.errors.abstract,checked:!e.values.abstract,onClick:function(){e.setFieldValue("abstract",!1)}}),Object(y.jsx)(fe.a.Check.Label,{children:"Schedulable Goal"}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.abstract})]})]}),Object(y.jsxs)(fe.a.Group,{hidden:e.values.abstract,className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Duration Estimate"}),Object(y.jsx)(fe.a.Control,{name:"durationEstimate",type:"text",placeholder:"Duration Estimate",value:e.values.durationEstimate,onChange:e.handleChange,isInvalid:!!e.errors.durationEstimate}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.durationEstimate})]}),Object(y.jsxs)(fe.a.Group,{className:"mb-3",children:[Object(y.jsx)(fe.a.Label,{children:"Patterns"}),Object(y.jsx)(pt,{placeholder:"Goal Patterns",chips:e.values.patterns,onSubmit:function(t){e.setFieldValue("patterns",G()(e.values.patterns,{$push:[t]}))},onRemove:function(t){return e.setFieldValue("patterns",e.values.patterns.filter((function(e,a){return a!=t})))}})]}),Object(y.jsx)("br",{}),Object(y.jsx)(j.a,{type:"submit",children:"Submit"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})}function Ot(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.i)({goalTemplateId:e.goalTemplateData.goalTemplate.goalTemplateId,apiKey:e.apiKey.key,name:e.goalTemplateData.name,utility:e.goalTemplateData.utility,userGeneratedCodeId:e.goalTemplateData.userGeneratedCode.userGeneratedCodeId,durationEstimate:null===e.goalTemplateData.durationEstimate?void 0:e.goalTemplateData.durationEstimate,active:!1});case 2:if(r=t.sent,!Object(ie.e)(r)){t.next=14;break}t.t0=r.Err,t.next="UNAUTHORIZED"===t.t0?7:"GOAL_TEMPLATE_NONEXISTENT"===t.t0?9:11;break;case 7:return n.setStatus({failureResult:"You have been automatically logged out. Please relogin.",successResult:""}),t.abrupt("break",13);case 9:return n.setStatus({failureResult:"This goalTemplate does not exist.",successResult:""}),t.abrupt("break",13);case 11:return n.setStatus({failureResult:"An unknown or network error has occured while managing goalTemplate.",successResult:""}),t.abrupt("break",13);case 13:return t.abrupt("return");case 14:n.setStatus({failureResult:"",successResult:"Event Edited"}),e.setGoalTemplateData(r.Ok);case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{},initialStatus:{failureResult:"",successResult:""},children:function(t){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:t.handleSubmit,children:[Object(y.jsxs)("div",{hidden:""!==t.status.successResult,children:[Object(y.jsxs)("p",{children:["Are you sure you want to cancel goalTemplate for ",e.goalTemplateData.name,"?"]}),Object(y.jsx)(j.a,{type:"submit",children:"Confirm"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:t.status.failureResult})]}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:t.status.successResult})]})})}})})}var ft=function(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],i=r.a.useState(!1),c=Object(l.a)(i,2),o=c[0],u=c[1];return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.data.gtd.name}),Object(y.jsx)("td",{children:null!==e.data.gtd.durationEstimate&&Object(Ne.a)(Object(Fe.a)({start:0,end:e.data.gtd.durationEstimate}))}),Object(y.jsx)("td",{children:e.data.gtp.map((function(e,t){return Object(y.jsx)(jt.a,{bg:"secondary",className:"m-1",children:e.pattern},t)}))}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(y.jsx)(E.a,{title:"Edit",onClick:function(){return s(!0)},icon:Pe.a,hidden:!e.mutable}),Object(y.jsx)(E.a,{title:"Cancel",onClick:function(){return u(!0)},hidden:!(e.data.gtd.active&&e.mutable),variant:"danger",icon:et.a})]})}),Object(y.jsx)(Le,{title:"Edit GoalTemplate",show:n,onClose:function(){return s(!1)},children:Object(y.jsx)(xt,{data:e.data,setData:function(t){s(!1),e.setData(G()(e.data,{$set:t}))},apiKey:e.apiKey})}),Object(y.jsx)(Le,{title:"Cancel GoalTemplate",show:o,onClose:function(){return u(!1)},children:Object(y.jsx)(Ot,{goalTemplateData:e.data.gtd,apiKey:e.apiKey,setGoalTemplateData:function(t){u(!1),e.setData(G()(e.data,{gtd:{$set:t}}))}})})]})};var gt=function(e){var t=e.templates.map((function(e,t){return{t:e,i:t}})).filter((function(t){var a=t.t;return e.showInactive||a.gtd.active})),a=r.a.useState(!1),n=Object(l.a)(a,2),s=n[0],i=n[1];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(Ue.a,{hover:!0,bordered:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Name"}),Object(y.jsx)("th",{children:"Estimated Duration"}),Object(y.jsx)("th",{children:"Patterns"}),Object(y.jsx)("th",{children:"Actions"})]})}),Object(y.jsxs)("tbody",{children:[Object(y.jsx)("tr",{hidden:!e.addable,children:Object(y.jsx)("td",{colSpan:5,className:"p-0",children:Object(y.jsx)(E.b,{onClick:function(){return i(!0)}})})}),0===t.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{className:"text-center",colSpan:4,children:"No Templates"})}):Object(y.jsx)(y.Fragment,{children:" "}),t.reverse().map((function(t){var a=t.t,n=t.i;return Object(y.jsx)(ft,{mutable:e.mutable,data:a,setData:function(t){return e.setTemplates(G()(e.templates,Object(R.a)({},n,{$set:t})))},apiKey:e.apiKey},n)}))]})]}),Object(y.jsx)(Le,{title:"New Template",show:s,onClose:function(){return i(!1)},children:Object(y.jsx)(mt,{apiKey:e.apiKey,postSubmit:function(t){e.setTemplates(G()(e.templates,{$push:[t]})),i(!1)}})})]})},yt=function(){var e=Object(N.a)(K.a.mark((function e(t){var a,n,r,s,i,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.j)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 2:return a=e.sent,e.next=5,Object(te.n)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 5:return n=e.sent,e.next=8,Object(te.o)({namedEntityId:n.map((function(e){return e.namedEntity.namedEntityId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 8:return r=e.sent,s=n.map((function(e){return{ned:e,nep:r.filter((function(t){return t.namedEntity.namedEntityId===e.namedEntity.namedEntityId}))}})),e.next=12,Object(te.m)({goalTemplateId:a.map((function(e){return e.goalTemplate.goalTemplateId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 12:return i=e.sent,c=a.map((function(e){return{gtd:e,gtp:i.filter((function(t){return t.goalTemplate.goalTemplateId===e.goalTemplate.goalTemplateId}))}})),e.abrupt("return",{tags:s,templates:c});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var vt=function(e){return Object(y.jsx)(Y,Object(c.a)(Object(c.a)({},e),{},{children:Object(y.jsx)(b.a,{fluid:!0,className:"py-4 px-4",children:Object(y.jsx)(he.a,{className:"justify-content-md-center",children:Object(y.jsx)(pe.a,{md:8,children:Object(y.jsx)(E.d,{id:"goalIntents",name:"My Goals",children:Object(y.jsx)(_.a,{promiseFn:yt,apiKey:e.apiKey,children:function(t){var a=t.setData;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(t){return Object(y.jsx)(gt,{templates:t.templates,setTemplates:function(e){return a(G()(t,{templates:{$set:e}}))},apiKey:e.apiKey,mutable:!0,addable:!0,showInactive:!1})}})]})}})})})})})}))};var kt=function(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],i=r.a.useState(!1),o=Object(l.a)(i,2),u=o[0],j=o[1];return Object(y.jsx)(Y,Object(c.a)(Object(c.a)({},e),{},{children:Object(y.jsxs)(b.a,{fluid:!0,className:"py-4 px-4",children:[Object(y.jsx)("div",{className:"mx-3 my-3",children:Object(y.jsxs)(E.f,{title:"Change Password",children:[Object(y.jsx)("span",{children:"Change your password."}),n?Object(y.jsx)(fe.a.Text,{className:"text-success",children:"Password changed successfully"}):Object(y.jsx)(d.e,{apiKey:e.apiKey,onSuccess:function(){return s(!0)}})]})}),Object(y.jsx)("div",{className:"mx-3 my-3",children:Object(y.jsxs)(E.f,{title:"Change Name",children:[Object(y.jsx)("span",{children:"Change your name."}),u?Object(y.jsx)(fe.a.Text,{className:"text-success",children:"Name changed successfully"}):Object(y.jsx)(d.f,{apiKey:e.apiKey,onSuccess:function(){return j(!0)}})]})})]})}))};function Et(e){var t=function(){var t=Object(N.a)(K.a.mark((function t(a,n){var r,s,i,c,l;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},!1,n.setErrors(r),t.next=5;break;case 5:return t.next=7,Object(te.e)({creatorUserId:[e.apiKey.creatorUserId],status:["PENDING"],onlyRecent:!0,apiKey:e.apiKey.key});case 7:if(s=t.sent,!Object(ie.e)(s)){t.next=17;break}t.t0=s.Err,t.next="UNAUTHORIZED"===t.t0?12:14;break;case 12:return n.setStatus({failureResult:"You have been automatically logged out.",successResult:""}),t.abrupt("break",16);case 14:return n.setStatus({failureResult:"An unknown or network error has occured while trying to update goal.",successResult:""}),t.abrupt("break",16);case 16:return t.abrupt("return");case 17:return i=s.Ok.filter((function(e){return e.name.includes(a.search)})),t.next=20,Object(te.g)({goalId:i.map((function(e){return e.goal.goalId})),onlyRecent:!0,apiKey:e.apiKey.key}).then(ie.h);case 20:c=t.sent,l=i.map((function(e){return{gd:e,ge:c.find((function(t){return t.goal.goalId===e.goal.goalId}))}})),e.postSubmit(l),n.setStatus({failureResult:"",successResult:"Successfully searched"});case 24:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(Oe.a,{onSubmit:t,initialValues:{search:""},initialStatus:{failureResult:"",successResult:""},children:function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(fe.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(y.jsxs)(fe.a.Group,{children:[Object(y.jsx)("h4",{children:"Search by Name"}),Object(y.jsx)(fe.a.Control,{name:"search",type:"text",placeholder:"Search",value:e.values.search,onChange:function(t){return e.setFieldValue("search",t.target.value)},isInvalid:!!e.errors.search}),Object(y.jsx)(fe.a.Control.Feedback,{type:"invalid",children:e.errors.search})]}),Object(y.jsx)(j.a,{type:"submit",children:"Search"}),Object(y.jsx)("br",{}),Object(y.jsx)(fe.a.Text,{className:"text-danger",children:e.status.failureResult}),Object(y.jsx)(fe.a.Text,{className:"text-success",children:e.status.successResult})]})})}})})}var Tt=function(){var e=Object(N.a)(K.a.mark((function e(t){var a,n,r,s,i,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.j)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 2:return a=e.sent,e.next=5,Object(te.n)({creatorUserId:[t.apiKey.creatorUserId],active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 5:return n=e.sent,e.next=8,Object(te.o)({namedEntityId:n.map((function(e){return e.namedEntity.namedEntityId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 8:return r=e.sent,s=n.map((function(e){return{ned:e,nep:r.filter((function(t){return t.namedEntity.namedEntityId===e.namedEntity.namedEntityId}))}})),e.next=12,Object(te.m)({goalTemplateId:a.map((function(e){return e.goalTemplate.goalTemplateId})),active:!0,onlyRecent:!0,apiKey:t.apiKey.key}).then(ie.h);case 12:return i=e.sent,c=a.map((function(e){return{gtd:e,gtp:i.filter((function(t){return t.goalTemplate.goalTemplateId===e.goalTemplate.goalTemplateId}))}})),e.abrupt("return",{tags:s,templates:c});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var wt=function(e){var t=r.a.useState([]),a=Object(l.a)(t,2),n=a[0],s=a[1];return Object(y.jsx)(Y,Object(c.a)(Object(c.a)({},e),{},{children:Object(y.jsxs)(b.a,{fluid:!0,className:"py-4 px-4",children:[Object(y.jsx)(Et,{apiKey:e.apiKey,postSubmit:s}),Object(y.jsx)(he.a,{className:"justify-content-md-center",children:Object(y.jsx)(pe.a,{md:8,children:Object(y.jsxs)(_.a,{promiseFn:Tt,apiKey:e.apiKey,children:[Object(y.jsx)(_.a.Pending,{children:Object(y.jsx)(E.c,{})}),Object(y.jsx)(_.a.Rejected,{children:function(e){return Object(y.jsx)(X,{error:e})}}),Object(y.jsx)(_.a.Fulfilled,{children:function(t){return Object(y.jsx)(rt,{data:n,setData:s,tags:t.tags,templates:t.templates,apiKey:e.apiKey,addable:!1,mutable:!0,showInactive:!1})}})]})})})]})}))};a(419),a(420);var It=function(){var e=r.a.useState(function(){var e=localStorage.getItem("apiKey");if(null==e)return null;try{return JSON.parse(e)}catch(t){return localStorage.setItem("apiKey",JSON.stringify(null)),null}}()),t=Object(l.a)(e,2),a=t[0],n=t[1],s={apiKey:a,setApiKey:function(e){localStorage.setItem("apiKey",JSON.stringify(e)),n(e)}},i={name:"LifeSketch",tagline:"Optimize your day.",homeUrl:"/",tosUrl:"/terms_of_service",darkAdaptedIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAApCAYAAACyXOB4AAAACXBIWXMAAC4jAAAuIwF4pT92AAACgElEQVRYhcVYi3HbMAx9zWUAbVB2A3WCqBt4BHeDZAN3A3UDdQN3gqobKBuoGzgToMccmGNg8E+3707nCw3CT098ABQQUY/rREQ7EU098rUmGIloo/eYiWj4X6ROFMaFiA7/ktTEjyoH5xrVSoIHfjSlKFbtFuqEYFUzPUgNnKwXrGqPLaQOnOQWWGOqaYumszohBFWTC4+V6pzZBLJm5WDlendFyvCXNZjFjdUa4uSTqlWHeJ9/NqbKPA5WaXMHYAWwoxw/ARjedQZAAH5V5PFh81x82WNtQ6pzaDyDmkJj6KBrDdaHs3LP+nVKuS+mmtvcq35t0nU5xdOp5jbX9j4NV+rU9L6xQ++jVCV3112mK6w7twZXvQB4AjBlOT3BWspcc56kOmNqlEmRIm9aKJ0ctN7mDNR0pshLJmfvmGpydpLzWBOpmd7f4S6kl6rJKVNz7B4qBaXuk3VLzt6WyKKsScfKmCZSAyeUZ+YYiJVnrmhOzyUVO0e+u46B74veaEpJOSXk7OUOrlxPzuPalVs8fVy4CD5xUdTwDOAzgLmm0taQcpiZ3LNY/w5gbOkAH16fYTsMtw9TOTDehFRXxB6fKfyhkvhobIzUAuCQ+SMTx+di4T06ArZ0byV7po1dKcgpkC73Goq5F5IavgOn0Ee+q9WbqS6eOoad9sBrM/+9cpxzoF0bRO4Hjt849/rGxGM4JmalTVRm2XYk/BZ0TMQusYoeIiYJpYhpPTGUe5Gx2jPV3mRi/2CVOEditRePq5vV3Dfyp99ChojrHF4SsX7uP8raGzRS9vB+489PAH5oG73Y3wC+MJmviRrkctt8wdxaRS9pFaVtxRJ37tUB4C/qIaI0IJ17gwAAAABJRU5ErkJggg==",lightAdaptedIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAkCAYAAAAHKVPcAAAACXBIWXMAAC4jAAAuIwF4pT92AAACx0lEQVRYhb1XwXHbMBA8e/KXU0HUgeWHMQY+oisIU0HYQdxB5A7kDpgOlAokfcgZfqJ0QHcgV8DMKQsGgQDyQDvZGc+Y4gnYW9wtThdd19FUKG0WRLQiorKpq83UdSaTUNrw5l+dj74TUdHU1fGfk1DaZJw5EX0IvH4BkSRVxCSUNleQ/osgfA8yrWTtSyEBzv4gJMBYcrzS5kESPKgEsmfpPwo3D2FUlagSSpuciNpXEiCJKmdKvFH2MfyEKgf3/V9KgG1K9rzoI9pTgmsi+oH27nFSQmkzR/bLxMzeW19Q2hywiRS9Khe3d5oJ8AKzhAXYD1g19gN2zcwzrhTcXKJqMzCTYI+NW7TtdiKBZyK6ZyVONcH/NHW1wPkO4bGpKyZcYPOQa0rwxIk0dbWjSHcsUB/u+TLrHP/771KzL+zmFlGzci6obzj/AradUjsuWMVV6MWoY3L1K212EzrHIugNLt4Nfdu5ltcoxlQVotm7GLLtTGlTgAy34jzBlDj7G0uAj9Y3KBeDSvDGMLI5iinHnVJGVGH/WDV1taY/t+8ahRztvCES9iiYxFZpYyenjeOwrr33t2Vk9ojeoqNDDbLZOpn2kxNU4UzXXvbu5MXfyf22TCURyupsRojcvqK5M2W8y3BX2Fo43R9NXZWBOunfSdYWjXf0u0N2XofMYGAEM7ME9rBkEQESdIdP5IgOKVALPkS+4EOshEemhHnZYju4vpCKV/0CeytMUuK/kcClNQoe69CegxiKC5JA4S3Hfrwg7hrdMTmurwmwfEAb5mi5F3hDC1c8OnFXaFE/rnSsezQupAQb0men52d4tlOVbdM5HDQUd0yJo8h4t/Gsl6/lzLfeQNwzTCo5LlQTvs+3Ee/3b8VYnD9RncWFSLCEbL33mC/5OQQ2K477hDh+DoGPeDiOj8P9u73TC+957seEPp8c13X0C7Ltw5xkKdn1AAAAAElFTkSuQmCC"};return Object(y.jsx)(o.a,{children:Object(y.jsxs)(u.c,{children:[Object(y.jsx)(u.a,{path:"/",children:Object(y.jsx)(w,{branding:i})}),Object(y.jsx)(u.a,{path:"/instructions",children:Object(y.jsx)(I,{branding:i})}),Object(y.jsx)(u.a,{path:"/about",children:Object(y.jsx)(S,{branding:i})}),Object(y.jsx)(u.a,{path:"/forgot_password",children:Object(y.jsx)(d.c,{branding:i})}),Object(y.jsx)(u.a,{path:"/reset_password",children:Object(y.jsx)(d.i,{branding:i})}),Object(y.jsx)(u.a,{path:"/register",children:Object(y.jsx)(d.h,{branding:i})}),Object(y.jsx)(u.a,{path:"/email_confirm",children:Object(y.jsx)(d.b,{branding:i})}),Object(y.jsx)(u.a,{path:"/parent_confirm",children:Object(y.jsx)(d.g,{branding:i})}),Object(y.jsx)(u.a,{path:"/calendar",children:Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({branding:i},s),{},{component:ut}))}),Object(y.jsx)(u.a,{path:"/dashboard",children:Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({branding:i},s),{},{component:bt}))}),Object(y.jsx)(u.a,{path:"/settings",children:Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({branding:i},s),{},{component:vt}))}),Object(y.jsx)(u.a,{path:"/account",children:Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({branding:i},s),{},{component:kt}))}),Object(y.jsx)(u.a,{path:"/search",children:Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({branding:i},s),{},{component:wt}))}),Object(y.jsx)(u.a,{path:"*",children:Object(y.jsx)(C,{})})]})})};i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(It,{})}),document.getElementById("root"))}},[[424,1,2]]]);
//# sourceMappingURL=main.c5d8e783.chunk.js.map