{"version":3,"sources":["components/ExternalLayout.tsx","img/lady_sit.png","pages/Home.tsx","pages/Instructions.tsx","pages/About.tsx","pages/Error404.tsx","components/DashboardLayout.tsx","components/ErrorMessage.tsx","components/CalendarCard.tsx","utils/utils.ts","components/CalendarSolver.tsx","components/CreateExternalEvent.tsx","components/TimePicker.tsx","components/UtilityPicker.tsx","components/CreateGoal.tsx","components/DisplayModal.tsx","components/ManageExternalEvent.tsx","components/CreateGoalTextbox.tsx","components/ManageGoal.tsx","components/ManageGoalTable.tsx","pages/Calendar.tsx","pages/Dashboard.tsx","components/ChipInput.tsx","components/CreateGoalTemplate.tsx","components/ManageGoalTemplate.tsx","components/ManageGoalTemplateTable.tsx","pages/Settings.tsx","pages/Account.tsx","pages/Search.tsx","App.tsx","img/innexgo_transparent_icon.png","img/innexgo_onyx_transparent.png","index.tsx"],"names":["ExternalHeader","props","listenToScroll","scrolled","document","body","scrollTop","documentElement","scrollHeight","clientHeight","setState","scroll","state","window","addEventListener","this","removeEventListener","topTransparent","transparentTop","navStyle","transitionDuration","backgroundColor","linkStyle","color","marginLeft","style","className","fixed","background","backgroundClip","webkitBackgroundClip","fontWeight","href","title","type","id","React","Component","ExternalLayout","branding","name","children","Navbar","bg","variant","Container","Brand","alt","src","darkAdaptedIcon","width","height","copyrightOrg","Nav","Link","Home","fluid","alignItems","backgroundAttachment","backgroundPosition","backgroundRepeat","backgroundSize","display","justifyContent","marginTop","lady","letterSpacing","marginBottom","fontSize","tagline","lineHeight","Button","border","borderRadius","xmlns","viewBox","preserveAspectRatio","d","Instructions","About","Error404","to","DashboardLayout","apiKey","logoutCallback","setApiKey","SidebarEntry","label","icon","DashboardIcon","CalendarIcon","SearchIcon","SettingsIcon","AccountIcon","Body","ErrorMessage","error","message","stack","externalEventDataToEvent","eed","externalEvent","externalEventId","start","Date","startTime","end","endTime","borderColor","externalEventData","goalDataToEvent","gd","ge","goal","goalId","goalData","goalEvent","GoalCard","Card","ExternalEventCard","CalendarCard","eventInfo","event","extendedProps","split","setHrMin","hr","min","setMinutes","setHours","myColOut","toOut","itsf","asf","out","lerp","a","b","t","utils","expectedValue","sgds","map","s","console","log","sgd","sum","assert","Math","tuf","p","max","fi","findFirstIndex","ftr","li","findLastIndex","ltr","slice","i","length","delta","sgdValue","reduce","accumulator","currentValue","ICalendarSolver","useState","iteration","setIteration","iterating","setIterating","useEffect","setTimeout","ev","dataRef","useRef","data","data_new","index","floor","random","neighbor","current","plugins","timeGridPlugin","interactionPlugin","customButtons","stop","text","click","commit","goalEventNew","active","key","then","unwrap","onHide","cancel","headerToolbar","left","center","right","initialView","datesSet","view","calendar","updateSize","allDaySlot","slotDuration","nowIndicator","editable","selectable","events","eventContent","loadSolverData","goalDataView","creatorUserId","status","scheduled","onlyRecent","goalEventView","goalEvents","x","startTimes","timeUtilityFunction","sort","find","duration","durationEstimate","CalendarSolver","promiseFn","Pending","Rejected","e","Fulfilled","CreateExternalEvent","onSubmit","values","fprops","errors","hasError","setErrors","externalEventNew","maybeExternalEvent","isErr","Err","setStatus","failureResult","successResult","postSubmit","initialValues","description","initialStatus","Form","noValidate","handleSubmit","hidden","Group","Label","Control","placeholder","as","value","onChange","setFieldValue","target","isInvalid","Feedback","Text","TimePicker","options","minTime","time","maxTime","push","format","defaultValue","isClearable","o","setTime","scale","noTimePrefTUF","y","UtilityPicker","span","now","setStart","addHours","valueOf","setEnd","pointsRef","points","setPoints","lineOptions","line","responsive","animation","dragData","round","dragX","showTooltip","onDragStart","_","datasetIndex","mutable","onDrag","onDragEnd","tooltip","callbacks","context","parsed","scales","ticks","callback","v","beginAtZero","steps","stepValue","legend","lineData","datasets","lineTension","fill","Row","Col","onDayChange","day","getHours","getMinutes","sm","CreateGoal","parseDuration","timeUtilityFunctionNew","maybeTimeUtilFunction","Ok","goalNew","timeUtilityFunctionId","timeSpan","maybeGoalData","formatDuration","intervalToDuration","minutes","DisplayModal","Modal","show","onClose","keyboard","backdrop","size","centered","Header","closeButton","Title","EditExternalEventData","externalEventDataNew","maybeExternalEventData","ArchiveExternalEvent","loadExternalEventData","externalEventDataView","Error","ManageExternalEventData","showEditExternalEventData","setShowEditExternalEventData","showArchiveExternalEvent","setShowArchiveExternalEvent","reload","Table","hover","bordered","creationTime","onClick","builtinNlp","winkNlp","model","learnCustomEntities","patterns","CreateHybridGoal","templateNlp","templates","toString","gtp","pattern","readDoc","customEntities","each","maybeTemplateItem","itemAt","template","undefined","parseInt","its","detail","gtd","ds","array","filter","throwException","rawAfterTime","indexOf","rawBeforeTime","rawDurationEstimate","casual","parseDate","forwardDate","nullToUndefined","EditGoal","goalDataNew","setGoalData","CancelGoal","ManageGoal","showEditGoal","setShowEditGoal","showCancelGoal","setShowCancelGoal","Edit","Cancel","setData","update","$set","ManageGoalTable","activeGoalDataEvents","showInactive","addable","CreateGoalTextbox","tags","$push","colSpan","reverse","UnscheduledGoalCard","elRef","draggable","Draggable","eventData","destroy","ref","JSON","stringify","cursor","loadUnscheduledGoalData","EventCalendar","optimizing","setOptimizing","selectedSpan","setSelectedSpanRaw","setSelectedSpan","calendarRef","getApi","unselect","selectedManageGoalData","setSelectedManageGoalData","selectedManageExternalEventData","setSelectedManageExternalEventData","eventSource","args","minStartTime","maxStartTime","changeHandler","oldEventProps","revert","oped","setExtendedProp","ode","maybeGoalEvent","lg","gdus","gdu","xl","optimize","selectMirror","unselectCancel","eventClick","eca","eventOverlap","eventResize","era","oldEvent","eventDrop","eda","eventReceive","draggedEl","parse","getAttribute","remove","refetchEvents","select","dsa","Tabs","Tab","eventKey","ManageExternalEvent","loadCalendarData","goalTemplateDataView","goalTemplateData","namedEntityDataView","namedEntityData","namedEntityPatternView","namedEntityId","namedEntity","namedEntityPatterns","ned","nep","goalTemplatePatternView","goalTemplateId","goalTemplate","goalTemplatePatterns","CalendarWidget","cd","Calendar","loadDashboardData","Dashboard","md","dd","ReactChipInput","formControlRef","divRef","createRef","prevProps","chips","tabIndex","onFocus","focus","onBlur","blur","chip","Badge","CloseButton","onRemove","autoComplete","outline","onKeyDown","keyCode","preventDefault","CreateGoalTemplate","NaN","utility","abstract","ret","userGeneratedCodeNew","sourceLang","sourceCode","wasmCache","userGeneratedCode","goalTemplateNew","userGeneratedCodeId","maybeGoalTemplateData","goalTemplatePatternNew","goalTemplatePattern","Check","Input","checked","handleChange","EditGoalTemplate","goalTemplateDataNew","currentPatterns","includes","toAdd","toRemove","CancelGoalTemplate","setGoalTemplateData","ManageGoalTemplate","showEditGoalTemplate","setShowEditGoalTemplate","showCancelGoalTemplate","setShowCancelGoalTemplate","ManageGoalTemplateTable","activeTemplates","showCreateTemplate","setShowCreateTemplate","setTemplates","loadSettingsData","Settings","Account","passwdSuccess","setPasswdSuccess","nameSuccess","setNameSuccess","onSuccess","SearchForm","search","loadSearchData","Search","searchResults","setSearchResults","sd","App","preexistingApiKeyString","localStorage","getItem","setItem","getPreexistingApiKey","setApiKeyState","apiKeyGetSetter","homeUrl","tosUrl","lightAdaptedIcon","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c5d8e783.chunk.js","sourcesContent":["import React from 'react';\nimport { List as Menu } from 'react-bootstrap-icons';\nimport { Navbar, Nav, Container } from 'react-bootstrap';\nimport { Branding } from '@innexgo/common-react-components';\n\ninterface ExternalHeaderProps {\n  title: string;\n  fixed: boolean;\n  transparentTop: boolean;\n}\n\ninterface ExternalHeaderState {\n  scroll: number;\n}\n\nclass ExternalHeader extends React.Component<ExternalHeaderProps, ExternalHeaderState> {\n\n  constructor(props: ExternalHeaderProps) {\n    super(props);\n    this.state = {\n      scroll: 0,\n    };\n  }\n\n  listenToScroll = () => {\n    const winScroll =\n      document.body.scrollTop || document.documentElement.scrollTop\n\n    const height =\n      document.documentElement.scrollHeight -\n      document.documentElement.clientHeight\n\n    const scrolled = winScroll / height\n\n    this.setState({\n      scroll: scrolled,\n    })\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.listenToScroll)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.listenToScroll)\n  }\n\n  render() {\n    const topTransparent = this.state.scroll === 0 && this.props.transparentTop;\n\n    const navStyle = topTransparent ? {\n      transitionDuration: \"0.4s\",\n      backgroundColor: \"#1C2B2D\"\n    } : {\n      transitionDuration: \"0.4s\",\n      backgroundColor: \"#F6F0E5\"\n    };\n    const linkStyle = topTransparent ? {\n      color: \"#F6F0E5\",\n      marginLeft: \"25px\"\n    } : {\n      color: \"#2A4043\",\n      marginLeft: \"25px\"\n    }\n\n    const gradText = {\n      background: \"linear-gradient(#87C6F0, #EFCB8C)\",\n      color: \"transparent\",\n      backgroundClip: \"text\",\n      webkitBackgroundClip: \"text\",\n      fontWeight: \"bold\" as \"bold\"\n    }\n\n    return (\n      <header>\n        <nav style={navStyle} className={\"navbar navbar-expand-lg py-3\" + (this.props.fixed ? \" fixed-top\" : \"\")}>\n          <div className=\"container\">\n            <a style={gradText} className=\"navbar-brand font-weight-bold\" href=\"/\">{this.props.title}</a>\n            <button className=\"navbar-toggler navbar-toggler-right\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\">\n              <Menu style={linkStyle} />\n            </button>\n            <div className=\"collapse navbar-collapse\"\n              id=\"navbarSupportedContent\">\n              <div className=\"navbar-nav ml-auto\">\n                <a style={linkStyle} className=\"nav-item nav-link font-weight-bold\" href=\"/instructions\">Instructions</a>\n                <a style={linkStyle} className=\"nav-item nav-link font-weight-bold\" href=\"/dashboard\">Login</a>\n                <a style={linkStyle} className=\"nav-item nav-link font-weight-bold\" href=\"/register\">Register</a>\n              </div>\n            </div>\n          </div>\n        </nav>\n      </header>\n    );\n  }\n}\n\ninterface ExternalLayoutProps {\n  fixed: boolean;\n  transparentTop: boolean;\n  branding: Branding;\n}\n\nconst ExternalLayout: React.FC<ExternalLayoutProps> = (props) =>\n  <>\n    <ExternalHeader fixed={props.fixed} transparentTop={props.transparentTop} title={props.branding.name} />\n    {props.children}\n    <Navbar bg=\"dark\" variant=\"dark\">\n      <Container>\n        <Navbar.Brand href=\"#home\">\n          <img\n            alt={`${props.branding.name} Logo`}\n            src={props.branding.darkAdaptedIcon}\n            width=\"30\"\n            height=\"30\"\n            className=\"d-inline-block align-top\"\n          />{' '}\n          {props.branding.name}\n        </Navbar.Brand>\n        {props.branding.copyrightOrg ?\n          <Nav className=\"mr-auto\">\n            <Nav.Link>&copy; {props.branding.copyrightOrg}, 2021</Nav.Link>\n          </Nav>\n          : false\n        }\n      </Container>\n    </Navbar>\n  </>\n\nexport default ExternalLayout;\n","export default __webpack_public_path__ + \"static/media/lady_sit.2719e2ee.png\";","import { Container, Button} from 'react-bootstrap';\n\nimport ExternalLayout from '../components/ExternalLayout';\nimport { Section, BrandedComponentProps} from '@innexgo/common-react-components';\n\nimport lady from '../img/lady_sit.png';\n\nfunction Home(props: BrandedComponentProps) {\n\n  const jumboStyle = {\n    height: \"80vh\",\n    alignItems: \"center\",\n    backgroundAttachment: \"fixed\",\n    backgroundPosition: \"center\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundSize: \"cover\",\n    display: \"flex\",\n    backgroundColor: \"#FFFFFF\",\n    justifyContent: \"center\",\n    marginTop: \"25px\"\n  };\n\n\n  const buttonStyle = {\n    backgroundColor: \"#9DC6E1\",\n    color: \"#FFFFFF\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    width: \"33vh\",\n    fontSize: \"20px\",\n    fontWeight: \"bolder\" as \"bolder\",\n    letterSpacing: \"1px\",\n    marginLeft: \"10px\"\n  };\n\n  const gradText = {\n    background: \"linear-gradient(#9DC6E1, #CBC0AC)\",\n    color: \"transparent\",\n    backgroundClip: \"text\",\n    webkitBackgroundClip: \"text\",\n    fontWeight: \"bold\" as \"bold\",\n    letterSpacing: \"1px\",\n    marginBottom: \"20px\",\n    fontSize: \"45px\"\n  };\n\n  const bodyText = {\n    fontWeight: \"lighter\" as \"lighter\",\n    marginBottom: \"25px\",\n    lineHeight: \"25px\",\n  };\n\n  const homeTextStyle = {\n    marginLeft: \"150px\"\n  };\n\n  const goldBack = {\n    backgroundColor: \"#F6F0E5\"\n  };\n\n  const homeBody = {\n    height: \"50vh\",\n    marginTop: \"110px\"\n  };\n\n  return (\n    <ExternalLayout branding={props.branding} fixed={true} transparentTop={true}>\n      <Container fluid style={jumboStyle}>\n\n        <img src={lady} width = \"450\" height = \"450\" />\n\n        <div style = {homeTextStyle}>\n          <h1 style ={gradText}>{props.branding.tagline}</h1>\n          <h5 style = {bodyText}>\n            Easily organize and manage your <br/>\n            calendar to accomplish long-term goals.\n            </h5>\n            <Button style={buttonStyle} href=\"/register\"> Get Started → </Button>\n        </div>\n      </Container>\n\n      \n      <div className=\"custom-shape-divider-bottom-1624938662\">\n        <svg data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 120\" preserveAspectRatio=\"none\">\n            <path d=\"M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,\n            11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z\" className=\"shape-fill\"></path>\n        </svg>\n      </div>\n\n      <div style = {goldBack}> \n    \n      <Container>\n        <Section id=\"welcome\" name={`Welcome to ${props.branding.name}`}>\n          <div>\n            Welcome to {props.branding.name}, an application built for a class project, but an application designed for the\n            busiest of people. As students at UCLA, we know how frustrating it is to schedule classes,\n            clubs, and homework so we made this application to help all kinds of people efficiently plan their schedule. We invite you to join us\n            and be prepared for what the day has in store.\n            <a href=\"/register\">Register</a>\n          </div>\n        </Section>\n        <Section id=\"why_us\" name=\"Our Application\">\n          <div>\n            A scheduling app shouldn't have to take more than a few minutes to arrange the multiple events of your day; therefore, we use an algorithm modeled after simulated\n            annealing to choose the best fit for certain events around your Commitments (immovable events such as classes, interviews, work, etc.).\n            <br />\n            With all your events in one place, our application gives you a simple TO-DO feed to see what is upcoming in your schedule, allowing you to take a quick glance and\n            go back to working efficiently.\n          </div>\n        </Section>\n        <Section id=\"aboutCreators\" name=\"About the Creators\">\n          <div>\n            Govind Pimpale: I am a 1st year Computer Science major who is interested in working for startup companies after school\n            <br />\n            Edmund Yim: I am a 3rd year Computer Science and Engineering major interested in working as a software engineer after UCLA.\n            <br />\n            Brandon Le: I am a 3rd year Computer Science major interested in working as a software engineer after graduating.\n            <br />\n            Edgar Hukassian: I am a 3rd Year Computer Science Major interested in working as a software engineer after school.\n            <br />\n            Warren Pagsuguiron: I am a 4th year Electrical Engineering major who is also passionate about Computer Science. After UCLA, I plan on working on robotics.\n          </div>\n        </Section>\n        <Section id=\"specialThanks\" name=\"Special Thanks\">\n          <div>\n            We want to thank Professor Eggert & the Language and Teaching Assistants of Winter 2021 CS 97 for their hard-work during the quarter.\n            <a href=\"/register\">Register</a>\n          </div>\n        </Section>\n      </Container>\n\n      </div>\n    </ExternalLayout>\n  )\n}\n\nexport default Home;\n","import {SimpleLayout, BrandedComponentProps} from '@innexgo/common-react-components';\n\nfunction Instructions(props: BrandedComponentProps) {\n  return <SimpleLayout branding={props.branding}>\n    <section>\n      <h2>Registering & Logging In</h2>\n      <p>\n        Looking at the home page of 4cast, we can see at the top right corner a \"register\" button.\n        Clicking on this button will redirect you to our register page where you will have to enter in your Name, Email, and Password.\n        The last thing to do is to agree to the terms of services and click \"Submit Form\"\n        This should send a verification link to the email you specified and upon clicking the link in the email, you are fully registed and ready to start \"Optimizing Your Day\"!\n          (Note: the verification link only works for 15 minutes after it sent. Please check your spam folder if it is not in your inbox)\n        \n        From the verification link or from the home page of 4cast, we can see a \"Login\" button right next to \"Register\" that we used earlier.\n        Simply fill out the bozes that require your email and password that was created and you are ready to use 4cast.\n      </p>\n      <br />\n      <br />\n      <h2>The Sidebar</h2>\n      <p>\n        Inside the app, we can see a gray bar with 6 icons: Expand, Dashboard, Calendar, Search, Settings, and Log Out.\n          - Expand increases the size of the sidebar and allows descriptions of the other icons, as well as a greeting so you know what account your are using.\n          - Dashboard is the first thing you will see when entering the app. Here, we can see our upcoming Goals/Tasks along with info such their Name, Time, Description, and Utility.\n          - Calendar is where we can see all of our current, future, and past events.\n          - Search is where we can find our Tasks/Goals in one neat page.\n          - Settings is where we can change our password.\n      </p>\n      <br />\n      <br />\n      <h2>The Dashboard</h2>\n      <p>\n        Looking at the Dashboard page we can see attributes of our Goals/Tasks, as well as a plus button to add them.\n      </p>\n      <br />\n        <h4>Adding a Task</h4>\n        <p>\n          Click the plus button opens up a form for us to fill out attributes about our Goal/Task.\n          At the top, we can see fields for the Date, Start and End Times, as well as a Utility Distribution.\n            - The Utility Distribution can handle three diffent types: No Time Preference, Deadline, Interval.\n              - No Time Preference: something like watching a movie can be done no matter what day it is or time\n              - Deadline: something like finishing a homework assignment that has a no late policy restriction\n              - Interval: something like an interview, or a metting, or even a class.\n            - After choosing a distribution, you can move the little vertices of the graph to adhere to how important that particular goal is around certain times of the day.\n              - for example, an interval distribution for a hw that has a late policy. Now the graph doesn't necesarily have to be a hard deadline but have a finite negative slope.\n          At the bottom, we can see fields for inputting the Goal Name, Duration, and an optional Goal Desciption.\n          Submitting the form, make the Goal/Task, but notice that it will say \"Not Scheduled\".\n          To actually schedule the Goal/Task that was just made, we will need to head over to the Calendar Page and schedule it.\n        </p>\n      <br />\n      <br />\n      <h2>The Calendar</h2>\n      <p>\n        Lookin at the Calendar page, we can see a few things. At the top, we see buttons to scroll through the calendar, an optimize button, and a perspective changer in the form\n        of \"day\" or \"week\"\n      </p>\n      <br />\n        <h4>Adding a Goal/Task</h4>\n        <p>\n          If we have made Goals and Tasks through the Dashboard, we noticed that they were \"Not Scheduled\". \n          To schedule them, we will need to click-and-drag them to their appropriate time slots.\n          Looking at the top left corner, we should see the Goals and Tasks we created through the Dashboard. \n          If we click on the places Goals, we can see that Time attribute will reflect what time you set it at.\n          \n          Adding a Goal/Task directly through the Calendar automatically schedules it for where you set it.\n          Simply click and drag an empty spot on the calendar and fill out a form similar to how we added a Goal/Task through the Dashboard.\n        </p>\n        <br />\n        <h4>Editing a Goal/Task</h4>\n        <p>\n          To edit a task through the Calendar, simply click on the task and \"Manage Event\" window will pop up.\n          On the right, there is a column called \"Actions\" where we can choose to edit (clicking on the pencil) or delete (clicking on the x) the task.\n          Clicking the edit button will bring out a form similar to making that task while clicking the delete button will bring a pop-up asking if you want to delete the event.\n        </p>\n        <h4>Optimizing Your Schedule</h4>\n        <p>\n          Now that we have task(s) on our calendar, we can optimize them!\n          Clicking on the \"optimize\" button at the top brings out a new calendar view that shows us the taskts that can be optimized.\n            - In this view we can see three new buttons: Start, Commit Changes, and Cancel Changes\n          By choosing start, 4cast will automatically move your tasks around based on their utility distributions to find the best spot.\n            (Note: this process will continue forever, so the user has to manually stop the optimization when they are satisfied with the results)\n          Cicking on \"Commit Changes\" will reflect what was optimized to your regular calendar.\n        </p>\n    <br />\n    <br />\n    <h2>The Search</h2>\n    <p>\n      By clicking the magnifying glass on the sidebar, we are brought to the Search Page.\n      At the top, you can see a search bar and can query for an exact task or tasks that have the same name. \n      After typing in what you want to look for, simply click \"search\" and 4cast will display the tasks with the keywords you searched for. \n      Like with the Calendar and Dashboard, you can edit and delete the tasks that pop up on this page.\n    </p>\n    <br />\n    <br />\n    <h2>Settings</h2>\n    <p>\n      The settings page allows you to change your password and is similar to other \"change password\" forms\n    </p>\n    </section>\n  </SimpleLayout>\n}\n\nexport default Instructions;\n","import {SimpleLayout, BrandedComponentProps} from '@innexgo/common-react-components';\n\nfunction About(props: BrandedComponentProps) {\n  return <SimpleLayout branding={props.branding}>\n    <section>\n      <h2>Our Product</h2>\n      <p>\n        We have designed a state-of-the-art calendar that also doubles as a to-do app. Now there is no need for multiple apps for calendars and lists when we have the perfect\n        solution for you, our all-in-one scheduler: \"The insert our name here\". Perfect for work. Perfect for students. Perfect for everyday users that need to find the extra\n        time in their day.\n      </p>\n      <br />\n      <h2>What Our Product Does</h2>\n      <p>\n        Our web-based application allows you to efficiently schedule your commitments from the day-to-day, week-to-week, and month-to-month. We know how hectic and convoluted\n        life can be so we designed this scheduler to make it easy on our users.\n      </p>\n      <h4>Commitments</h4>\n      <p>\n        As students, we understand that there are immovable events in our day-to-day activities that prevent us from doing other things and so we have implemented a feature\n        for our users to easily input these types of Commitments.\n      </p>\n      <h4>Automatic Scheduling</h4>\n      <p>\n        Our automatic scheduling algorithm allows events to be appropriately placed in the day and respects the Commitments you have in place. This algorithm can schedule\n        your recurring tasks and appropriately place them to where it seems best fit. Of course, you can always rearrange the tasks placed for you by dragging them arround\n        the calendar.\n      </p>\n      <h4>To-Do Feed</h4>\n      <p>\n        As a result of your Commitments and scheduled events, we have designed a To-Do feed that chronoligically lists out your tasks. This tool allows you to easly view your\n        activities and remind you of upcoming events.\n      </p>\n      <h4>Short Term Goal Manager</h4>\n      <p>\n        On the go and need to quickly add something to your calendar? We got you! Our application also works from your phones. With this in mind, we have also made it\n        possible to add Goals that can be done in your off-times or be pushed later in the day or week. We have also made it possible to break tasks into subgoals for\n        planning to be easier.\n      </p>\n      <br />\n      <h3>Technologies Used For This Product</h3>\n      <p>\n        In building our application, we used various programming languages: TypeScript, Java, JavaScript, React, HTML, CSS, and SQL.\n      </p>\n    </section>\n  </SimpleLayout>\n}\n\nexport default About;\n","import { Link } from 'react-router-dom';\n\nfunction Error404() {\n  return (\n    <div style={{\n      display: \"flex\",\n      height: \"100vh\",\n      width: \"100vw\"\n    }}>\n      <div className=\"my-auto mx-auto text-center\">\n        <h1>404 Error.</h1>\n        <h5>Page Not Found</h5>\n        <Link to=\"/\">Return Home</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default Error404\n","import React from 'react';\nimport {\n    ColumnsGap as DashboardIcon,\n    CalendarEvent as  CalendarIcon,\n    Gear as SettingsIcon,\n    Search as SearchIcon,\n    Person as AccountIcon\n} from 'react-bootstrap-icons';\nimport { InnerLayout, AuthenticatedComponentProps } from '@innexgo/auth-react-components';\n\nexport default function DashboardLayout(props: React.PropsWithChildren<AuthenticatedComponentProps>) {\n  return <InnerLayout apiKey={props.apiKey} logoutCallback={() => props.setApiKey(null)} >\n    <InnerLayout.SidebarEntry label=\"Dashboard\" icon={DashboardIcon} href=\"/dashboard\" />\n    <InnerLayout.SidebarEntry label=\"Calendar\" icon={CalendarIcon} href=\"/calendar\" />\n    <InnerLayout.SidebarEntry label=\"Search\" icon={SearchIcon} href=\"/search\" />\n    <InnerLayout.SidebarEntry label=\"Settings\" icon={SettingsIcon} href=\"/settings\" />\n    <InnerLayout.SidebarEntry label=\"Account\" icon={AccountIcon} href=\"/account\" />\n    <InnerLayout.Body>\n      {props.children}\n    </InnerLayout.Body>\n  </InnerLayout>\n}\n","function ErrorMessage(props: {error: Error}) {\n  return <>\n    <p className=\"text-danger\">{props.error.name}: <code>{props.error.message}</code></p>\n    <p className=\"text-danger\">Source: <code>{props.error.stack}</code></p>\n  </>\n}\n\nexport default ErrorMessage;\n","import { Card } from \"react-bootstrap\";\nimport { EventContentArg, EventInput } from \"@fullcalendar/react\"\nimport { GoalData, GoalEvent, ExternalEventData } from '@innexgo/frontend-todo-app-api';\n\nexport function externalEventDataToEvent(eed: ExternalEventData): EventInput {\n  return {\n    id: `ExternalEventData:${eed.externalEvent.externalEventId}`,\n    start: new Date(eed.startTime),\n    end: new Date(eed.endTime),\n    color: \"#00000000\",\n    borderColor: \"#00000000\",\n    externalEventData: eed,\n  }\n}\n\nexport function goalDataToEvent(gd: GoalData, ge:GoalEvent): EventInput {\n  return {\n    id: `GoalData:${gd.goal.goalId}`,\n    start: new Date(ge.startTime),\n    end: new Date(ge.endTime),\n    color: \"#00000000\",\n    borderColor: \"#00000000\",\n    goalData: gd,\n    goalEvent: ge,\n  }\n}\n\nexport function GoalCard(props: { goalData: GoalData }) {\n  return <Card className=\"px-1 py-1 h-100 w-100 bg-primary text-light overflow-hidden\">\n    {props.goalData.name}\n  </Card>\n}\n\n// ExternalEvent\nexport function ExternalEventCard(props: {\n  externalEventData: ExternalEventData\n}) {\n  return (\n    <Card className=\"px-1 py-1 h-100 w-100 bg-secondary text-light overflow-hidden\" >\n      {props.externalEventData.name}\n    </Card>\n  )\n}\n\n\nfunction CalendarCard(eventInfo: EventContentArg) {\n  const props = eventInfo.event.extendedProps;\n  switch (eventInfo.event.id.split(':')[0]) {\n    case \"ExternalEventData\":\n      return <ExternalEventCard externalEventData={props.externalEventData} />\n    case \"GoalData\":\n      return <GoalCard goalData={props.goalData} />\n  }\n}\n\nexport default CalendarCard;\n","import setHours from 'date-fns/setHours';\nimport setMinutes from 'date-fns/setMinutes';\nimport {\n  Sentences,\n  CustomEntities,\n  SelectedCustomEntities,\n  Entities,\n  SelectedEntities,\n  Tokens,\n  SelectedTokens,\n  ItemCustomEntity,\n  ItemEntity,\n  ItemSentence,\n  ItemToken,\n  Document,\n  ItsFunction,\n  AsFunction,\n} from 'wink-nlp';\n\n\n\nexport const INT_MAX: number = 999999999999999;\n\nexport const setHrMin = (d: Date, hr: number, min: number) => setMinutes(setHours(d, hr), min)\nexport type ColOutApplicable = Sentences | CustomEntities | SelectedCustomEntities | Entities | SelectedEntities | Tokens | SelectedTokens;\n\n// collection out\n// $ExpectType <T, U>(toOut: ColOutApplicable, itsf: ItsFunction<T>, asf: AsFunction<T, U>) => U\nexport function myColOut<T, U>(toOut: ColOutApplicable, itsf: ItsFunction<T>, asf: AsFunction<T, U>): U {\n  return (toOut.out(itsf, asf) as any) as U;\n}\n\n// run out on item types\nexport type ItemOutApplicable = ItemCustomEntity | ItemEntity | ItemSentence | ItemToken | Document;\n\n// item out\n// $ExpectType <T>(toOut: ItemOutApplicable, itsf: ItsFunction<T>) => T\nexport function myItemOut<T>(toOut: ItemOutApplicable, itsf: ItsFunction<T>): T {\n  return (toOut.out(itsf) as any) as T;\n}\n","import React from 'react'\nimport { Loader } from '@innexgo/common-react-components';\nimport { Async, AsyncProps } from 'react-async';\nimport ErrorMessage from '../components/ErrorMessage';\nimport FullCalendar from '@fullcalendar/react'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin from '@fullcalendar/interaction'\nimport CalendarCard from '../components/CalendarCard';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { GoalData, goalDataView, goalEventView, goalEventNew, } from '@innexgo/frontend-todo-app-api';\nimport {INT_MAX} from '../utils/utils';\n\nimport { unwrap } from '@innexgo/frontend-common';\n\n\nimport { findFirstIndex, findLastIndex } from '@innexgo/frontend-common';\nimport assert from 'assert';\n\ntype SolverDataPoint = {\n  startTime: number,\n  utils: number\n}\n\ntype SolverGoalData = {\n  data: GoalData,\n  tuf: SolverDataPoint[],\n  startTime: number,\n  endTime: number,\n}\n\ntype CalendarSolverProps = {\n  apiKey: ApiKey;\n  onHide: () => void;\n}\n\ntype ICalendarSolverProps = CalendarSolverProps & {\n  data: SolverGoalData[];\n}\n\nconst lerp = (a: SolverDataPoint, b: SolverDataPoint, startTime: number) => {\n  const t = (startTime - a.startTime) / (b.startTime - a.startTime);\n  return a.utils * (1 - t) + b.utils * t;\n}\n\n// this procedure uses the trapezoidal rule to integrate utility over the span\nconst sgdValue = (sgd: SolverGoalData) => {\n  let sum = 0;\n  // TODO use binary search for finding beginning index\n  assert(sgd.startTime > Math.min(...sgd.tuf.map(p => p.startTime)),\n    \"sgd's start time must be greater than at least one point in tuf\")\n\n  assert(sgd.endTime < Math.max(...sgd.tuf.map(p => p.startTime)),\n    \"sgd's end time must be less than at least one point in tuf\")\n\n  // here, we interpolate a point we can begin integrating at\n  const fi = findFirstIndex(sgd.tuf, p => p.startTime > sgd.startTime)!\n  const ftr = {\n    startTime: sgd.startTime,\n    utils: lerp(sgd.tuf[fi - 1], sgd.tuf[fi], sgd.startTime)\n  };\n\n  // here, we interpolate the last point to integrate at\n  const li = findLastIndex(sgd.tuf, p => p.startTime < sgd.endTime)!;\n  const ltr = {\n    startTime: sgd.endTime,\n    utils: lerp(sgd.tuf[li], sgd.tuf[li + 1], sgd.endTime)\n  };\n\n  // create a new array with all of our points.\n  // This will be simple to apply the trapezoidal rule to\n  const tuf = [ftr, ...sgd.tuf.slice(fi, li + 1), ltr];\n\n  // apply non-uniform trapezoidal rule\n  for (let i = 1; i < tuf.length; i++) {\n    const delta = tuf[i].startTime - tuf[i - 1].startTime;\n    const avg = (tuf[i].utils + tuf[i - 1].utils) / 2;\n    sum += avg * delta;\n  }\n\n  return sum;\n}\n\n// sum of all the sgd values\nconst expectedValue = (sgds: SolverGoalData[]) =>\n  sgds\n    .map(s => { console.log(s); return sgdValue(s) })\n    .reduce((accumulator, currentValue) => accumulator + currentValue, 0)\n\nconst neighbor = (sgds: SolverGoalData[]) => {\n  const index = Math.floor(Math.random() * sgds.length);\n  return sgds.map((gd, i) => ({\n    data: gd.data,\n    tuf: gd.tuf,\n    endTime: gd.endTime,\n    startTime: i === index\n      ? gd.startTime + (Math.random() - 0.5) * 10000000\n      : gd.startTime\n  }))\n}\n\n// our probability acceptance function\nconst pAccept = (ev: number, ev_new: number) => {\n  return ev_new >= ev\n}\n\nfunction ICalendarSolver(props: ICalendarSolverProps) {\n  const [iteration, setIteration] = React.useState(0);\n  const [iterating, setIterating] = React.useState(false);\n\n  React.useEffect(() => {\n    if (iterating) {\n      setTimeout(() => setIteration(iteration + 1), 100);\n    }\n  }, [iteration, iterating]);\n\n  // had problems with react going into infinite loops when using state\n  // therefore we're using ref again. later we might want to look into this.\n  // it works for now though\n  const dataRef = React.useRef<SolverGoalData[]>(props.data);\n\n  const data_new = neighbor(dataRef.current);\n  if (pAccept(expectedValue(dataRef.current), expectedValue(data_new))) {\n    dataRef.current = data_new;\n  }\n\n  return <>\n    <FullCalendar\n      plugins={[timeGridPlugin, interactionPlugin]}\n      customButtons={{\n        stop: {\n          text: \"Stop\",\n          click: () => setIterating(false)\n        },\n        start: {\n          text: \"Start\",\n          click: () => setIterating(true)\n        },\n        commit: {\n          text: 'Commit Changes',\n          click: async () => {\n            // for each element in the middle of the array:\n            for (const sgd of dataRef.current.slice(1, -1)) {\n              const ge = await goalEventNew({\n                goalId: sgd.data.goal.goalId,\n                startTime: sgd.startTime,\n                endTime: sgd.endTime,\n                active: true,\n                apiKey: props.apiKey.key,\n              })\n                .then(unwrap);\n\n              // TODO report errors\n            }\n            props.onHide();\n          }\n        },\n        cancel: {\n          text: 'Cancel Changes',\n          click: props.onHide\n        }\n      }}\n      headerToolbar={{\n        left: 'title prev,next today',\n        center: iterating ? 'stop' : 'start commit cancel',\n        right: 'timeGridDay,timeGridWeek',\n      }}\n      initialView='timeGridWeek'\n      height={\"auto\"}\n      datesSet={({ view }) => /* Keeps window size in sync */view.calendar.updateSize()}\n      allDaySlot={false}\n      slotDuration=\"00:30:00\"\n      nowIndicator={true}\n      editable={false}\n      selectable={false}\n      events={dataRef.current.map(gd => ({\n        id: `GoalData:${gd.data.goal.goalId}`,\n        start: new Date(gd.startTime),\n        end: new Date(gd.endTime),\n        color: \"#00000000\",\n        borderColor: \"#00000000\",\n        goalData: gd.data\n      }))}\n      eventContent={CalendarCard}\n    />\n  </>\n}\n\n\n\nconst loadSolverData = async (props: AsyncProps<SolverGoalData[]>) => {\n  const goalData = await goalDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    status: [\"PENDING\"],\n    scheduled: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  const goalEvents = await goalEventView({\n    goalId: goalData.map(gd => gd.goal.goalId),\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap);\n\n  let x: SolverGoalData[] = goalData\n    .map(gd => {\n      const startTimes = gd.timeUtilityFunction.startTimes;\n      const utils = gd.timeUtilityFunction.utils;\n\n      const tuf = startTimes\n        // zip with utils\n        .map((t, i) => ({ startTime: t, utils: utils[i] }))\n        // sort by startTime\n        .sort((a, b) => a.startTime - b.startTime);\n\n      const event = goalEvents.find(x => x.goal.goalId === gd.goal.goalId)!;\n\n      return {\n        data: gd,\n        startTime: event.startTime,\n        endTime: event.endTime,\n        duration: gd.durationEstimate,\n        tuf: [\n          {\n            startTime: 0,\n            utils: tuf[0].utils\n          },\n          ...tuf,\n          {\n            startTime: INT_MAX,\n            utils: tuf[tuf.length - 1].utils\n          }\n        ]\n      }\n    });\n\n  return x;\n}\n\nfunction CalendarSolver(props: CalendarSolverProps) {\n  return <Async\n    promiseFn={loadSolverData}\n    apiKey={props.apiKey}\n  >\n    <Async.Pending><Loader /></Async.Pending>\n    <Async.Rejected>\n      {e => <ErrorMessage error={e} />}\n    </Async.Rejected>\n    <Async.Fulfilled<SolverGoalData[]>>\n      {sgds => <ICalendarSolver data={sgds} {...props} />}\n    </Async.Fulfilled>\n  </Async>\n}\n\nexport default CalendarSolver;\n","import { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Button, Form } from \"react-bootstrap\";\nimport { externalEventNew} from \"@innexgo/frontend-todo-app-api\";\nimport {ApiKey } from '@innexgo/frontend-auth-api';\n\n\nimport {isErr} from '@innexgo/frontend-common';\n\n\ntype CreateExternalEventProps = {\n  startTime: number;\n  endTime: number;\n  apiKey: ApiKey;\n  postSubmit: () => void;\n}\n\nfunction CreateExternalEvent(props: CreateExternalEventProps) {\n  type CreateExternalEventValue = {\n    name: string,\n    description: string,\n    startTime: number,\n    endTime: number,\n  }\n\n  const onSubmit = async (values: CreateExternalEventValue,\n    fprops: FormikHelpers<CreateExternalEventValue>) => {\n\n    let errors: FormikErrors<CreateExternalEventValue> = {};\n\n    // Validate input\n\n    let hasError = false;\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const maybeExternalEvent = await externalEventNew({\n      name: values.name,\n      startTime: values.startTime,\n      endTime: values.endTime,\n      apiKey: props.apiKey.key,\n    });\n\n    if (isErr(maybeExternalEvent)) {\n      switch (maybeExternalEvent.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"Unable to authenticate. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create externalEvent.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Created\"\n    });\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<CreateExternalEventValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: \"\",\n        description: \"\",\n        startTime: props.startTime,\n        endTime: props.endTime\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>ExternalEvent Name</Form.Label>\n              <Form.Control\n                name=\"name\"\n                type=\"text\"\n                placeholder=\"Event Name\"\n                as=\"input\"\n                value={fprops.values.name}\n                onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                isInvalid={!!fprops.errors.name}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control\n                name=\"description\"\n                type=\"text\"\n                placeholder=\"Description\"\n                as=\"input\"\n                value={fprops.values.description}\n                onChange={e => fprops.setFieldValue(\"description\", e.target.value)}\n                isInvalid={!!fprops.errors.description}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.description}</Form.Control.Feedback>\n            </Form.Group>\n            <Button type=\"submit\" className=\"mb-3\">Submit Form</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nexport default CreateExternalEvent;\n","import Select from 'react-select'\nimport format from 'date-fns/format'\nimport {setHrMin} from '../utils/utils';\n\ntype TimePickerProps = {\n  time: Date,\n  setTime: (a: Date) => void;\n  minTime?:Date,\n  maxTime?:Date,\n  className?: string\n}\n\ntype OptionType = {\n  label: string,\n  value: Date\n}\n\nfunction TimePicker(props: TimePickerProps) {\n  const options = [];\n  for (let hr = 0; hr < 24; hr++) {\n    for (let min = 0; min < 60; min += 30) {\n      if( props.minTime && props.minTime >= setHrMin(props.time, hr, min)) {\n          continue;\n      }\n      if( props.maxTime && props.maxTime <= setHrMin(props.time, hr, min)) {\n          continue;\n      }\n      options.push({ value: setHrMin(props.time, hr, min), label: format(setHrMin(props.time, hr, min), 'p') });\n    }\n  }\n\n  return <>\n    <Select<OptionType>\n      className={props.className}\n      options={options}\n      defaultValue={{value: new Date(props.time), label: format(props.time, 'p')}}\n      isClearable={false}\n      onChange={o => props.setTime(o!.value)}\n    />\n  </>\n}\n\nexport default TimePicker;\n","import React from 'react'\nimport Select from 'react-select'\nimport { Col, Row } from 'react-bootstrap';\nimport { Line } from 'react-chartjs-2';\nimport TimePicker from '../components/TimePicker';\nimport { setHrMin } from '../utils/utils';\nimport getHours from 'date-fns/getHours'\nimport getMinutes from 'date-fns/getMinutes'\nimport addHours from \"date-fns/addHours\";\nimport format from 'date-fns/format';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport 'react-day-picker/lib/style.css';\nimport 'chartjs-plugin-dragdata';\n\nconst scale = 100;\n\ntype Point = { x: number, y: number };\n\n\ntype UtilityPickerProps = {\n  span?: [startTime: number, endTime: number];\n  mutable: boolean,\n  points: Point[],\n  setPoints: (points: Point[]) => void,\n}\n\nfunction noTimePrefTUF(start: number, end: number) {\n  return [{\n    x: (start + end) / 2,\n    y: scale\n  }]\n}\n\nfunction UtilityPicker(props: UtilityPickerProps) {\n  const [start, setStart] = React.useState(props.span?.[0] ?? Date.now());\n  const [end, setEnd] = React.useState(props.span?.[1] ?? addHours(new Date(), 3).valueOf());\n\n  const pointsRef = React.useRef([] as Point[]);\n  pointsRef.current = [\n    {\n      x: start,\n      y: props.points.length === 0 ? 0 : props.points[0].y\n    },\n    ...props.points,\n    {\n      x: end,\n      y: props.points.length === 0 ? 0 : props.points[props.points.length - 1].y\n    }\n  ];\n\n  React.useEffect(() => {\n    props.setPoints(noTimePrefTUF(start, end));\n  }, []);\n\n  const lineOptions = {\n    line: 'scatter',\n    responsive: true,\n    animation: {\n      duration: 0\n    },\n    plugins: {\n      dragData: {\n        round: 0,\n        dragX: true,\n        showTooltip: true,\n        onDragStart: function(_: React.MouseEvent, datasetIndex: number, index: number, value: Point) {\n          if(!props.mutable) {\n              return false;\n          }\n          if (index === 0) {\n            return false\n          }\n          if (index === pointsRef.current.length-1) {\n            return false\n          }\n          return true;\n        },\n        onDrag: (_: React.MouseEvent, datasetIndex: number, index: number, value: Point) => {\n          if (value.y > 100) {\n            return false\n          }\n          return true;\n        },\n        onDragEnd: (_: React.MouseEvent, datasetIndex: number, index: number, value: Point) => {\n          if(value.y > 100) {\n              value.y = 100;\n          }\n          pointsRef.current[index] = value;\n          props.setPoints(pointsRef.current.slice(1, pointsRef.current.length - 1));\n        },\n      },\n      tooltip: {\n        callbacks: {\n          title: (context: any) => format(context[0].parsed.x, \"hh:mm a\")\n        }\n      },\n    },\n    scales: {\n      x: {\n        type: 'linear',\n        min: start,\n        max: end,\n        ticks: {\n          callback: (v: number) => format(v, \"hh:mm a\")\n        }\n      },\n      y: {\n        type: 'linear',\n        beginAtZero: true,\n        steps: 1,\n        stepValue: 1,\n        max: 120\n      },\n    },\n    legend: {\n      display: false\n    },\n  };\n\n\n  const lineData = {\n    datasets: [\n      {\n        lineTension: 0,\n        label: 'Utility',\n        fill: false,\n        borderColor: 'rgba(255, 99, 132, 0.8)',\n        data: pointsRef.current\n      },\n    ],\n  }\n\n\n  return <>\n    <Row>\n      <Col>\n        <div>Date:</div>\n        <DayPickerInput value={new Date(start)} onDayChange={day => {\n          setStart(setHrMin(day, getHours(start), getMinutes(start)).valueOf());\n          setEnd(setHrMin(day, getHours(end), getMinutes(end)).valueOf());\n        }} />\n      </Col>\n      <Col sm={3}>\n        <div>From:</div>\n        <TimePicker time={new Date(start)} setTime={t => setStart(t.valueOf())} maxTime={new Date(end)} />\n      </Col>\n      <Col sm={3}>\n        <div>To:</div>\n        <TimePicker time={new Date(end)} setTime={t => setEnd(t.valueOf())} minTime={new Date(start)} />\n      </Col>\n      <Col hidden={!props.mutable}>\n        <div>Utility Distribution</div>\n        <Select\n          isClearable={false}\n          defaultValue={{ value: \"constant\", label: \"No Time Preference\" }}\n          options={[\n            { value: \"constant\", label: \"No Time Preference\" },\n            { value: \"deadline\", label: \"Deadline\" },\n            { value: \"interval\", label: \"Interval\" },\n          ]}\n          onChange={o => {\n            const t = (start.valueOf() + end.valueOf()) / 2;\n            switch (o!.value) {\n              case \"constant\": {\n                props.setPoints(noTimePrefTUF(start, end));\n                break;\n              }\n              case \"deadline\": {\n                props.setPoints([{\n                  x: t - 1,\n                  y: scale\n                }, {\n                  x: t + 1,\n                  y: 0\n                }])\n                break;\n              }\n              case \"interval\": {\n                props.setPoints([{\n                  x: t - 1000001,\n                  y: 0\n                }, {\n                  x: t - 1000000,\n                  y: scale\n                }, {\n                  x: t + 1000000,\n                  y: scale\n                }, {\n                  x: t + 1000001,\n                  y: 0\n                }])\n                break;\n              }\n            }\n          }}\n        />\n      </Col>\n    </Row>\n    <Line\n      options={lineOptions as any}\n      data={lineData} />\n  </>\n}\n\nexport default UtilityPicker;\n","import { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Col, Row, Card, Button, Form } from \"react-bootstrap\";\nimport { goalNew, GoalData, timeUtilityFunctionNew, } from \"@innexgo/frontend-todo-app-api\";\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport UtilityPicker from \"../components/UtilityPicker\"\nimport parseDuration from 'parse-duration';\nimport formatDuration from 'date-fns/formatDuration';\nimport intervalToDuration from 'date-fns/intervalToDuration';\nimport { isErr } from '@innexgo/frontend-common';\n\n\ntype CreateGoalProps = {\n  span?: [startTime: number, endTime: number];\n  apiKey: ApiKey;\n  postSubmit: (gd:GoalData) => void;\n}\n\nfunction CreateGoal(props: CreateGoalProps) {\n  type CreateGoalValue = {\n    name: string,\n    durationEstimate: string,\n    points: { x: number, y: number }[]\n  }\n\n  const onSubmit = async (values: CreateGoalValue,\n    fprops: FormikHelpers<CreateGoalValue>) => {\n\n    let errors: FormikErrors<CreateGoalValue> = {};\n\n    // Validate input\n\n    let hasError = false;\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    const durationEstimate = parseDuration(values.durationEstimate);\n\n    if (durationEstimate === null) {\n      errors.durationEstimate = \"Invalid duration estimate\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const maybeTimeUtilFunction = await timeUtilityFunctionNew({\n      startTimes: values.points.map(p => p.x),\n      utils: values.points.map(p => p.y),\n      apiKey: props.apiKey.key,\n    })\n\n    if (isErr(maybeTimeUtilFunction)) {\n      switch (maybeTimeUtilFunction.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"Unable to authenticate request. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"TIME_UTILITY_FUNCTION_NOT_VALID\": {\n          fprops.setErrors({\n            points: \"Utility function is invalid.\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create utility function.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    let tuf = maybeTimeUtilFunction.Ok;\n\n\n    let maybeGoalData = await goalNew({\n      name: values.name,\n      durationEstimate: durationEstimate!,\n      timeUtilityFunctionId: tuf.timeUtilityFunctionId,\n      timeSpan: props.span,\n      apiKey: props.apiKey.key,\n    })\n\n\n    if (isErr(maybeGoalData)) {\n      switch (maybeGoalData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create goal.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Goal Created\"\n    });\n    // execute callback\n    props.postSubmit(maybeGoalData.Ok);\n  }\n\n\n  return <>\n    <Formik<CreateGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: \"\",\n        durationEstimate: formatDuration(\n          props.span\n            ? intervalToDuration({\n              start: props.span[0],\n              end: props.span[1]\n            })\n            : {\n              minutes: 30,\n            }\n        ),\n        points: [],\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Form.Group>\n              <Card>\n                <Card.Body>\n                  <UtilityPicker\n                    span={props.span}\n                    points={fprops.values.points}\n                    setPoints={e => fprops.setFieldValue('points', e)}\n                    mutable\n                  />\n                </Card.Body>\n              </Card>\n              <Form.Text className=\"text-danger\">{fprops.errors.points}</Form.Text>\n            </Form.Group>\n            <Row>\n              <Form.Group as={Col}>\n                <Form.Control\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"Goal Name\"\n                  as=\"input\"\n                  value={fprops.values.name}\n                  onChange={e => fprops.setFieldValue('name', e.target.value)}\n                  isInvalid={!!fprops.errors.name}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n              </Form.Group>\n              <Form.Group as={Col}>\n                <Form.Control\n                  name=\"durationEstimate\"\n                  type=\"text\"\n                  placeholder=\"Estimated Duration\"\n                  as=\"input\"\n                  value={fprops.values.durationEstimate}\n                  onChange={e => fprops.setFieldValue('durationEstimate', e.target.value)}\n                  isInvalid={!!fprops.errors.durationEstimate}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.durationEstimate}</Form.Control.Feedback>\n              </Form.Group>\n            </Row>\n            <Button type=\"submit\">Submit Form</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nexport default CreateGoal;\n","import React from 'react';\nimport {Modal} from 'react-bootstrap';\n\ntype DisplayModalProps = {\n  title: string;\n  show: boolean;\n  onClose: () => void;\n  children: React.ReactNode\n}\n\nexport default function DisplayModal(props:DisplayModalProps) {\n  return <Modal\n    show={props.show}\n    onHide={props.onClose}\n    keyboard={false}\n    backdrop=\"static\"\n    size=\"xl\"\n    centered\n  >\n    <Modal.Header closeButton>\n      <Modal.Title>{props.title}</Modal.Title>\n    </Modal.Header>\n    <Modal.Body>\n      {props.children}\n    </Modal.Body>\n  </Modal>\n\n}\n","import React from 'react';\nimport { Form, Button, Table } from 'react-bootstrap';\nimport { Loader } from '@innexgo/common-react-components';\nimport { Async, AsyncProps } from 'react-async';\nimport ErrorMessage from '../components/ErrorMessage';\nimport DisplayModal from '../components/DisplayModal';\nimport { ExternalEventData, externalEventDataNew, externalEventDataView } from '@innexgo/frontend-todo-app-api';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { Pencil as EditIcon, Trash as DeleteIcon, BoxArrowUp as RestoreIcon } from 'react-bootstrap-icons';\nimport { Formik, FormikHelpers } from 'formik'\nimport format from 'date-fns/format';\nimport { isErr } from '@innexgo/frontend-common';\n\n\ntype EditExternalEventDataProps = {\n  externalEventData: ExternalEventData,\n  apiKey: ApiKey,\n  postSubmit: () => void\n};\n\nfunction EditExternalEventData(props: EditExternalEventDataProps) {\n\n  type EditExternalEventDataValue = {\n    name: string,\n  }\n\n  const onSubmit = async (values: EditExternalEventDataValue,\n    fprops: FormikHelpers<EditExternalEventDataValue>) => {\n\n    const maybeExternalEventData = await externalEventDataNew({\n      externalEventId: props.externalEventData.externalEvent.externalEventId,\n      apiKey: props.apiKey.key,\n      name: values.name,\n      startTime: props.externalEventData.startTime,\n      endTime: props.externalEventData.endTime,\n      active: props.externalEventData.active,\n    });\n\n    if (isErr(maybeExternalEventData)) {\n      switch (maybeExternalEventData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"EXTERNAL_EVENT_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This event does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while modifying event data.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Successfully Modified\"\n    });\n\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<EditExternalEventDataValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: props.externalEventData.name,\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Form.Group >\n              <Form.Label>Event Name</Form.Label>\n              <Form.Control\n                name=\"name\"\n                type=\"text\"\n                placeholder=\"Event Name\"\n                as=\"input\"\n                value={fprops.values.name}\n                onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                isInvalid={!!fprops.errors.name}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n            </Form.Group>\n            <Button type=\"submit\">Submit</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\n\ntype ArchiveExternalEventProps = {\n  externalEventData: ExternalEventData,\n  apiKey: ApiKey,\n  postSubmit: () => void\n};\n\nfunction ArchiveExternalEvent(props: ArchiveExternalEventProps) {\n\n  type ArchiveExternalEventValue = {}\n\n  const onSubmit = async (_: ArchiveExternalEventValue,\n    fprops: FormikHelpers<ArchiveExternalEventValue>) => {\n\n    const maybeExternalEventData = await externalEventDataNew({\n      externalEventId: props.externalEventData.externalEvent.externalEventId,\n      apiKey: props.apiKey.key,\n      name: props.externalEventData.name,\n      startTime: props.externalEventData.startTime,\n      endTime: props.externalEventData.endTime,\n      active: !props.externalEventData.active,\n    });\n\n    if (isErr(maybeExternalEventData)) {\n      switch (maybeExternalEventData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"EXTERNAL_EVENT_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This event does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while managing event.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Edited\"\n    });\n\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<ArchiveExternalEventValue>\n      onSubmit={onSubmit}\n      initialValues={{}}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <p>\n              Are you sure you want to {props.externalEventData.active ? \"archive\" : \"unarchive\"} {props.externalEventData.name}?\n            </p>\n            <Button type=\"submit\">Confirm</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\n\n\nconst loadExternalEventData = async (props: AsyncProps<ExternalEventData>) => {\n  const maybeExternalEventData = await externalEventDataView({\n    externalEventId: props.externalEventId,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  });\n\n  if (isErr(maybeExternalEventData)) {\n    throw Error(maybeExternalEventData.Err);\n  } else {\n    return maybeExternalEventData.Ok[0];\n  }\n}\n\n\nconst ManageExternalEventData = (props: {\n  externalEventId: number,\n  apiKey: ApiKey,\n}) => {\n\n  const [showEditExternalEventData, setShowEditExternalEventData] = React.useState(false);\n  const [showArchiveExternalEvent, setShowArchiveExternalEvent] = React.useState(false);\n\n\n  return <Async\n    promiseFn={loadExternalEventData}\n    apiKey={props.apiKey}\n    externalEventId={props.externalEventId}>\n    {({ reload }) => <>\n      <Async.Pending><Loader /></Async.Pending>\n      <Async.Rejected>\n        {e => <ErrorMessage error={e} />}\n      </Async.Rejected>\n      <Async.Fulfilled<ExternalEventData>>{externalEventData => <>\n        <Table hover bordered>\n          <tbody>\n            <tr>\n              <th>Status</th>\n              <td>{externalEventData.active ? \"Active\" : \"Archived\"}</td>\n            </tr>\n            <tr>\n              <th>Name</th>\n              <td>{externalEventData.name}</td>\n            </tr>\n            <tr>\n              <th>Creation Time</th>\n              <td>{format(externalEventData.externalEvent.creationTime, \"MMM do\")} </td>\n            </tr>\n          </tbody>\n        </Table>\n        <Button variant=\"secondary\" onClick={_ => setShowEditExternalEventData(true)}>Edit <EditIcon /></Button>\n\n        {externalEventData.active\n          ? <Button variant=\"danger\" onClick={_ => setShowArchiveExternalEvent(true)}>Archive <DeleteIcon /></Button>\n          : <Button variant=\"success\" onClick={_ => setShowArchiveExternalEvent(true)}>Unarchive <RestoreIcon /></Button>\n        }\n\n        <DisplayModal\n          title=\"Edit Event\"\n          show={showEditExternalEventData}\n          onClose={() => setShowEditExternalEventData(false)}\n        >\n          <EditExternalEventData\n            externalEventData={externalEventData}\n            apiKey={props.apiKey}\n            postSubmit={() => {\n              setShowEditExternalEventData(false);\n              reload();\n            }}\n          />\n        </DisplayModal>\n\n        <DisplayModal\n          title=\"Archive Event\"\n          show={showArchiveExternalEvent}\n          onClose={() => setShowArchiveExternalEvent(false)}\n        >\n          <ArchiveExternalEvent\n            externalEventData={externalEventData}\n            apiKey={props.apiKey}\n            postSubmit={() => {\n              setShowArchiveExternalEvent(false);\n              reload();\n            }}\n          />\n        </DisplayModal>\n      </>\n      }\n      </Async.Fulfilled>\n    </>}\n  </Async>\n}\n\nexport default ManageExternalEventData;\n","import { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Form } from \"react-bootstrap\";\nimport { timeUtilityFunctionNew, goalNew, GoalData , } from \"@innexgo/frontend-todo-app-api\";\nimport { TemplateData } from '../components/ManageGoalTemplate';\nimport { TagData } from '../components/ManageNamedEntity';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { isErr, unwrap, throwException, nullToUndefined } from '@innexgo/frontend-common';\nimport parseDuration from 'parse-duration';\nimport { myItemOut, myColOut } from '../utils/utils';\nimport winkNlp from 'wink-nlp';\nimport model from 'wink-eng-lite-web-model';\nimport { casual } from 'chrono-node';\n\nconst builtinPatterns = [\n  {\n    name: \"PARENT_GOAL\",\n    patterns: [\"for [HASHTAG]\",]\n  },\n  {\n    name: \"DURATION_ESTIMATE\",\n    patterns: [\"for [DURATION]\",]\n  },\n  {\n    name: \"GOAL_VALID_BEFORE_GOAL\",\n    patterns: [\"before [HASHTAG]\",]\n  },\n  {\n    name: \"GOAL_VALID_AFTER_GOAL\",\n    patterns: [\"after [HASHTAG]\",]\n  },\n  {\n    name: \"GOAL_VALID_BEFORE_TIME\",\n    patterns: [\n      \"[to|by|before] [DATE|TIME]\",\n      \"[to|by|before] [TIME] [DATE]\",\n      \"[to|by|before] [DATE] [TIME]\",\n    ]\n  },\n  {\n    name: \"GOAL_VALID_AFTER_TIME\",\n    patterns: [\n      \"[from|after] [DATE|TIME]\",\n      \"[from|after] [TIME] [DATE]\",\n      \"[from|after] [DATE] [TIME]\",\n    ]\n  },\n];\n\nconst builtinNlp = winkNlp(model);\nbuiltinNlp.learnCustomEntities(builtinPatterns);\n\n\ntype CreateHybridGoalProps = {\n  apiKey: ApiKey;\n  tags: TagData[];\n  templates: TemplateData[];\n  postSubmit: (gd: GoalData) => void;\n}\n\nfunction CreateHybridGoal(props: CreateHybridGoalProps) {\n\n  type CreateHybridGoalValue = {\n    name: string,\n  }\n\n  const onSubmit = async (values: CreateHybridGoalValue,\n    fprops: FormikHelpers<CreateHybridGoalValue>) => {\n    try {\n\n      if (values.name === \"\") {\n        throw new Error(\"Please enter an event name\");\n      }\n\n      const templateNlp = winkNlp(model);\n      templateNlp.learnCustomEntities(\n        props.templates.map((x, i) => ({\n          name: (i + 1).toString(), // we add 1 to work around a bug in winkjs, `0` is not a valid name\n          patterns: x.gtp.map(x => x.pattern)\n        }))\n      );\n\n      templateNlp.readDoc(values.name).customEntities().each(x => console.log(x.out()));\n      builtinNlp.readDoc(values.name).customEntities().each(x => console.log(x.out()));\n\n      // get the first template\n      const maybeTemplateItem = templateNlp.readDoc(values.name).customEntities().itemAt(0);\n      const template = maybeTemplateItem === undefined\n        ? undefined\n        : props.templates[parseInt(myItemOut(maybeTemplateItem, templateNlp.its.detail).type, 10) - 1].gtd;\n\n      // get the data specified in the class\n      let ds = myColOut(builtinNlp.readDoc(values.name).customEntities(), builtinNlp.its.detail, builtinNlp.as.array)\n\n      let rawAfterGoal = ds\n        .filter(d => d.type === \"GOAL_VALID_AFTER_GOAL\")\n        .map(d => d.value.split(\"#\")[1])[0] // extract everything right of hashtag\n\n      let rawBeforeGoal = ds\n        .filter(d => d.type === \"GOAL_VALID_BEFORE_GOAL\")\n        .map(d => d.value.split(\"#\")[1])[0] // extract everything right of hashtag\n\n      let rawParentGoal = ds\n        .filter(d => d.type === \"PARENT_GOAL\")\n        .map((d, i) => i === 0\n          ? d.value.split(\"#\")[1] // extract everything right of hashtag\n          : throwException(Error(\"Duplicate parent goal.\"))\n        )[0]\n\n      let rawAfterTime = ds\n        .filter(d => d.type === \"GOAL_VALID_AFTER_TIME\")\n        .map((d, i) => i === 0\n          ? d.value.slice(d.value.indexOf(\" \") + 1) //  extract everything right of the first space\n          : throwException(Error(\"Duplicate goal beginline.\"))\n        )[0]\n\n      let rawBeforeTime = ds\n        .filter(d => d.type === \"GOAL_VALID_BEFORE_TIME\")\n        .map((d, i) => i === 0\n          ? d.value.slice(d.value.indexOf(\" \") + 1) //  extract everything right of the first space\n          : throwException(Error(\"Duplicate goal deadline.\"))\n        )[0]\n\n      let rawDurationEstimate = ds\n        .filter(d => d.type === \"DURATION_ESTIMATE\")\n        .map((d, i) => i === 0\n          ? d.value.slice(d.value.indexOf(\" \") + 1) //  extract everything right of the first space\n          : throwException(Error(\"Duplicate duration estimate.\"))\n        )[0]\n\n      // duration estimate:\n      // null means abstract\n      let durationEstimate =\n        template?.durationEstimate === undefined\n          ? 1000 * 60 * 60\n          : template.durationEstimate\n        ;\n\n      if (rawDurationEstimate !== undefined) {\n        // prevent null template\n        if (template?.durationEstimate === null) {\n          throw Error(`The goal template \"${template.name}\" is abstract and can't be assigned a duration.`);\n        }\n\n        const d = parseDuration(rawDurationEstimate);\n\n        if (d === null) {\n          throw Error(`Couldn't parse duration string \"${rawDurationEstimate}\"`);\n        }\n\n        durationEstimate = d;\n      }\n\n      // time utility function\n\n      let minTime: number | null = null;\n      let maxTime: number | null = null;\n\n      if (rawAfterTime !== undefined) {\n        const d = casual.parseDate(rawAfterTime, new Date(), { forwardDate: true });\n\n        if (d === null) {\n          throw Error(`Couldn't parse date string \"${rawAfterTime}\"`);\n        }\n        // this is the min time the goal may be scheduled\n        minTime = d.valueOf();\n      }\n\n\n      if (rawBeforeTime !== undefined) {\n        const d = casual.parseDate(rawBeforeTime, new Date(), { forwardDate: true });\n\n        if (d === null) {\n          throw Error(`Couldn't parse date string \"${rawBeforeTime}\"`);\n        }\n        // this is the max time the goal may be scheduled\n        maxTime = d.valueOf();\n      }\n\n\n      // now construct time utility function\n      const startTimes: number[] = [];\n      const utils: number[] = [];\n\n      if (minTime === null && maxTime === null) {\n        // start one time\n        startTimes.push(Date.now());\n        utils.push(100);\n      } else {\n        if (minTime !== null) {\n          // push zero for starttime\n          startTimes.push(minTime - 1);\n          utils.push(0);\n          // push 100 for endtime\n          startTimes.push(minTime);\n          utils.push(100);\n        }\n        if (maxTime !== null) {\n          // push 100 for before deadline\n          startTimes.push(maxTime);\n          utils.push(100);\n          // push zero for deadline\n          startTimes.push(maxTime + 1);\n          utils.push(0);\n        }\n      }\n\n      const tuf = await timeUtilityFunctionNew({\n        startTimes,\n        utils,\n        apiKey: props.apiKey.key\n      }).then(unwrap);\n\n      let maybeGoalData = await goalNew({\n        name: values.name,\n        durationEstimate: nullToUndefined(durationEstimate),\n        timeUtilityFunctionId: tuf.timeUtilityFunctionId,\n        apiKey: props.apiKey.key\n      });\n\n      if (isErr(maybeGoalData)) {\n        switch (maybeGoalData.Err) {\n          case \"UNAUTHORIZED\": {\n            fprops.setStatus({\n              failureResult: \"You have been automatically logged out. Please relogin.\",\n              successResult: \"\"\n            });\n            break;\n          }\n          default: {\n            fprops.setStatus({\n              failureResult: \"An unknown or network error has occured while trying to create goal.\",\n              successResult: \"\"\n            });\n            break;\n          }\n        }\n        return;\n      }\n\n      // clear input\n      fprops.setFieldValue(\"name\", \"\");\n      // execute callback\n      props.postSubmit(maybeGoalData.Ok);\n    } catch (e: any) {\n      let errors: FormikErrors<CreateHybridGoalValue> = {};\n      errors.name = (e as Error).message;\n      fprops.setErrors(errors);\n    }\n  }\n\n\n  return <>\n    <Formik<CreateHybridGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: \"\",\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <Form.Control\n            name=\"name\"\n            type=\"text\"\n            placeholder=\"Goal Name\"\n            as=\"input\"\n            value={fprops.values.name}\n            onChange={e => fprops.setFieldValue('name', e.target.value)}\n            isInvalid={!!fprops.errors.name}\n          />\n          <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n          <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nexport default CreateHybridGoal;\n","import React from 'react';\nimport { Action } from '@innexgo/common-react-components';\nimport update from 'immutability-helper';\nimport { Col, Row, Card, Form, Button } from 'react-bootstrap';\nimport DisplayModal from '../components/DisplayModal';\nimport UtilityPicker from '../components/UtilityPicker';\nimport { GoalData, GoalEvent, timeUtilityFunctionNew, goalDataNew } from '@innexgo/frontend-todo-app-api';\nimport { isErr } from '@innexgo/frontend-common';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { Pencil as Edit, X as Cancel, } from 'react-bootstrap-icons';\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport parseDuration from 'parse-duration';\nimport formatDuration from 'date-fns/formatDuration';\nimport intervalToDuration from 'date-fns/intervalToDuration';\nimport format from 'date-fns/format';\n\nexport type ManageGoalData = { gd: GoalData, ge: GoalEvent | undefined };\n\ntype EditGoalProps = {\n  goalData: GoalData,\n  apiKey: ApiKey,\n  setGoalData: (gd: GoalData) => void,\n};\n\nfunction EditGoal(props: EditGoalProps) {\n\n  type EditGoalValue = {\n    name: string,\n    durationEstimate: string,\n    points: { x: number, y: number }[]\n  }\n\n  const onSubmit = async (values: EditGoalValue,\n    fprops: FormikHelpers<EditGoalValue>) => {\n\n    let hasError = false;\n    let errors: FormikErrors<EditGoalValue> = {};\n\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    const durationEstimate = parseDuration(values.durationEstimate);\n\n    if (durationEstimate === null || durationEstimate < 1) {\n      errors.durationEstimate = \"Invalid duration estimate\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    // TODO: check if utility function has been changed before creating a new one\n    // this will be more efficient\n    const maybeTimeUtilFunction = await timeUtilityFunctionNew({\n      startTimes: values.points.map(p => p.x),\n      utils: values.points.map(p => p.y),\n      apiKey: props.apiKey.key,\n    })\n\n    if (isErr(maybeTimeUtilFunction)) {\n      switch (maybeTimeUtilFunction.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"TIME_UTILITY_FUNCTION_NOT_VALID\": {\n          fprops.setErrors({\n            points: \"Utility function is invalid.\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create utility function.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    const maybeGoalData = await goalDataNew({\n      goalId: props.goalData.goal.goalId,\n      name: values.name,\n      durationEstimate: durationEstimate!,\n      timeUtilityFunctionId: maybeTimeUtilFunction.Ok.timeUtilityFunctionId,\n      status: props.goalData.status,\n      apiKey: props.apiKey.key,\n    })\n\n    // TODO also modify time\n\n    if (isErr(maybeGoalData)) {\n      switch (maybeGoalData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"GOAL_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This goal does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while modifying goal data.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Goal Successfully Modified\"\n    });\n\n    // execute callback\n    props.setGoalData(maybeGoalData.Ok);\n  }\n\n  return <>\n    <Formik<EditGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: props.goalData.name,\n        durationEstimate: props.goalData.durationEstimate === null\n          ? \"\"\n          : formatDuration(\n            intervalToDuration({\n              start: 0,\n              end: props.goalData.durationEstimate\n            })\n          ),\n        points: props.goalData.timeUtilityFunction.startTimes.map((t, i) => ({ x: t, y: props.goalData.timeUtilityFunction.utils[i] }))\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Row>\n              <Form.Group as={Col}>\n                <Form.Label>Name</Form.Label>\n                <Form.Control\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"Goal Name\"\n                  as=\"input\"\n                  value={fprops.values.name}\n                  onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                  isInvalid={!!fprops.errors.name}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n              </Form.Group>\n              <Form.Group as={Col}>\n                <Form.Label>Estimated Duration</Form.Label>\n                <Form.Control\n                  name=\"durationEstimate\"\n                  type=\"text\"\n                  placeholder=\"Estimated Duration\"\n                  as=\"input\"\n                  value={fprops.values.durationEstimate}\n                  onChange={e => fprops.setFieldValue(\"durationEstimate\", e.target.value)}\n                  isInvalid={!!fprops.errors.durationEstimate}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.durationEstimate}</Form.Control.Feedback>\n              </Form.Group>\n            </Row>\n            <Form.Group>\n              <Card>\n                <Card.Body>\n                  <UtilityPicker\n                    span={[\n                      Math.min(...fprops.values.points.map(p => p.x)) - 100000,\n                      Math.max(...fprops.values.points.map(p => p.x)) + 100000\n                    ]}\n                    points={fprops.values.points}\n                    setPoints={p => fprops.setFieldValue(\"points\", p)}\n                    mutable\n                  />\n                </Card.Body>\n              </Card>\n              <Form.Text className=\"text-danger\">{fprops.errors.points}</Form.Text>\n            </Form.Group>\n            <Button type=\"submit\">Submit</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\ntype CancelGoalProps = {\n  goalData: GoalData,\n  setGoalData: (gd: GoalData) => void\n  apiKey: ApiKey,\n};\n\nfunction CancelGoal(props: CancelGoalProps) {\n\n  type CancelGoalValue = {}\n\n  const onSubmit = async (_: CancelGoalValue,\n    fprops: FormikHelpers<CancelGoalValue>) => {\n\n    const maybeGoalData = await goalDataNew({\n      goalId: props.goalData.goal.goalId,\n      apiKey: props.apiKey.key,\n      name: props.goalData.name,\n      durationEstimate: props.goalData.durationEstimate === null ? undefined : props.goalData.durationEstimate,\n      timeUtilityFunctionId: props.goalData.timeUtilityFunction.timeUtilityFunctionId,\n      status: \"CANCEL\",\n    });\n\n    if (isErr(maybeGoalData)) {\n      switch (maybeGoalData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"GOAL_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This goal does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while managing goal.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Edited\"\n    });\n\n    // execute callback\n    props.setGoalData(maybeGoalData.Ok);\n  }\n\n  return <>\n    <Formik<CancelGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{}}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <p>\n              Are you sure you want to cancel goal for {props.goalData.name}?\n            </p>\n            <Button type=\"submit\">Confirm</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nconst ManageGoal = (props: {\n  data: ManageGoalData,\n  setData: (d: ManageGoalData) => void,\n  mutable: boolean,\n  apiKey: ApiKey,\n}) => {\n\n  const [showEditGoal, setShowEditGoal] = React.useState(false);\n  const [showCancelGoal, setShowCancelGoal] = React.useState(false);\n\n  return <tr>\n    <td>\n      {props.data.gd.name}\n      <br />\n      <small>{props.data.gd.status}</small>\n    </td>\n    <td>\n      {props.data.ge !== undefined\n        ? format(props.data.ge.startTime, \"p EEE, MMM do\")\n        : \"NOT SCHEDULED\"\n      }\n      <br />\n      {props.data.gd.durationEstimate === null\n        ? false\n        : <small>Estimate: {\n          formatDuration(intervalToDuration({\n            start: 0,\n            end: props.data.gd.durationEstimate\n          }))\n        }</small>\n      }\n    </td>\n    <td>\n      <div className=\"d-flex flex-wrap\">\n        <Action\n          title=\"Edit\"\n          onClick={() => setShowEditGoal(true)}\n          icon={Edit}\n          hidden={!props.mutable}\n        />\n        <Action\n          title=\"Cancel\"\n          onClick={() => setShowCancelGoal(true)}\n          hidden={props.data.gd.status == \"CANCEL\" || !props.mutable}\n          variant=\"danger\"\n          icon={Cancel}\n        />\n      </div>\n    </td>\n    <DisplayModal\n      title=\"Edit Goal\"\n      show={showEditGoal}\n      onClose={() => setShowEditGoal(false)}\n    >\n      <EditGoal\n        goalData={props.data.gd}\n        setGoalData={(gd) => {\n          setShowEditGoal(false);\n          props.setData(update(props.data, { gd: { $set: gd } }));\n        }}\n        apiKey={props.apiKey}\n      />\n    </DisplayModal>\n    <DisplayModal\n      title=\"Cancel Goal\"\n      show={showCancelGoal}\n      onClose={() => setShowCancelGoal(false)}\n    >\n      <CancelGoal\n        goalData={props.data.gd}\n        apiKey={props.apiKey}\n        setGoalData={(gd) => {\n          setShowCancelGoal(false);\n          props.setData(update(props.data, { gd: { $set: gd } }));\n        }}\n      />\n    </DisplayModal>\n  </tr>\n}\n\nexport default ManageGoal;\n","import { Table } from 'react-bootstrap';\nimport update from 'immutability-helper';\nimport CreateGoalTextbox from '../components/CreateGoalTextbox';\nimport { TemplateData } from '../components/ManageGoalTemplate';\nimport { TagData } from '../components/ManageNamedEntity';\nimport ManageGoal, { ManageGoalData } from '../components/ManageGoal';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\n\n\ntype ManageGoalTableProps = {\n  data: ManageGoalData[],\n  setData: (d: ManageGoalData[]) => void,\n  tags: TagData[],\n  templates: TemplateData[],\n  apiKey: ApiKey,\n  mutable: boolean,\n  addable: boolean,\n  showInactive: boolean,\n}\n\nfunction ManageGoalTable(props: ManageGoalTableProps) {\n\n  const activeGoalDataEvents = props.data\n    // enumerate data + index\n    .map((d, i) => ({ d, i }))\n    // filter inactive\n    .filter(({ d }) => props.showInactive || d.gd.status !== \"CANCEL\")\n\n  return <>\n    {!props.addable ? false :\n      <CreateGoalTextbox\n        apiKey={props.apiKey}\n        tags={props.tags}\n        templates={props.templates}\n        postSubmit={(gd) => {\n          props.setData(update(props.data, { $push: [{ gd, ge: undefined }] }));\n        }}\n      />\n    }\n    <Table hover bordered className=\"mt-2\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Time</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        {activeGoalDataEvents.length === 0\n          ? <tr><td className=\"text-center\" colSpan={4}>No Goals Yet</td></tr>\n          : <> </>\n        }\n        {activeGoalDataEvents\n          // reverse in order to see newest first\n          .reverse()\n          .map(({ d, i }) =>\n            <ManageGoal\n              key={i}\n              mutable={props.mutable}\n              data={d}\n              setData={\n                // https://stackoverflow.com/questions/29537299/react-how-to-update-state-item1-in-state-using-setstate\n                (d) => props.setData(update(props.data, { [i]: { $set: d } }))\n              }\n              apiKey={props.apiKey}\n            />\n          )}\n      </tbody>\n    </Table>\n  </>\n}\n\nexport default ManageGoalTable;\n","import React from 'react'\nimport update from 'immutability-helper';\nimport { Loader } from '@innexgo/common-react-components';\nimport FullCalendar, { EventApi, DateSelectArg, EventClickArg } from '@fullcalendar/react'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction'\nimport DashboardLayout from '../components/DashboardLayout';\nimport CalendarSolver from '../components/CalendarSolver';\nimport CalendarCard, { goalDataToEvent, externalEventDataToEvent } from '../components/CalendarCard';\nimport ErrorMessage from '../components/ErrorMessage';\n\nimport { Async, AsyncProps } from 'react-async';\nimport { Card, Row, Col, Tab, Tabs, Container, } from 'react-bootstrap';\nimport { GoalEvent, ExternalEvent, goalEventNew, goalEventView, GoalData, ExternalEventData, externalEventDataNew, goalDataNew, externalEventView, externalEventDataView, goalDataView } from '@innexgo/frontend-todo-app-api';\nimport { ApiKey, } from '@innexgo/frontend-auth-api';\nimport { AuthenticatedComponentProps } from '@innexgo/auth-react-components';\nimport { TemplateData } from '../components/ManageGoalTemplate';\nimport { TagData } from '../components/ManageNamedEntity';\n\nimport { unwrap, isErr } from '@innexgo/frontend-common';\n\nimport {WidgetWrapper} from '@innexgo/common-react-components';\n\nimport CreateExternalEvent from '../components/CreateExternalEvent';\nimport CreateGoal from '../components/CreateGoal';\nimport ManageExternalEvent from '../components/ManageExternalEvent';\nimport { ManageGoalData } from '../components/ManageGoal';\nimport ManageGoalTable from '../components/ManageGoalTable';\nimport DisplayModal from '../components/DisplayModal';\nimport { namedEntityDataView, namedEntityPatternView, goalTemplateDataView, goalTemplatePatternView, } from '@innexgo/frontend-todo-app-api';\n\n\ntype UnscheduledGoalCardProps = {\n  setGoalData: (gd: GoalData) => void;\n  goalData: GoalData;\n}\n\nfunction UnscheduledGoalCard(props: UnscheduledGoalCardProps) {\n  let elRef = React.useRef<HTMLDivElement>(null);\n\n  const event = {\n    id: `GoalData:${props.goalData.goal.goalId}`,\n    duration: props.goalData.durationEstimate,\n    color: \"#00000000\",\n    borderColor: \"#00000000\",\n    goalData: props.goalData\n  };\n\n  React.useEffect(() => {\n    let draggable = new Draggable(elRef.current!, {\n      eventData: event\n    });\n\n    // a cleanup function\n    return () => draggable.destroy();\n  });\n\n  return (\n    <Card\n      ref={elRef}\n      className=\"px-1 py-1 mb-3 bg-primary text-light overflow-hidden\"\n      data-custom={JSON.stringify({ goalData: props.goalData })}\n      title={props.goalData.name}\n      style={{\n        cursor: \"pointer\"\n      }}\n    >\n      <div className=\"fc-event-main\">\n        <div>\n          {props.goalData.name}\n        </div>\n      </div>\n    </Card>\n  );\n}\n\n\nconst loadUnscheduledGoalData = async (props: AsyncProps<GoalData[]>) => {\n  const goalData = await goalDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    status: [\"PENDING\"],\n    scheduled: false,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap);\n\n  return goalData;\n}\n\n\n\ntype EventCalendarProps = {\n  tags: TagData[],\n  templates: TemplateData[],\n  apiKey: ApiKey,\n}\n\nfunction EventCalendar(props: EventCalendarProps) {\n\n  // whether we're currently in optimize mode or not\n  const [optimizing, setOptimizing] = React.useState(false);\n\n  // Closing it should also unselect anything using it\n  const [selectedSpan, setSelectedSpanRaw] = React.useState<[number, number] | null>(null);\n  const setSelectedSpan = (a: [number, number] | null) => {\n    setSelectedSpanRaw(a)\n    if (!a && calendarRef.current != null) {\n      calendarRef.current.getApi().unselect();\n    }\n  }\n\n  // the currently selected data\n  const [selectedManageGoalData, setSelectedManageGoalData] = React.useState<ManageGoalData | null>(null);\n  const [selectedManageExternalEventData, setSelectedManageExternalEventData] = React.useState<ExternalEventData | null>(null);\n\n  const calendarRef = React.useRef<FullCalendar | null>(null);\n\n  const eventSource = async (\n    args: {\n      start: Date;\n      end: Date;\n      startStr: string;\n      endStr: string;\n      timeZone: string;\n    }) => {\n\n    const externalEventData = await externalEventDataView({\n      creatorUserId: [props.apiKey.creatorUserId],\n      minStartTime: args.start.valueOf(),\n      maxStartTime: args.end.valueOf(),\n      active: true,\n      onlyRecent: true,\n      apiKey: props.apiKey.key\n    })\n      .then(unwrap);\n\n    // TODO fetch goalEvent and unite\n    const goalEvents = await goalEventView({\n      creatorUserId: [props.apiKey.creatorUserId],\n      minStartTime: args.start.valueOf(),\n      maxStartTime: args.end.valueOf(),\n      onlyRecent: true,\n      apiKey: props.apiKey.key\n    })\n      .then(unwrap);\n\n    const goalData = await goalDataView({\n      goalId: goalEvents.map(x => x.goal.goalId),\n      status: [\"PENDING\"],\n      onlyRecent: true,\n      apiKey: props.apiKey.key\n    })\n      .then(unwrap);\n\n\n    return [\n      ...externalEventData.map(externalEventDataToEvent),\n      ...goalData\n        // join goalevents\n        .map(gd => ({ gd, ge: goalEvents.find(ge => ge.goal.goalId === gd.goal.goalId)! }))\n        // convert to event\n        .map(({ gd, ge }) => goalDataToEvent(gd, ge))\n    ];\n  }\n\n  //this handler runs any time we recieve a click on an event\n  const clickHandler = (eca: EventClickArg) => {\n    const props = eca.event.extendedProps;\n    // we switch on what type it is\n    switch (eca.event.id.split(':')[0]) {\n      case \"ExternalEventData\": {\n        setSelectedManageExternalEventData(props.externalEventData);\n        break;\n      }\n      case \"GoalData\": {\n        setSelectedManageGoalData({ gd: props.goalData, ge: props.goalEvent });\n        break;\n      }\n    }\n  }\n\n  const changeHandler = async (event: EventApi, oldEventProps: Record<string, any>, revert: () => void) => {\n    switch (event.id.split(':')[0]) {\n      case \"ExternalEventData\": {\n        const oped:ExternalEventData = oldEventProps.externalEventData;\n        const maybeExternalEventData = await externalEventDataNew({\n          externalEventId: oped.externalEvent.externalEventId,\n          name: oped.name,\n          startTime: event.start!.valueOf(),\n          endTime: event.end!.valueOf(),\n          active: oped.active,\n          apiKey: props.apiKey.key,\n        });\n        if (isErr(maybeExternalEventData)) {\n          revert();\n        } else {\n          event.setExtendedProp(\"externalEventData\", maybeExternalEventData.Ok);\n        }\n        break;\n      }\n      case \"GoalData\": {\n        const ode:GoalData = oldEventProps.goalData;\n        const maybeGoalEvent = await goalEventNew({\n          goalId: ode.goal.goalId,\n          startTime: event.start!.valueOf(),\n          endTime: event.end!.valueOf(),\n          active: true,\n          apiKey: props.apiKey.key,\n        });\n        if (isErr(maybeGoalEvent)) {\n          revert();\n        } else {\n          event.setExtendedProp(\"goalEvent\", maybeGoalEvent.Ok);\n        }\n        break;\n      }\n      default: {\n        revert();\n        break;\n      }\n    }\n  }\n\n  if (optimizing) {\n    return <CalendarSolver\n      apiKey={props.apiKey}\n      onHide={() => setOptimizing(false)}\n    />\n  }\n\n  return <Row>\n    <Col lg={2}>\n      <Async\n        promiseFn={loadUnscheduledGoalData}\n        apiKey={props.apiKey} >\n        {({ setData }) => <>\n          <Async.Pending><Loader /></Async.Pending>\n          <Async.Rejected>\n            {e => <ErrorMessage error={e} />}\n          </Async.Rejected>\n          <Async.Fulfilled<GoalData[]>>{gdus =>\n            gdus.map((gdu, i) =>\n              <UnscheduledGoalCard\n                key={i}\n                goalData={gdu}\n                setGoalData={d => setData(update(gdus, { [i]: { $set: d } }))}\n              />\n            )\n          }\n          </Async.Fulfilled>\n        </>}\n      </Async>\n    </Col>\n    <Col xl={10}>\n      <FullCalendar\n        ref={calendarRef}\n        plugins={[timeGridPlugin, interactionPlugin]}\n        customButtons={{\n          optimize: {\n            text: 'Optimize',\n            click: () => setOptimizing(true)\n          }\n        }}\n        headerToolbar={{\n          left: 'title prev,next today',\n          center: 'optimize',\n          right: 'timeGridDay,timeGridWeek',\n        }}\n        initialView='timeGridWeek'\n        height={\"auto\"}\n        datesSet={({ view }) => /* Keeps window size in sync */ view.calendar.updateSize()}\n        allDaySlot={false}\n        slotDuration=\"00:30:00\"\n        nowIndicator={true}\n        editable={true}\n        selectable={true}\n        selectMirror={true}\n        events={eventSource}\n        eventContent={CalendarCard}\n        unselectCancel=\".modal-content\"\n        eventClick={clickHandler}\n        eventOverlap={false}\n        eventResize={(era) => changeHandler(era.event, era.oldEvent.extendedProps, era.revert)}\n        eventDrop={(eda) => changeHandler(eda.event, eda.oldEvent.extendedProps, eda.revert)}\n        eventReceive={(era) => {\n          // hide event\n          era.draggedEl.hidden = true;\n          changeHandler(\n            era.event,\n            JSON.parse(era.draggedEl.getAttribute(\"data-custom\")!),\n            era.revert\n          )\n          // delete the current event (it'll be reloaded when we fetch scheduled events)\n          era.event.remove();\n          // force reload to get the new scheduled event\n          if (calendarRef.current != null) {\n            calendarRef.current.getApi().refetchEvents();\n          }\n        }}\n        unselect={() => {\n          setSelectedSpan(null);\n        }}\n        select={(dsa: DateSelectArg) => {\n          // only open modal if this date is in the future\n          if (dsa.start.valueOf() > Date.now()) {\n            setSelectedSpan([\n              dsa.start.valueOf(),\n              dsa.end.valueOf()\n            ]);\n          } else {\n            if (calendarRef.current != null) {\n              calendarRef.current.getApi().unselect();\n            }\n          }\n        }}\n      />\n    </Col>\n\n\n    {selectedSpan === null ? <> </> :\n      <DisplayModal\n        title=\"New Event\"\n        show={selectedSpan !== null}\n        onClose={() => setSelectedSpan(null)}\n      >\n        <Tabs>\n          <Tab eventKey=\"goal\" title=\"Create Goal\" className=\"mt-3\">\n            <CreateGoal\n              apiKey={props.apiKey}\n              span={selectedSpan}\n              postSubmit={() => setSelectedSpan(null)}\n            />\n          </Tab>\n          <Tab eventKey=\"event\" title=\"Create Event\" className=\"mt-3\">\n            <CreateExternalEvent\n              apiKey={props.apiKey}\n              startTime={selectedSpan[0]}\n              endTime={selectedSpan[1]}\n              postSubmit={() => setSelectedSpan(null)}\n            />\n          </Tab>\n        </Tabs>\n      </DisplayModal>\n    }\n    {selectedManageExternalEventData === null ? <> </> :\n      <DisplayModal\n        title=\"Manage Event\"\n        show={selectedManageExternalEventData !== null}\n        onClose={() => setSelectedManageExternalEventData(null)}\n      >\n        <ManageExternalEvent externalEventId={selectedManageExternalEventData.externalEvent.externalEventId} apiKey={props.apiKey} />\n      </DisplayModal>\n    }\n    {selectedManageGoalData === null ? <> </> :\n      <DisplayModal\n        title=\"Manage Event\"\n        show={selectedManageGoalData !== null}\n        onClose={() => setSelectedManageGoalData(null)}\n      >\n        <ManageGoalTable\n          data={[selectedManageGoalData]}\n          setData={() => setSelectedManageGoalData(null)}\n          apiKey={props.apiKey}\n          tags={props.tags}\n          templates={props.templates}\n          mutable\n          addable={false}\n          showInactive={false}\n        />\n      </DisplayModal>\n    }\n  </Row>\n}\n\n\ntype CalendarData = {\n  tags: TagData[],\n  templates: TemplateData[],\n}\n\nconst loadCalendarData = async (props: AsyncProps<CalendarData>) => {\n  const goalTemplateData = await goalTemplateDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n  const namedEntityData = await namedEntityDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n  const namedEntityPatterns = await namedEntityPatternView({\n    namedEntityId: namedEntityData.map(gtd => gtd.namedEntity.namedEntityId),\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  // group patterns by tag\n  const tags = namedEntityData.map(ned => ({\n    ned,\n    nep: namedEntityPatterns.filter(nep => nep.namedEntity.namedEntityId === ned.namedEntity.namedEntityId)\n  }));\n\n  const goalTemplatePatterns = await goalTemplatePatternView({\n    goalTemplateId: goalTemplateData.map(gtd => gtd.goalTemplate.goalTemplateId),\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  // group patterns by template\n  const templates = goalTemplateData.map(gtd => ({\n    gtd,\n    gtp: goalTemplatePatterns.filter(gtp => gtp.goalTemplate.goalTemplateId === gtd.goalTemplate.goalTemplateId)\n  }));\n\n  return {\n    tags,\n    templates,\n  }\n}\n\nfunction CalendarWidget(props: AuthenticatedComponentProps) {\n  return <WidgetWrapper title=\"Upcoming Appointments\">\n    <span>\n      This screen shows all future appointments.\n      You can click any date to add an appointment on that date,\n      or click an existing appointment to delete it.\n    </span>\n    <Async promiseFn={loadCalendarData} apiKey={props.apiKey}>\n      <Async.Pending><Loader /></Async.Pending>\n      <Async.Rejected>\n        {e => <ErrorMessage error={e} />}\n      </Async.Rejected>\n      <Async.Fulfilled<CalendarData>>{cd =>\n        <EventCalendar apiKey={props.apiKey} tags={cd.tags} templates={cd.templates} />\n      }</Async.Fulfilled>\n    </Async>\n  </WidgetWrapper>\n};\n\nfunction Calendar(props: AuthenticatedComponentProps) {\n  return <DashboardLayout {...props} >\n    <Container fluid className=\"py-3 px-3\">\n      <CalendarWidget {...props} />\n    </Container>\n  </DashboardLayout>\n}\n\nexport default Calendar;\n","import { Row, Container, Col } from 'react-bootstrap';\nimport { Async, AsyncProps } from 'react-async';\nimport update from 'immutability-helper';\nimport { Loader, Section } from '@innexgo/common-react-components';\nimport ErrorMessage from '../components/ErrorMessage';\nimport DashboardLayout from '../components/DashboardLayout';\nimport { TemplateData } from '../components/ManageGoalTemplate';\nimport { TagData } from '../components/ManageNamedEntity';\nimport ManageGoalTable from '../components/ManageGoalTable';\nimport { ManageGoalData } from '../components/ManageGoal';\nimport { goalDataView, goalEventView, namedEntityDataView, namedEntityPatternView, goalTemplateDataView, goalTemplatePatternView, } from '@innexgo/frontend-todo-app-api';\nimport { unwrap } from '@innexgo/frontend-common';\n\nimport {AuthenticatedComponentProps} from '@innexgo/auth-react-components';\n\ntype DashboardData = {\n  data: ManageGoalData[],\n  tags: TagData[],\n  templates: TemplateData[],\n}\n\nconst loadDashboardData = async (props: AsyncProps<DashboardData>) => {\n\n  const goalData =\n    await goalDataView({\n      creatorUserId: [props.apiKey.creatorUserId],\n      status: [\"PENDING\"],\n      onlyRecent: true,\n      apiKey: props.apiKey.key,\n    })\n      .then(unwrap);\n\n  const goalEvents = await goalEventView({\n    goalId: goalData.map(gd => gd.goal.goalId),\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n\n  // join goal data to goal events\n  const data = goalData.map(gd => ({\n    gd,\n    ge: goalEvents.find(ge => ge.goal.goalId === gd.goal.goalId)\n  }));\n\n  const goalTemplateData = await goalTemplateDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n  const namedEntityData = await namedEntityDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n  const namedEntityPatterns = await namedEntityPatternView({\n    namedEntityId: namedEntityData.map(gtd => gtd.namedEntity.namedEntityId),\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  // group patterns by tag\n  const tags = namedEntityData.map(ned => ({\n    ned,\n    nep: namedEntityPatterns.filter(nep => nep.namedEntity.namedEntityId === ned.namedEntity.namedEntityId)\n  }));\n\n  const goalTemplatePatterns = await goalTemplatePatternView({\n    goalTemplateId: goalTemplateData.map(gtd => gtd.goalTemplate.goalTemplateId),\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  // group patterns by template\n  const templates = goalTemplateData.map(gtd => ({\n    gtd,\n    gtp: goalTemplatePatterns.filter(gtp => gtp.goalTemplate.goalTemplateId === gtd.goalTemplate.goalTemplateId)\n  }));\n\n  return {\n    data,\n    tags,\n    templates,\n  }\n}\n\nfunction Dashboard(props: AuthenticatedComponentProps) {\n  return <DashboardLayout {...props}>\n    <Container fluid className=\"py-4 px-4\">\n      <Row className=\"justify-content-md-center\">\n        <Col md={8}>\n          <Section id=\"goalIntents\" name=\"My Goals\">\n            <Async promiseFn={loadDashboardData} apiKey={props.apiKey}>\n              {({ setData }) => <>\n                <Async.Pending><Loader /></Async.Pending>\n                <Async.Rejected>\n                  {e => <ErrorMessage error={e} />}\n                </Async.Rejected>\n                <Async.Fulfilled<DashboardData>>{dd =>\n                  <ManageGoalTable\n                    data={dd.data}\n                    setData={(d) => setData(update(dd, { data: { $set: d } }))}\n                    tags={dd.tags}\n                    templates={dd.templates}\n                    apiKey={props.apiKey}\n                    mutable\n                    addable\n                    showInactive={false}\n                  />\n                }</Async.Fulfilled>\n              </>}\n            </Async>\n          </Section>\n        </Col>\n      </Row>\n    </Container>\n  </DashboardLayout>\n}\n\nexport default Dashboard;\n","import React from 'react';\nimport { Badge, CloseButton } from 'react-bootstrap';\n\n/**Type of Input-Props */\nexport type ChipInputProps = {\n  placeholder: string,\n  /**Emits index */\n  onRemove: (index: number) => void;\n  /**Array of chips */\n  chips: string[];\n  /**Emits value */\n  onSubmit: (value: string) => void;\n};\n\n// TODO\n// we need to give the outer border a focus state\n// we need to figure out a better scroll for the thing\n\nexport default class ReactChipInput extends React.Component<ChipInputProps> {\n  /**Ref object for input */\n  formControlRef: any;\n\n  /**Ref object for outer */\n  divRef: any;\n\n\n  constructor(props: Readonly<ChipInputProps>) {\n    super(props);\n    this.formControlRef = React.createRef();\n  }\n\n  /**This is needed, as chips array will get changed frequently. */\n  componentDidUpdate(prevProps: Readonly<ChipInputProps>) {\n    if (prevProps.chips.length !== this.props.chips.length) {\n      this.formControlRef.current.value = '';\n    }\n  }\n  render() {\n    return (\n      /**The main container div, funnels focus down to the inner input */\n      <div\n        ref={this.divRef}\n        tabIndex={-1}\n        className=\"form-control d-flex flex-wrap\"\n        style={{ height: \"auto\" }}\n        onFocus={() => this.formControlRef.current.focus()}\n        onBlur={() => this.formControlRef.current.blur()}\n      >\n        {/* Each chip is bootstrap's col */}\n        {this.props.chips.map((chip, index) => (\n          <Badge key={index} bg=\"secondary\" className=\"mx-1 mb-1\">\n            <span className=\"align-middle\">{chip}</span>\n            <CloseButton variant=\"white\" className=\"ms-1 align-middle\" onClick={() => this.props.onRemove(index)} />\n          </Badge>\n        ))}\n        {/* The input, from which value is read and chip is added accordingly */}\n        <input\n          className=\"flex-grow-1\"\n          ref={this.formControlRef}\n          name=\"chipInput\"\n          placeholder={this.props.placeholder}\n          aria-label=\"Chip Input\"\n          autoComplete=\"off\"\n          style={{\n            outline: \"none\",\n            border: \"none\",\n          }}\n          onKeyDown={(e: any) => {\n            if (e.keyCode === 13) {\n              e.preventDefault();\n              this.props.onSubmit(this.formControlRef.current.value);\n            }\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Form, Button } from \"react-bootstrap\";\nimport { goalTemplateNew, goalTemplatePatternNew, userGeneratedCodeNew } from \"@innexgo/frontend-todo-app-api\";\nimport { TemplateData } from '../components/ManageGoalTemplate';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { isErr, unwrap } from '@innexgo/frontend-common';\n\nimport update from 'immutability-helper';\nimport ChipInput from '../components/ChipInput';\nimport parseDuration from 'parse-duration';\n\ntype CreateGoalTemplateProps = {\n  apiKey: ApiKey;\n  postSubmit: (data: TemplateData) => void;\n}\n\nfunction CreateGoalTemplate(props: CreateGoalTemplateProps) {\n  type CreateGoalTemplateValue = {\n    name: string,\n    utility: string,\n    abstract: boolean,\n    durationEstimate: string,\n    patterns: string[]\n  }\n\n  const onSubmit = async (values: CreateGoalTemplateValue,\n    fprops: FormikHelpers<CreateGoalTemplateValue>) => {\n\n    let errors: FormikErrors<CreateGoalTemplateValue> = {};\n\n    // Validate input\n\n    let hasError = false;\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    if (parseInt(values.utility) === NaN) {\n      errors.name = \"Couldn't parse Utility\";\n      hasError = true;\n    }\n    let durationEstimate: number | undefined;\n\n    if (values.abstract) {\n      durationEstimate = undefined;\n    } else {\n      const ret = parseDuration(values.durationEstimate);\n      if (ret === null) {\n        errors.durationEstimate = \"Couldn't parse duration\";\n        hasError = true;\n      } else {\n        durationEstimate = ret;\n      }\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    let userGeneratedCode = await userGeneratedCodeNew({\n      sourceLang: \"test\",\n      sourceCode: \"test\",\n      wasmCache: [],\n      apiKey: props.apiKey.key\n    })\n      .then(unwrap);\n\n    let maybeGoalTemplateData = await goalTemplateNew({\n      name: values.name,\n      utility: parseInt(values.utility),\n      durationEstimate,\n      userGeneratedCodeId: userGeneratedCode.userGeneratedCodeId,\n      apiKey: props.apiKey.key,\n    })\n\n    if (isErr(maybeGoalTemplateData)) {\n      switch (maybeGoalTemplateData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create goalTemplate.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    let goalTemplateData = maybeGoalTemplateData.Ok;\n\n    let gtp = [];\n\n    for (const pattern of values.patterns) {\n      const goalTemplatePattern = await goalTemplatePatternNew({\n        goalTemplateId: goalTemplateData.goalTemplate.goalTemplateId,\n        pattern,\n        active: true,\n        apiKey: props.apiKey.key\n      }).then(unwrap);\n\n      gtp.push(goalTemplatePattern);\n    }\n\n    // clear input\n    fprops.setFieldValue('name', '');\n    // execute callback\n    props.postSubmit({ gtd: goalTemplateData, gtp });\n  }\n\n\n  return <>\n    <Formik<CreateGoalTemplateValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: \"\",\n        utility: \"30\",\n        abstract: false,\n        durationEstimate: \"30 minutes\",\n        patterns: [],\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <Form.Group className=\"mb-3\">\n            <Form.Label>Template Name</Form.Label>\n            <Form.Control\n              name=\"name\"\n              type=\"text\"\n              placeholder=\"Template Name\"\n              value={fprops.values.name}\n              onChange={e => fprops.setFieldValue('name', e.target.value)}\n              isInvalid={!!fprops.errors.name}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <Form.Label>Goal Utility</Form.Label>\n            <Form.Control\n              name=\"utility\"\n              type=\"number\"\n              placeholder=\"Goal Utility\"\n              value={fprops.values.utility}\n              onChange={e => fprops.setFieldValue('utility', e.target.value)}\n              isInvalid={!!fprops.errors.utility}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.utility}</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <Form.Check>\n              <Form.Check.Input\n                type=\"radio\"\n                name=\"abstract\"\n                checked={fprops.values.abstract}\n                isInvalid={!!fprops.errors.abstract}\n                onClick={() => {\n                  fprops.setFieldValue('abstract', true);\n                }}\n              />\n              <Form.Check.Label>Abstract Goal</Form.Check.Label>\n            </Form.Check>\n            <Form.Check>\n              <Form.Check.Input\n                type=\"radio\"\n                name=\"abstract\"\n                isInvalid={!!fprops.errors.abstract}\n                checked={!fprops.values.abstract}\n                onClick={() => {\n                  fprops.setFieldValue('abstract', false);\n                }}\n              />\n              <Form.Check.Label>Schedulable Goal</Form.Check.Label>\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.abstract}</Form.Control.Feedback>\n            </Form.Check>\n          </Form.Group>\n          <Form.Group hidden={fprops.values.abstract} className=\"mb-3\">\n            <Form.Label>Duration Estimate</Form.Label>\n            <Form.Control\n              name=\"durationEstimate\"\n              type=\"text\"\n              placeholder=\"Duration Estimate\"\n              value={fprops.values.durationEstimate}\n              onChange={fprops.handleChange}\n              isInvalid={!!fprops.errors.durationEstimate}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.durationEstimate}</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <ChipInput\n              placeholder=\"Goal Patterns\"\n              chips={fprops.values.patterns}\n              onSubmit={(value: string) => {\n                fprops.setFieldValue('patterns', update(fprops.values.patterns, { $push: [value] }));\n              }}\n              onRemove={(index: number) => fprops.setFieldValue('patterns', fprops.values.patterns.filter((_, i) => i != index))}\n            />\n          </Form.Group>\n          <Button type=\"submit\">Submit</Button>\n          <br/>\n          <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nexport default CreateGoalTemplate;\n","import React from 'react';\nimport update from 'immutability-helper';\nimport { Action } from '@innexgo/common-react-components';\nimport { Col, Row, Badge, Form, Button } from 'react-bootstrap';\nimport DisplayModal from '../components/DisplayModal';\nimport { GoalTemplateData, GoalTemplatePattern, goalTemplateDataNew, goalTemplatePatternNew } from '@innexgo/frontend-todo-app-api';\nimport { isErr, unwrap } from '@innexgo/frontend-common';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { Pencil as Edit, X as Cancel, } from 'react-bootstrap-icons';\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport parseDuration from 'parse-duration';\nimport formatDuration from 'date-fns/formatDuration';\nimport intervalToDuration from 'date-fns/intervalToDuration';\nimport ChipInput from '../components/ChipInput';\n\nexport type TemplateData = {\n  gtd: GoalTemplateData,\n  gtp: GoalTemplatePattern[],\n}\n\ntype EditGoalTemplateProps = {\n  data: TemplateData,\n  setData: (td: TemplateData) => void,\n  apiKey: ApiKey,\n};\n\nfunction EditGoalTemplate(props: EditGoalTemplateProps) {\n\n  type EditGoalTemplateValue = {\n    name: string,\n    utility: number,\n    abstract: boolean,\n    durationEstimate: string,\n    patterns: string[]\n  }\n\n  const onSubmit = async (values: EditGoalTemplateValue,\n    fprops: FormikHelpers<EditGoalTemplateValue>) => {\n\n    let hasError = false;\n    let errors: FormikErrors<EditGoalTemplateValue> = {};\n\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    let durationEstimate: number | undefined;\n\n    if (values.abstract) {\n      durationEstimate = undefined;\n    } else {\n      const ret = parseDuration(values.durationEstimate);\n      if (ret === null) {\n        errors.durationEstimate = \"Couldn't parse duration\";\n        hasError = true;\n      } else {\n        durationEstimate = ret;\n      }\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const maybeGoalTemplateData = await goalTemplateDataNew({\n      goalTemplateId: props.data.gtd.goalTemplate.goalTemplateId,\n      name: values.name,\n      utility: values.utility,\n      durationEstimate,\n      userGeneratedCodeId: props.data.gtd.userGeneratedCode.userGeneratedCodeId,\n      active: props.data.gtd.active,\n      apiKey: props.apiKey.key,\n    })\n\n    if (isErr(maybeGoalTemplateData)) {\n      switch (maybeGoalTemplateData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"GOAL_TEMPLATE_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This goalTemplate does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while modifying goalTemplate data.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    let goalTemplateData = maybeGoalTemplateData.Ok;\n\n\n    // the most recent server side saved patterns\n    const currentPatterns = props.data.gtp.map(gtp => gtp.pattern);\n\n    // this will be our returned set of patterns\n    // start with all goals that were unchanged\n    let gtp = props.data.gtp.filter(x => values.patterns.includes(x.pattern));\n\n    // to add contains all the patterns that will be added\n    const toAdd = values.patterns.filter(x => !currentPatterns.includes(x));\n\n    for (const pattern of toAdd) {\n      const goalTemplatePattern = await goalTemplatePatternNew({\n        goalTemplateId: goalTemplateData.goalTemplate.goalTemplateId,\n        pattern,\n        active: true,\n        apiKey: props.apiKey.key\n      }).then(unwrap);\n      // add it to new most recent data\n      gtp.push(goalTemplatePattern);\n    }\n\n    // this is all the patterns tht will be deactivated\n    const toRemove = currentPatterns.filter(x => !values.patterns.includes(x));\n    for (const pattern of toRemove) {\n      await goalTemplatePatternNew({\n        goalTemplateId: goalTemplateData.goalTemplate.goalTemplateId,\n        pattern,\n        active: false,\n        apiKey: props.apiKey.key\n      }).then(unwrap);\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"GoalTemplate Successfully Modified\"\n    });\n\n    // execute callback\n    props.setData({ gtd: goalTemplateData, gtp });\n  }\n\n  return <>\n    <Formik<EditGoalTemplateValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: props.data.gtd.name,\n        utility: props.data.gtd.utility,\n        abstract: props.data.gtd.durationEstimate === null,\n        durationEstimate: props.data.gtd.durationEstimate === null\n          ? \"\"\n          : formatDuration(\n            intervalToDuration({\n              start: 0,\n              end: props.data.gtd.durationEstimate\n            })\n          ),\n        patterns: props.data.gtp.map(gtp => gtp.pattern),\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <Form.Group className=\"mb-3\">\n            <Form.Label>Template Name</Form.Label>\n            <Form.Control\n              name=\"name\"\n              type=\"text\"\n              placeholder=\"Template Name\"\n              value={fprops.values.name}\n              onChange={e => fprops.setFieldValue('name', e.target.value)}\n              isInvalid={!!fprops.errors.name}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <Form.Label>Goal Utility</Form.Label>\n            <Form.Control\n              name=\"utility\"\n              type=\"number\"\n              placeholder=\"Goal Utility\"\n              value={fprops.values.utility}\n              onChange={e => fprops.setFieldValue('utility', parseInt(e.target.value, 10))}\n              isInvalid={!!fprops.errors.utility}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.utility}</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <Form.Check>\n              <Form.Check.Input\n                type=\"radio\"\n                name=\"abstract\"\n                checked={fprops.values.abstract}\n                isInvalid={!!fprops.errors.abstract}\n                onClick={() => {\n                  fprops.setFieldValue('abstract', true);\n                }}\n              />\n              <Form.Check.Label>Abstract Goal</Form.Check.Label>\n            </Form.Check>\n            <Form.Check>\n              <Form.Check.Input\n                type=\"radio\"\n                name=\"abstract\"\n                isInvalid={!!fprops.errors.abstract}\n                checked={!fprops.values.abstract}\n                onClick={() => {\n                  fprops.setFieldValue('abstract', false);\n                }}\n              />\n              <Form.Check.Label>Schedulable Goal</Form.Check.Label>\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.abstract}</Form.Control.Feedback>\n            </Form.Check>\n          </Form.Group>\n          <Form.Group hidden={fprops.values.abstract} className=\"mb-3\">\n            <Form.Label>Duration Estimate</Form.Label>\n            <Form.Control\n              name=\"durationEstimate\"\n              type=\"text\"\n              placeholder=\"Duration Estimate\"\n              value={fprops.values.durationEstimate}\n              onChange={fprops.handleChange}\n              isInvalid={!!fprops.errors.durationEstimate}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.durationEstimate}</Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <Form.Label>Patterns</Form.Label>\n            <ChipInput\n              placeholder=\"Goal Patterns\"\n              chips={fprops.values.patterns}\n              onSubmit={(value: string) => {\n                fprops.setFieldValue('patterns', update(fprops.values.patterns, { $push: [value] }));\n              }}\n              onRemove={(index: number) => fprops.setFieldValue('patterns', fprops.values.patterns.filter((_, i) => i != index))}\n            />\n          </Form.Group>\n          <br />\n          <Button type=\"submit\">Submit</Button>\n          <br/>\n          <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\ntype CancelGoalTemplateProps = {\n  goalTemplateData: GoalTemplateData,\n  setGoalTemplateData: (gd: GoalTemplateData) => void\n  apiKey: ApiKey,\n};\n\nfunction CancelGoalTemplate(props: CancelGoalTemplateProps) {\n\n  type CancelGoalTemplateValue = {}\n\n  const onSubmit = async (_: CancelGoalTemplateValue,\n    fprops: FormikHelpers<CancelGoalTemplateValue>) => {\n\n    const maybeGoalTemplateData = await goalTemplateDataNew({\n      goalTemplateId: props.goalTemplateData.goalTemplate.goalTemplateId,\n      apiKey: props.apiKey.key,\n      name: props.goalTemplateData.name,\n      utility: props.goalTemplateData.utility,\n      userGeneratedCodeId: props.goalTemplateData.userGeneratedCode.userGeneratedCodeId,\n      durationEstimate: props.goalTemplateData.durationEstimate === null ? undefined : props.goalTemplateData.durationEstimate,\n      active: false,\n    });\n\n    if (isErr(maybeGoalTemplateData)) {\n      switch (maybeGoalTemplateData.Err) {\n        case \"UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"GOAL_TEMPLATE_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This goalTemplate does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while managing goalTemplate.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Edited\"\n    });\n\n    // execute callback\n    props.setGoalTemplateData(maybeGoalTemplateData.Ok);\n  }\n\n  return <>\n    <Formik<CancelGoalTemplateValue>\n      onSubmit={onSubmit}\n      initialValues={{}}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <p>\n              Are you sure you want to cancel goalTemplate for {props.goalTemplateData.name}?\n            </p>\n            <Button type=\"submit\">Confirm</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nconst ManageGoalTemplate = (props: {\n  data: TemplateData,\n  setData: (d: TemplateData) => void,\n  mutable: boolean,\n  apiKey: ApiKey,\n}) => {\n\n  const [showEditGoalTemplate, setShowEditGoalTemplate] = React.useState(false);\n  const [showCancelGoalTemplate, setShowCancelGoalTemplate] = React.useState(false);\n\n  return <tr>\n    <td>\n      {props.data.gtd.name}\n    </td>\n    <td>\n      {props.data.gtd.durationEstimate === null\n        ? false\n        : formatDuration(intervalToDuration({\n          start: 0,\n          end: props.data.gtd.durationEstimate\n        }))\n      }\n    </td>\n    <td>\n      {\n        props.data.gtp\n          .map((gtp, i) => <Badge key={i} bg=\"secondary\" className=\"m-1\">{gtp.pattern}</Badge>)\n      }\n    </td>\n    <td>\n\n     <div className=\"d-flex flex-wrap\">\n        <Action\n          title=\"Edit\"\n          onClick={() => setShowEditGoalTemplate(true)}\n          icon={Edit}\n          hidden={!props.mutable}\n        />\n        <Action\n          title=\"Cancel\"\n          onClick={() => setShowCancelGoalTemplate(true)}\n          hidden={!(props.data.gtd.active && props.mutable)}\n          variant=\"danger\"\n          icon={Cancel}\n        />\n      </div>\n    </td>\n    <DisplayModal\n      title=\"Edit GoalTemplate\"\n      show={showEditGoalTemplate}\n      onClose={() => setShowEditGoalTemplate(false)}\n    >\n      <EditGoalTemplate\n        data={props.data}\n        setData={(gtd) => {\n          setShowEditGoalTemplate(false);\n          props.setData(update(props.data, { $set: gtd }));\n        }}\n        apiKey={props.apiKey}\n      />\n    </DisplayModal>\n    <DisplayModal\n      title=\"Cancel GoalTemplate\"\n      show={showCancelGoalTemplate}\n      onClose={() => setShowCancelGoalTemplate(false)}\n    >\n      <CancelGoalTemplate\n        goalTemplateData={props.data.gtd}\n        apiKey={props.apiKey}\n        setGoalTemplateData={(gtd) => {\n          setShowCancelGoalTemplate(false);\n          props.setData(update(props.data, { gtd: { $set: gtd } }));\n        }}\n      />\n    </DisplayModal>\n  </tr>\n}\n\nexport default ManageGoalTemplate;\n","import React from 'react';\nimport { Table } from 'react-bootstrap';\nimport update from 'immutability-helper';\nimport CreateGoalTemplate from '../components/CreateGoalTemplate';\nimport ManageGoalTemplate, { TemplateData } from '../components/ManageGoalTemplate';\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { AddButton } from '@innexgo/common-react-components';\nimport DisplayModal from '../components/DisplayModal';\n\n\ntype ManageGoalTemplateTableProps = {\n  templates: TemplateData[],\n  setTemplates: (templates: TemplateData[]) => void,\n  apiKey: ApiKey,\n  mutable: boolean,\n  addable: boolean,\n  showInactive: boolean,\n}\n\nfunction ManageGoalTemplateTable(props: ManageGoalTemplateTableProps) {\n\n  // this list has an object consisting of both the index in the real array and the object constructs a new objec\n  const activeTemplates = props.templates\n    // enumerate data + index\n    .map((t, i) => ({ t, i }))\n    // filter inactive\n    .filter(({ t }) => props.showInactive || t.gtd.active);\n\n\n  const [showCreateTemplate, setShowCreateTemplate] = React.useState(false);\n\n  return <>\n    <Table hover bordered>\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Estimated Duration</th>\n          <th>Patterns</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr hidden={!props.addable}>\n          <td colSpan={5} className=\"p-0\">\n            <AddButton onClick={() => setShowCreateTemplate(true)} />\n          </td>\n        </tr>\n        {activeTemplates.length === 0\n          ? <tr><td className=\"text-center\" colSpan={4}>No Templates</td></tr>\n          : <> </>\n        }\n        {activeTemplates\n          // reverse in order to see newest first\n          .reverse()\n          .map(({ t, i }) =>\n            <ManageGoalTemplate\n              key={i}\n              mutable={props.mutable}\n              data={t}\n              setData={(t) => props.setTemplates(update(props.templates, { [i]: { $set: t } }))}\n              apiKey={props.apiKey}\n            />\n          )}\n      </tbody>\n    </Table>\n    <DisplayModal\n      title=\"New Template\"\n      show={showCreateTemplate}\n      onClose={() => setShowCreateTemplate(false)}\n    >\n      <CreateGoalTemplate\n        apiKey={props.apiKey}\n        postSubmit={(gtd) => {\n          props.setTemplates(update(props.templates, { $push: [gtd] }));\n          setShowCreateTemplate(false);\n        }}\n      />\n    </DisplayModal>\n\n  </>\n}\n\nexport default ManageGoalTemplateTable;\n","import { Row, Container, Col } from 'react-bootstrap';\nimport { Async, AsyncProps } from 'react-async';\nimport update from 'immutability-helper';\nimport ErrorMessage from '../components/ErrorMessage';\nimport DashboardLayout from '../components/DashboardLayout';\nimport { TemplateData } from '../components/ManageGoalTemplate';\nimport { TagData } from '../components/ManageNamedEntity';\nimport ManageGoalTemplateTable from '../components/ManageGoalTemplateTable';\nimport { Loader , Section } from '@innexgo/common-react-components';\nimport { namedEntityDataView, namedEntityPatternView, goalTemplateDataView, goalTemplatePatternView, } from '@innexgo/frontend-todo-app-api';\nimport { unwrap } from '@innexgo/frontend-common';\n\nimport {AuthenticatedComponentProps} from '@innexgo/auth-react-components';\n\ntype SettingsData = {\n  tags: TagData[],\n  templates: TemplateData[],\n}\n\nconst loadSettingsData = async (props: AsyncProps<SettingsData>) => {\n\n  const goalTemplateData = await goalTemplateDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n  const namedEntityData = await namedEntityDataView({\n    creatorUserId: [props.apiKey.creatorUserId],\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key,\n  })\n    .then(unwrap)\n\n  const namedEntityPatterns = await namedEntityPatternView({\n    namedEntityId: namedEntityData.map(gtd => gtd.namedEntity.namedEntityId),\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  // group patterns by tag\n  const tags = namedEntityData.map(ned => ({\n    ned,\n    nep: namedEntityPatterns.filter(nep => nep.namedEntity.namedEntityId === ned.namedEntity.namedEntityId)\n  }));\n\n  const goalTemplatePatterns = await goalTemplatePatternView({\n    goalTemplateId: goalTemplateData.map(gtd => gtd.goalTemplate.goalTemplateId),\n    active: true,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  })\n    .then(unwrap);\n\n  // group patterns by template\n  const templates = goalTemplateData.map(gtd => ({\n    gtd,\n    gtp: goalTemplatePatterns.filter(gtp => gtp.goalTemplate.goalTemplateId === gtd.goalTemplate.goalTemplateId)\n  }));\n\n  return {\n    tags,\n    templates,\n  }\n}\n\n\nfunction Settings(props: AuthenticatedComponentProps) {\n  return <DashboardLayout {...props}>\n    <Container fluid className=\"py-4 px-4\">\n      <Row className=\"justify-content-md-center\">\n        <Col md={8}>\n          <Section id=\"goalIntents\" name=\"My Goals\">\n            <Async promiseFn={loadSettingsData} apiKey={props.apiKey}>\n              {({ setData }) => <>\n                <Async.Pending><Loader /></Async.Pending>\n                <Async.Rejected>\n                  {e => <ErrorMessage error={e} />}\n                </Async.Rejected>\n                <Async.Fulfilled<SettingsData>>{dd =>\n                  <ManageGoalTemplateTable\n                    templates={dd.templates}\n                    setTemplates={(d) => setData(update(dd, { templates: { $set: d } }))}\n                    apiKey={props.apiKey}\n                    mutable\n                    addable\n                    showInactive={false}\n                  />\n                }</Async.Fulfilled>\n              </>}\n            </Async>\n          </Section>\n        </Col>\n      </Row>\n    </Container>\n  </DashboardLayout>\n}\nexport default Settings;\n\n","import React from 'react';\nimport { Form, Container } from 'react-bootstrap'\n\nimport DashboardLayout from '../components/DashboardLayout';\nimport {WidgetWrapper} from '@innexgo/common-react-components';\n\nimport {ManagePassword, ManageUserData, AuthenticatedComponentProps} from '@innexgo/auth-react-components';\n\nfunction Account(props: AuthenticatedComponentProps) {\n  // TODO actually add backend components to handle changing the name properly\n  // Also, make the name and email and password changes into one box initially\n  // Then, when you click on them to change, a modal should pop up\n  // IMO this would look better than the tiny boxes we have now\n\n  const [passwdSuccess, setPasswdSuccess] = React.useState(false);\n  const [nameSuccess, setNameSuccess] = React.useState(false);\n  return <DashboardLayout {...props}>\n    <Container fluid className=\"py-4 px-4\">\n      <div className=\"mx-3 my-3\">\n        <WidgetWrapper title=\"Change Password\">\n          <span>Change your password.</span>\n          {passwdSuccess\n            ? <Form.Text className=\"text-success\">Password changed successfully</Form.Text>\n            : <ManagePassword apiKey={props.apiKey} onSuccess={() => setPasswdSuccess(true)} />\n          }\n        </WidgetWrapper>\n      </div>\n      <div className=\"mx-3 my-3\">\n        <WidgetWrapper title=\"Change Name\">\n          <span>Change your name.</span>\n          {nameSuccess\n            ? <Form.Text className=\"text-success\">Name changed successfully</Form.Text>\n            : <ManageUserData apiKey={props.apiKey} onSuccess={() => setNameSuccess(true)} />\n          }\n        </WidgetWrapper>\n      </div>\n    </Container>\n  </DashboardLayout>\n}\n\nexport default Account;\n","import React from 'react'\r\nimport { TemplateData } from '../components/ManageGoalTemplate';\r\nimport { TagData } from '../components/ManageNamedEntity';\r\nimport { Loader } from '@innexgo/common-react-components';\r\nimport { Button, Container, Form, Row, Col } from 'react-bootstrap';\r\nimport DashboardLayout from '../components/DashboardLayout';\r\nimport { ManageGoalData } from '../components/ManageGoal';\r\nimport ManageGoalTable from '../components/ManageGoalTable';\r\nimport { Async, AsyncProps } from 'react-async';\r\nimport { GoalData, goalDataView, GoalEvent, goalEventView } from '@innexgo/frontend-todo-app-api';\r\nimport { isErr, unwrap } from '@innexgo/frontend-common';\r\nimport ErrorMessage from '../components/ErrorMessage';\r\n\r\nimport { ApiKey } from '@innexgo/frontend-auth-api';\r\nimport { AuthenticatedComponentProps } from '@innexgo/auth-react-components';\r\n\r\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\r\nimport { namedEntityDataView, namedEntityPatternView, goalTemplateDataView, goalTemplatePatternView, } from '@innexgo/frontend-todo-app-api';\r\n\r\ntype SearchProps = {\r\n  apiKey: ApiKey;\r\n  postSubmit: (a: { gd: GoalData, ge: GoalEvent | undefined }[]) => void;\r\n}\r\n\r\nfunction SearchForm(props: SearchProps) {\r\n  type SearchValue = { search: string }\r\n\r\n  const onSubmit = async (values: SearchValue, fprops: FormikHelpers<SearchValue>) => {\r\n\r\n    let errors: FormikErrors<SearchValue> = {};\r\n\r\n    // Validate input\r\n\r\n    let hasError = false;\r\n    fprops.setErrors(errors);\r\n    if (hasError) {\r\n      return;\r\n    }\r\n\r\n    const maybeGoalData = await goalDataView({\r\n      creatorUserId: [props.apiKey.creatorUserId],\r\n      status: [\"PENDING\"],\r\n      onlyRecent: true,\r\n      apiKey: props.apiKey.key,\r\n    });\r\n\r\n    if (isErr(maybeGoalData)) {\r\n      switch (maybeGoalData.Err) {\r\n        case \"UNAUTHORIZED\": {\r\n          fprops.setStatus({\r\n            failureResult: \"You have been automatically logged out.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n        default: {\r\n          fprops.setStatus({\r\n            failureResult: \"An unknown or network error has occured while trying to update goal.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    const goalData = maybeGoalData.Ok\r\n      // filter for name match\r\n      .filter(gd => gd.name.includes(values.search));\r\n\r\n    const goalEvents = await goalEventView({\r\n      goalId: goalData.map(gd => gd.goal.goalId),\r\n      onlyRecent: true,\r\n      apiKey: props.apiKey.key\r\n    }).then(unwrap);\r\n\r\n    const data = goalData\r\n      // join goal event\r\n      .map(gd => ({ gd, ge: goalEvents.find(ge => ge.goal.goalId === gd.goal.goalId) }));\r\n\r\n\r\n    // execute callback\r\n    props.postSubmit(data);\r\n\r\n    fprops.setStatus({\r\n      failureResult: \"\",\r\n      successResult: \"Successfully searched\"\r\n    });\r\n  }\r\n\r\n  return <>\r\n    <Formik<SearchValue>\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        search: \"\",\r\n      }}\r\n      initialStatus={{\r\n        failureResult: \"\",\r\n        successResult: \"\"\r\n      }}\r\n    >\r\n      {(fprops) => <>\r\n        <Form\r\n          noValidate\r\n          onSubmit={fprops.handleSubmit} >\r\n          <Form.Group >\r\n            <h4>Search by Name</h4>\r\n            <Form.Control\r\n              name=\"search\"\r\n              type=\"text\"\r\n              placeholder=\"Search\"\r\n              value={fprops.values.search}\r\n              onChange={e => fprops.setFieldValue(\"search\", e.target.value)}\r\n              isInvalid={!!fprops.errors.search}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.search}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Button type=\"submit\">Search</Button>\r\n          <br />\r\n          <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\r\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\r\n        </Form>\r\n      </>}\r\n    </Formik>\r\n  </>\r\n}\r\n\r\ntype SearchData = {\r\n  tags: TagData[],\r\n  templates: TemplateData[],\r\n}\r\n\r\nconst loadSearchData = async (props: AsyncProps<SearchData>) => {\r\n  const goalTemplateData = await goalTemplateDataView({\r\n    creatorUserId: [props.apiKey.creatorUserId],\r\n    active: true,\r\n    onlyRecent: true,\r\n    apiKey: props.apiKey.key,\r\n  })\r\n    .then(unwrap)\r\n\r\n  const namedEntityData = await namedEntityDataView({\r\n    creatorUserId: [props.apiKey.creatorUserId],\r\n    active: true,\r\n    onlyRecent: true,\r\n    apiKey: props.apiKey.key,\r\n  })\r\n    .then(unwrap)\r\n\r\n  const namedEntityPatterns = await namedEntityPatternView({\r\n    namedEntityId: namedEntityData.map(gtd => gtd.namedEntity.namedEntityId),\r\n    active: true,\r\n    onlyRecent: true,\r\n    apiKey: props.apiKey.key\r\n  })\r\n    .then(unwrap);\r\n\r\n  // group patterns by tag\r\n  const tags = namedEntityData.map(ned => ({\r\n    ned,\r\n    nep: namedEntityPatterns.filter(nep => nep.namedEntity.namedEntityId === ned.namedEntity.namedEntityId)\r\n  }));\r\n\r\n  const goalTemplatePatterns = await goalTemplatePatternView({\r\n    goalTemplateId: goalTemplateData.map(gtd => gtd.goalTemplate.goalTemplateId),\r\n    active: true,\r\n    onlyRecent: true,\r\n    apiKey: props.apiKey.key\r\n  })\r\n    .then(unwrap);\r\n\r\n  // group patterns by template\r\n  const templates = goalTemplateData.map(gtd => ({\r\n    gtd,\r\n    gtp: goalTemplatePatterns.filter(gtp => gtp.goalTemplate.goalTemplateId === gtd.goalTemplate.goalTemplateId)\r\n  }));\r\n\r\n  return {\r\n    tags,\r\n    templates,\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction Search(props: AuthenticatedComponentProps) {\r\n  const [searchResults, setSearchResults] = React.useState<ManageGoalData[]>([]);\r\n  return <DashboardLayout {...props}>\r\n    <Container fluid className=\"py-4 px-4\">\r\n      <SearchForm\r\n        apiKey={props.apiKey}\r\n        postSubmit={setSearchResults}\r\n      />\r\n      <Row className=\"justify-content-md-center\">\r\n        <Col md={8}>\r\n          <Async promiseFn={loadSearchData} apiKey={props.apiKey}>\r\n            <Async.Pending><Loader /></Async.Pending>\r\n            <Async.Rejected>\r\n              {e => <ErrorMessage error={e} />}\r\n            </Async.Rejected>\r\n            <Async.Fulfilled<SearchData>>{sd =>\r\n              <ManageGoalTable\r\n                data={searchResults}\r\n                setData={setSearchResults}\r\n                tags={sd.tags}\r\n                templates={sd.templates}\r\n                apiKey={props.apiKey}\r\n                addable={false}\r\n                mutable\r\n                showInactive={false}\r\n              />\r\n            }</Async.Fulfilled>\r\n          </Async>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  </DashboardLayout>\r\n}\r\n\r\nexport default Search;\r\n","import React from 'react';\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\n\nimport { ApiKey } from '@innexgo/frontend-auth-api';\nimport { AuthenticatedComponentRenderer } from '@innexgo/auth-react-components';\n\n// public pages\nimport Home from './pages/Home';\nimport Instructions from './pages/Instructions';\nimport About from './pages/About';\nimport Error404 from './pages/Error404';\n\n// register\nimport { Register } from '@innexgo/auth-react-components';\nimport { EmailConfirm } from '@innexgo/auth-react-components';\nimport { ParentPermissionConfirm } from '@innexgo/auth-react-components';\n\n// When you forget password\nimport { ForgotPassword } from '@innexgo/auth-react-components';\nimport { ResetPassword } from '@innexgo/auth-react-components';\n\n// calendar\nimport Calendar from './pages/Calendar';\n\n// todo list\nimport Dashboard from './pages/Dashboard';\n\n// settings\nimport Settings from './pages/Settings';\n\n// account\nimport Account from './pages/Account';\n\n// search\nimport Search from './pages/Search';\n\nimport DarkAdaptedIcon from \"./img/innexgo_transparent_icon.png\";\nimport LightAdaptedIcon from \"./img/innexgo_onyx_transparent.png\";\n\n// Bootstrap CSS & JS\nimport './style/style.scss';\nimport 'bootstrap/dist/js/bootstrap';\n\n\n\nfunction getPreexistingApiKey() {\n  const preexistingApiKeyString = localStorage.getItem(\"apiKey\");\n  if (preexistingApiKeyString == null) {\n    return null;\n  } else {\n    try {\n      // TODO validate here\n      return JSON.parse(preexistingApiKeyString) as ApiKey;\n    } catch (e) {\n      // try to clean up a bad config\n      localStorage.setItem(\"apiKey\", JSON.stringify(null));\n      return null;\n    }\n  }\n}\n\nfunction App() {\n  const [apiKey, setApiKeyState] = React.useState(getPreexistingApiKey());\n  const apiKeyGetSetter = {\n    apiKey: apiKey,\n    setApiKey: (data: ApiKey | null) => {\n      localStorage.setItem(\"apiKey\", JSON.stringify(data));\n      setApiKeyState(data);\n    }\n  };\n\n  const branding = {\n    name: \"LifeSketch\",\n    tagline: \"Optimize your day.\",\n    homeUrl: \"/\",\n    tosUrl: \"/terms_of_service\",\n    darkAdaptedIcon: DarkAdaptedIcon,\n    lightAdaptedIcon: LightAdaptedIcon,\n  }\n\n  return <BrowserRouter>\n    <Routes>\n      <Route path=\"/\">\n        <Home branding={branding} />\n      </Route>\n      <Route path=\"/instructions\" >\n        <Instructions branding={branding} />\n      </Route>\n      <Route path=\"/about\" >\n        <About branding={branding} />\n      </Route>\n      <Route path=\"/forgot_password\" >\n        <ForgotPassword branding={branding} />\n      </Route>\n      <Route path=\"/reset_password\" >\n        <ResetPassword branding={branding} />\n      </Route>\n      <Route path=\"/register\" >\n        <Register branding={branding} />\n      </Route>\n      <Route path=\"/email_confirm\" >\n        <EmailConfirm branding={branding} />\n      </Route>\n      <Route path=\"/parent_confirm\" >\n        <ParentPermissionConfirm branding={branding} />\n      </Route>\n      <Route path=\"/calendar\" >\n        <AuthenticatedComponentRenderer branding={branding} {...apiKeyGetSetter} component={Calendar} />\n      </Route>\n      <Route path=\"/dashboard\" >\n        <AuthenticatedComponentRenderer branding={branding} {...apiKeyGetSetter} component={Dashboard} />\n      </Route>\n      <Route path=\"/settings\" >\n        <AuthenticatedComponentRenderer branding={branding} {...apiKeyGetSetter} component={Settings} />\n      </Route >\n      <Route path=\"/account\" >\n        <AuthenticatedComponentRenderer branding={branding} {...apiKeyGetSetter} component={Account} />\n      </Route >\n      <Route path=\"/search\" >\n        <AuthenticatedComponentRenderer branding={branding} {...apiKeyGetSetter} component={Search} />\n      </Route >\n      <Route path=\"*\">\n        <Error404 />\n      </Route>\n    </Routes >\n  </BrowserRouter >\n}\n\nexport default App;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAApCAYAAACyXOB4AAAACXBIWXMAAC4jAAAuIwF4pT92AAACgElEQVRYhcVYi3HbMAx9zWUAbVB2A3WCqBt4BHeDZAN3A3UDdQN3gqobKBuoGzgToMccmGNg8E+3707nCw3CT098ABQQUY/rREQ7EU098rUmGIloo/eYiWj4X6ROFMaFiA7/ktTEjyoH5xrVSoIHfjSlKFbtFuqEYFUzPUgNnKwXrGqPLaQOnOQWWGOqaYumszohBFWTC4+V6pzZBLJm5WDlendFyvCXNZjFjdUa4uSTqlWHeJ9/NqbKPA5WaXMHYAWwoxw/ARjedQZAAH5V5PFh81x82WNtQ6pzaDyDmkJj6KBrDdaHs3LP+nVKuS+mmtvcq35t0nU5xdOp5jbX9j4NV+rU9L6xQ++jVCV3112mK6w7twZXvQB4AjBlOT3BWspcc56kOmNqlEmRIm9aKJ0ctN7mDNR0pshLJmfvmGpydpLzWBOpmd7f4S6kl6rJKVNz7B4qBaXuk3VLzt6WyKKsScfKmCZSAyeUZ+YYiJVnrmhOzyUVO0e+u46B74veaEpJOSXk7OUOrlxPzuPalVs8fVy4CD5xUdTwDOAzgLmm0taQcpiZ3LNY/w5gbOkAH16fYTsMtw9TOTDehFRXxB6fKfyhkvhobIzUAuCQ+SMTx+di4T06ArZ0byV7po1dKcgpkC73Goq5F5IavgOn0Ee+q9WbqS6eOoad9sBrM/+9cpxzoF0bRO4Hjt849/rGxGM4JmalTVRm2XYk/BZ0TMQusYoeIiYJpYhpPTGUe5Gx2jPV3mRi/2CVOEditRePq5vV3Dfyp99ChojrHF4SsX7uP8raGzRS9vB+489PAH5oG73Y3wC+MJmviRrkctt8wdxaRS9pFaVtxRJ37tUB4C/qIaI0IJ17gwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAkCAYAAAAHKVPcAAAACXBIWXMAAC4jAAAuIwF4pT92AAACx0lEQVRYhb1XwXHbMBA8e/KXU0HUgeWHMQY+oisIU0HYQdxB5A7kDpgOlAokfcgZfqJ0QHcgV8DMKQsGgQDyQDvZGc+Y4gnYW9wtThdd19FUKG0WRLQiorKpq83UdSaTUNrw5l+dj74TUdHU1fGfk1DaZJw5EX0IvH4BkSRVxCSUNleQ/osgfA8yrWTtSyEBzv4gJMBYcrzS5kESPKgEsmfpPwo3D2FUlagSSpuciNpXEiCJKmdKvFH2MfyEKgf3/V9KgG1K9rzoI9pTgmsi+oH27nFSQmkzR/bLxMzeW19Q2hywiRS9Khe3d5oJ8AKzhAXYD1g19gN2zcwzrhTcXKJqMzCTYI+NW7TtdiKBZyK6ZyVONcH/NHW1wPkO4bGpKyZcYPOQa0rwxIk0dbWjSHcsUB/u+TLrHP/771KzL+zmFlGzci6obzj/AradUjsuWMVV6MWoY3L1K212EzrHIugNLt4Nfdu5ltcoxlQVotm7GLLtTGlTgAy34jzBlDj7G0uAj9Y3KBeDSvDGMLI5iinHnVJGVGH/WDV1taY/t+8ahRztvCES9iiYxFZpYyenjeOwrr33t2Vk9ojeoqNDDbLZOpn2kxNU4UzXXvbu5MXfyf22TCURyupsRojcvqK5M2W8y3BX2Fo43R9NXZWBOunfSdYWjXf0u0N2XofMYGAEM7ME9rBkEQESdIdP5IgOKVALPkS+4EOshEemhHnZYju4vpCKV/0CeytMUuK/kcClNQoe69CegxiKC5JA4S3Hfrwg7hrdMTmurwmwfEAb5mi5F3hDC1c8OnFXaFE/rnSsezQupAQb0men52d4tlOVbdM5HDQUd0yJo8h4t/Gsl6/lzLfeQNwzTCo5LlQTvs+3Ee/3b8VYnD9RncWFSLCEbL33mC/5OQQ2K477hDh+DoGPeDiOj8P9u73TC+957seEPp8c13X0C7Ltw5xkKdn1AAAAAElFTkSuQmCC\"","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}