{"version":3,"sources":["utils/utils.ts","components/Login.tsx","img/innexgo_transparent_icon.png","components/SimpleLayout.tsx","components/AuthenticatedRoute.tsx","components/ExternalLayout.tsx","components/Section.tsx","pages/Home.tsx","pages/Instructions.tsx","pages/About.tsx","pages/Error404.tsx","components/RegisterForm.tsx","pages/Register.tsx","pages/RegisterConfirm.tsx","pages/ForgotPassword.tsx","pages/ResetPassword.tsx","components/Loader.tsx","components/InnerLayout.tsx","components/DashboardLayout.tsx","components/CalendarCard.tsx","components/CalendarSolver.tsx","components/UtilityWrapper.tsx","components/CreatePastEvent.tsx","components/TimePicker.tsx","components/UtilityPicker.tsx","components/CreateGoal.tsx","components/DisplayModal.tsx","components/ManagePastEvent.tsx","components/ManageGoal.tsx","components/ManageGoalTable.tsx","pages/Calendar.tsx","pages/Dashboard.tsx","components/CreatePassword.tsx","pages/Settings.tsx","pages/Search.tsx","App.tsx","index.tsx"],"names":["apiUrl","window","location","protocol","host","getFormData","data","formData","FormData","Object","keys","forEach","key","append","fetchApi","url","a","fetch","method","body","Response","status","resp","json","objResp","ApiErrorCodes","newValidApiKey","props","newVerificationChallenge","newUser","newPasswordReset","newChangePassword","newResetPassword","newGoal","newScheduledGoal","newGoalData","newScheduledGoalData","newTimeUtilityFunction","newPastEvent","newPastEventData","viewGoalData","viewPastEventData","viewTimeUtilityFunctionPoint","isApiErrorCode","maybeApiErrorCode","includes","APP_NAME","isPasswordValid","pass","length","test","setHrMin","d","hr","min","setMinutes","setHours","assert","val","msg","Error","Login","onSubmit","values","setStatus","setErrors","errors","hasError","email","password","userEmail","userPassword","duration","maybeApiKey","onSuccess","initialStatus","initialValues","fprops","Form","noValidate","handleSubmit","Group","Label","Control","name","type","placeholder","value","onChange","handleChange","isInvalid","Feedback","Button","Text","className","href","SimpleLayout","Container","fluid","Row","style","minHeight","Col","md","backgroundColor","src","TransparentLogoIcon","alt","ArrowForward","this","children","React","Component","AuthenticatedRoute","AuthenticatedComponent","component","apiKey","setApiKey","rest","isAuthenticated","creationTime","Date","now","apiKeyKind","Card","Body","Title","x","ExternalHeader","listenToScroll","scrolled","document","scrollTop","documentElement","scrollHeight","clientHeight","setState","scroll","state","addEventListener","removeEventListener","topTransparent","transparentTop","navStyle","transitionDuration","linkStyle","color","fixed","title","data-toggle","data-target","Menu","id","ExternalLayout","Navbar","bg","variant","Brand","innexgo_logo","width","height","Nav","Link","Section","position","top","visibility","display","float","Home","Jumbotron","alignItems","backgroundAttachment","backgroundPosition","backgroundRepeat","backgroundSize","justifyContent","Instructions","About","Error404","to","RegisterForm","password1","password2","terms","maybeVerificationChallenge","userName","failureMessage","successMessage","hidden","e","setFieldValue","replace","normalizeInput","target","Check","Input","checked","rel","Register","useState","successful","setSuccess","CreateUser","verificationChallengeKey","maybeUser","failureResult","successResult","postSubmit","RegisterConfirm","user","setUser","URLSearchParams","search","get","u","ForgotPasswordForm","maybePasswordResetKey","ForgotPassword","ResetPasswordForm","passwordResetKey","resetKey","newPassword","passwordResetResult","ResetPassword","Loader","role","iconStyle","InnerLayoutContext","createContext","SidebarEntry","Icon","icon","useContext","label","InnerLayout","collapsed","setCollapsed","widthrem","sidebarStyle","left","overflowX","overflowY","margin","sidebarChildren","nonSidebarChildren","Children","child","isValidElement","push","Provider","onClick","_","bottom","right","logoutCallback","ExitToApp","marginLeft","DashboardLayout","creator","Dashboard","Event","Search","Settings","goalDataToEvent","gd","goalDataId","start","startTime","end","borderColor","goalData","pastEventDataToEvent","ped","pastEventDataId","pastEventData","GoalCard","PastEventCard","CalendarCard","eventInfo","event","extendedProps","split","lerp","b","t","utils","expectedValue","sgds","map","s","console","log","sgd","sum","Math","tuf","p","max","fi","findIndex","ftr","sgdEnd","li","array","predicate","l","findLastIndex","ltr","slice","i","delta","sgdValue","reduce","accumulator","currentValue","ICalendarSolver","iteration","setIteration","iterating","setIterating","useEffect","setTimeout","ev","dataRef","useRef","data_new","index","floor","random","neighbor","current","plugins","timeGridPlugin","interactionPlugin","customButtons","stop","text","click","commit","startTimes","maybeTimeUtilFunction","goalId","goal","description","durationEstimate","timeUtilityFunctionId","onHide","cancel","headerToolbar","center","initialView","datesSet","view","calendar","updateSize","allDaySlot","slotDuration","nowIndicator","editable","selectable","events","eventContent","loadSolverData","creatorUserId","userId","onlyRecent","scheduled","maybeGoalData","Promise","all","filter","timeUtilityFunction","maybeTuf","tufp","sort","flat","CalendarSolver","promiseFn","reload","Pending","Rejected","Fulfilled","UtilityWrapper","OverlayTrigger","overlay","placement","Help","CreatePastEvent","maybePastEvent","as","TimePicker","options","minTime","time","maxTime","format","defaultValue","isClearable","o","setTime","scale","UtilityPicker","span","setStart","addHours","valueOf","setEnd","pointsRef","points","lineOptions","dragData","mutable","dragX","dragDataRound","tooltips","enabled","scales","xAxes","ticks","maxTicksLimit","yAxes","legend","onDragEnd","setPoints","moment","y","lineData","datasets","lineTension","fill","onDayChange","day","getHours","getMinutes","sm","noTimePrefTUF","CreateGoal","parseDuration","formatDuration","intervalToDuration","minutes","DisplayModal","Modal","show","onClose","keyboard","backdrop","size","centered","Header","closeButton","EditPastEventData","pastEventId","pastEvent","active","maybePastEventData","ArchivePastEvent","loadPastEventData","ManagePastEventData","showEditPastEventData","setShowEditPastEventData","showArchivePastEvent","setShowArchivePastEvent","Table","hover","bordered","Edit","Archive","Unarchive","EditGoal","CancelGoal","loadManageGoalData","ManageGoal","showEditGoal","setShowEditGoal","showCancelGoal","setShowCancelGoal","mgd","Cancel","ManageGoalTable","showCreateGoal","setShowCreateGoal","addable","colSpan","borderStyle","borderWidth","Add","fontSize","goalIds","gi","UnscheduledGoalCard","elRef","draggable","Draggable","eventData","destroy","ref","data-custom","JSON","stringify","cursor","loadUnscheduledGoalData","EventCalendar","optimizing","setOptimizing","selectedSpan","setSelectedSpanRaw","setSelectedSpan","calendarRef","getApi","unselect","selectedManageGoalData","setSelectedManageGoalData","selectedManagePastEventData","setSelectedManagePastEventData","eventSource","args","minStartTime","maxStartTime","task","changeHandler","oldEventProps","revert","oped","setExtendedProp","ogd","lg","gdus","gdu","xl","optimize","selectMirror","unselectCancel","eventClick","eca","eventOverlap","eventResize","era","oldEvent","eventDrop","eda","eventReceive","draggedEl","parse","getAttribute","remove","refetchEvents","select","dsa","Tabs","Tab","eventKey","ManagePastEvent","CalendarWidget","Popover","Calendar","loadDashboardData","ddata","CreatePassword","oldPassword","oldpassword","passwordChangeResult","passwdSuccess","setPasswdSuccess","SearchForm","partialName","setSearch","App","preexistingApiKeyString","localStorage","getItem","setItem","getPreexistingApiKey","setApiKeyState","apiKeyGetSetter","path","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a3e7dd4a.chunk.js","sourcesContent":["import setHours from 'date-fns/setHours';\nimport setMinutes from 'date-fns/setMinutes';\n\n/**\n * Returns a promise that will be resolved in some milliseconds\n * use await sleep(some milliseconds)\n * @param {int} ms milliseconds to sleep for\n * @return {Promise<void>} a promise that will resolve in ms milliseconds\n */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function staticUrl() {\n  return window.location.protocol + \"//\" + window.location.host;\n}\n\nexport function apiUrl() {\n  return staticUrl() + '/api';\n}\n\nfunction getFormData(data: object) {\n  const formData = new FormData();\n  Object.keys(data).forEach(key => formData.append(key, (data as any)[key]));\n  return formData;\n}\n\n// This function is guaranteed to only return ApiErrorCode | object\nasync function fetchApi(url: string, data: FormData) {\n  // Catch all errors and always return a response\n  const resp = await (async () => {\n    try {\n      return await fetch(`${apiUrl()}/${url}`, {\n        method: 'POST',\n        body: data\n      });\n    } catch (e) {\n      return new Response('\"NETWORK\"', { status: 400 })\n    }\n  })();\n\n  try {\n    let objResp = await resp.json();\n    return objResp;\n  } catch (e) {\n    return \"UNKNOWN\";\n  }\n}\n\nexport const ApiErrorCodes = [\n  \"OK\",\n  \"NOT_FOUND\",\n  \"NO_CAPABILITY\",\n\n  \"API_KEY_UNAUTHORIZED\",\n  \"API_KEY_NONEXISTENT\",\n\n  \"PASSWORD_INCORRECT\",\n  \"PASSWORD_INSECURE\",\n  \"PASSWORD_CANNOT_CREATE_FOR_OTHERS\",\n\n  \"USER_NONEXISTENT\",\n  \"USER_EXISTENT\",\n  \"USER_NAME_EMPTY\",\n  \"USER_EMAIL_EMPTY\",\n  \"USER_EMAIL_INVALIDATED\",\n  \"USER_KIND_INVALID\",\n\n  \"SUBSCRIPTION_NONEXISTENT\",\n  \"SUBSCRIPTION_EXPIRED\",\n  \"SUBSCRIPTION_UNAUTHORIZED\",\n  \"SUBSCRIPTION_LIMITED\",\n\n  \"VERIFICATION_CHALLENGE_NONEXISTENT\",\n  \"VERIFICATION_CHALLENGE_TIMED_OUT\",\n\n  \"PASSWORD_RESET_NONEXISTENT\",\n  \"PASSWORD_EXISTENT\",\n  \"PASSWORD_RESET_TIMED_OUT\",\n\n  \"EMAIL_RATELIMIT\",\n  \"EMAIL_BLACKLISTED\",\n\n  \"GOAL_NONEXISTENT\",\n\n  \"PAST_EVENT_NONEXISTENT\",\n\n  \"TIME_UTILITY_FUNCTION_NONEXISTENT\",\n  \"TIME_UTILITY_FUNCTION_NOT_VALID\",\n  \"NEGATIVE_START_TIME\",\n  \"NEGATIVE_DURATION\",\n  \"CANNOT_ALTER_PAST\",\n\n  \"UNKNOWN\",\n  \"NETWORK\"\n] as const;\n\n// Creates a union type\nexport type ApiErrorCode = typeof ApiErrorCodes[number];\n\nexport type NewValidApiKeyProps = {\n  userEmail: string,\n  userPassword: string,\n  duration: number,\n}\n\nexport async function newValidApiKey(props: NewValidApiKeyProps): Promise<ApiKey | ApiErrorCode> {\n  return await fetchApi(\"apiKey/newValid/\", getFormData(props));\n}\n\nexport type NewCancelApiKeyProps = {\n  apiKeyToCancel: string,\n  apiKey: string,\n}\n\nexport async function newApiKeyCancel(props: NewCancelApiKeyProps): Promise<ApiKey | ApiErrorCode> {\n  return await fetchApi(\"apiKey/newCancel/\", getFormData(props));\n}\n\nexport type NewVerificationChallengeProps = {\n  userName: string,\n  userEmail: string,\n  userPassword: string,\n};\n\nexport async function newVerificationChallenge(props: NewVerificationChallengeProps): Promise<VerificationChallenge | ApiErrorCode> {\n  return await fetchApi(\"verificationChallenge/new/\", getFormData(props));\n}\n\nexport type NewUserProps = {\n  verificationChallengeKey: string,\n};\n\nexport async function newUser(props: NewUserProps): Promise<User | ApiErrorCode> {\n  return await fetchApi(\"user/new/\", getFormData(props));\n}\n\nexport type NewPasswordResetProps = {\n  userEmail: string,\n};\n\nexport async function newPasswordReset(props: NewPasswordResetProps): Promise<PasswordReset | ApiErrorCode> {\n  return await fetchApi(\"passwordReset/new/\", getFormData(props));\n}\n\nexport type NewSubscriptionProps = {\n  subscriptionKind: SubscriptionKind,\n  apiKey: string\n}\n\nexport async function newSubscription(props: NewSubscriptionProps): Promise<Subscription | ApiErrorCode> {\n  return await fetchApi(\"subscription/new/\", getFormData(props));\n}\n\nexport type NewChangePasswordProps = {\n  userId: number,\n  oldPassword: string,\n  newPassword: string,\n  apiKey: string\n}\n\nexport async function newChangePassword(props: NewChangePasswordProps): Promise<Password | ApiErrorCode> {\n  return await fetchApi(\"password/newChange/\", getFormData(props));\n}\n\nexport type NewCancelPasswordProps = {\n  userId: number,\n  apiKey: string\n}\n\nexport async function newCancelPassword(props: NewCancelPasswordProps): Promise<Password | ApiErrorCode> {\n  return await fetchApi(\"password/newCancel/\", getFormData(props));\n}\n\n\nexport type NewResetPasswordProps = {\n  passwordResetKey: string,\n  newPassword: string\n}\n\nexport async function newResetPassword(props: NewResetPasswordProps): Promise<Password | ApiErrorCode> {\n  return await fetchApi(\"password/newReset/\", getFormData(props));\n}\n\nexport type NewGoalProps = {\n  name: string, //\n  description: string, //\n  durationEstimate: number, //\n  timeUtilityFunctionId: number, //\n  apiKey: string\n}\n\nexport async function newGoal(props: NewGoalProps): Promise<GoalDataUnscheduled | ApiErrorCode> {\n  return await fetchApi(\"goal/new/\", getFormData(props));\n}\n\nexport type NewScheduledGoalProps = {\n  name: string, //\n  description: string, //\n  durationEstimate: number, //\n  timeUtilityFunctionId: number, //\n  startTime: number, //\n  duration: number, //\n  apiKey: string\n}\n\nexport async function newScheduledGoal(props: NewScheduledGoalProps): Promise<GoalDataScheduled | ApiErrorCode> {\n  return await fetchApi(\"goal/newScheduled/\", getFormData(props));\n}\n\nexport type NewGoalDataProps = {\n  goalId: number, //\n  name: string, //\n  description: string, //\n  durationEstimate: number, //\n  timeUtilityFunctionId: number, //\n  status: GoalDataStatusKind, //\n  apiKey: string\n}\n\nexport async function newGoalData(props: NewGoalDataProps): Promise<GoalDataUnscheduled | ApiErrorCode> {\n  return await fetchApi(\"goalData/new/\", getFormData(props));\n}\n\nexport type NewScheduledGoalDataProps = {\n  goalId: number, //\n  name: string, //\n  description: string, //\n  durationEstimate: number, //\n  timeUtilityFunctionId: number, //\n  startTime: number, //\n  duration: number, //\n  status: GoalDataStatusKind, //\n  apiKey: string\n}\n\nexport async function newScheduledGoalData(props: NewScheduledGoalDataProps): Promise<GoalDataScheduled | ApiErrorCode> {\n  return await fetchApi(\"goalData/newScheduled/\", getFormData(props));\n}\n\n\nexport type NewTimeUtilityFunctionProps = {\n  startTimes: number[], //\n  utils: number[], //\n  apiKey: string\n}\n\nexport async function newTimeUtilityFunction(props: NewTimeUtilityFunctionProps): Promise<TimeUtilityFunction | ApiErrorCode> {\n  return await fetchApi(\"timeUtilityFunction/new/\", getFormData(props));\n}\n\nexport type NewPastEventProps = {\n  name: string, //\n  description: string, //\n  startTime: number, //\n  duration: number, //\n  apiKey: string\n}\n\nexport async function newPastEvent(props: NewPastEventProps): Promise<PastEventData | ApiErrorCode> {\n  return await fetchApi(\"pastEvent/new/\", getFormData(props));\n}\n\nexport type NewPastEventDataProps = {\n  pastEventId:number, //\n  name:string, //\n  description: string, //\n  startTime:number, //\n  duration:number, //\n  active:boolean, //\n  apiKey:string\n}\n\nexport async function newPastEventData(props: NewPastEventDataProps): Promise<PastEventData | ApiErrorCode> {\n  return await fetchApi(\"pastEventData/new/\", getFormData(props));\n}\n\nexport type ViewSubscriptionProps = {\n  subscriptionId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  subscriptionKind?: SubscriptionKind, //\n  maxUses?: number, //\n  onlyRecent?: boolean, //\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewSubscription(props: ViewSubscriptionProps): Promise<Subscription[] | ApiErrorCode> {\n  return await fetchApi(\"subscription/\", getFormData(props));\n}\n\nexport type ViewUserProps = {\n  userId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  userName?: string, //\n  partialUserName?: string, //\n  userEmail?: string, //\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\n\nexport async function viewUser(props: ViewUserProps): Promise<User[] | ApiErrorCode> {\n  return await fetchApi(\"user/\", getFormData(props));\n}\n\nexport type ViewPasswordProps = {\n  passwordId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  userId?: number, //\n  passwordKind?: PasswordKind, //\n  onlyRecent?: boolean,\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewPassword(props: ViewPasswordProps): Promise<Password[] | ApiErrorCode> {\n  return await fetchApi(\"password/\", getFormData(props));\n}\n\n\nexport type ViewApiKeyProps = {\n  apiKeyId?: number, //\n  creatorUserId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  duration?: number, //\n  minDuration?: number, //\n  maxDuration?: number, //\n  apiKeyKind?: ApiKeyKind, //\n  onlyRecent?: boolean, //\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewApiKey(props: ViewApiKeyProps): Promise<ApiKey[] | ApiErrorCode> {\n  return await fetchApi(\"apiKey/\", getFormData(props));\n}\n\nexport type ViewGoalProps = {\n  goalId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewGoal(props: ViewGoalProps): Promise<Goal[] | ApiErrorCode> {\n  return await fetchApi(\"goal/\", getFormData(props));\n}\n\n\n\nexport type ViewGoalDataProps = {\n  goalDataId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  goalId?: number,\n  name?: string,\n  partialName?: string,\n  description?: string,\n  partialDescription?: string,\n  durationEstimate?: number,\n  minDurationEstimate?: number,\n  maxDurationEstimate?: number,\n  timeUtilityFunctionId?: number,\n  scheduled?: boolean,\n  startTime?: number,\n  minStartTime?: number,\n  maxStartTime?: number,\n  duration?: number,\n  minDuration?: number,\n  maxDuration?: number,\n  status?: GoalDataStatusKind,\n  onlyRecent?: boolean,\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewGoalData(props: ViewGoalDataProps): Promise<GoalData[] | ApiErrorCode> {\n  return await fetchApi(\"goalData/\", getFormData(props));\n}\n\nexport type ViewPastEventProps = {\n  pastEventId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewPastEvent(props: ViewPastEventProps): Promise<PastEvent[] | ApiErrorCode> {\n  return await fetchApi(\"pastEvent/\", getFormData(props));\n}\n\nexport type ViewPastEventDataProps = {\n  pastEventDataId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  pastEventId?: number,\n  name?: string,\n  partialName?: string,\n  description?: string,\n  partialDescription?: string,\n  startTime?: number,\n  minStartTime?: number,\n  maxStartTime?: number,\n  duration?: number,\n  minDuration?: number,\n  maxDuration?: number,\n  active?: boolean,\n  onlyRecent?: boolean,\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewPastEventData(props: ViewPastEventDataProps): Promise<PastEventData[] | ApiErrorCode> {\n  return await fetchApi(\"pastEventData/\", getFormData(props));\n}\n\nexport type ViewTimeUtilityFunctionProps = {\n  timeUtilityFunctionId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewTimeUtilityFunction(props: ViewTimeUtilityFunctionProps): Promise<TimeUtilityFunction[] | ApiErrorCode> {\n  return await fetchApi(\"timeUtilityFunction/\", getFormData(props));\n}\n\nexport type ViewTimeUtilityFunctionPointProps = {\n  timeUtilityFunctionPointId?: number, //\n  creationTime?: number, //\n  minCreationTime?: number, //\n  maxCreationTime?: number, //\n  creatorUserId?: number, //\n  timeUtilityFunctionId?: number,\n  startTime?: number,\n  minStartTime?: number,\n  maxStartTime?: number,\n  utils?: number,\n  minUtils?: number,\n  maxUtils?: number,\n  offset?: number,\n  count?: number,\n  apiKey: string,\n}\n\nexport async function viewTimeUtilityFunctionPoint(props: ViewTimeUtilityFunctionPointProps): Promise<TimeUtilityFunctionPoint[] | ApiErrorCode> {\n  return await fetchApi(\"timeUtilityFunctionPoint/\", getFormData(props));\n}\n\nexport function isApiErrorCode(maybeApiErrorCode: any): maybeApiErrorCode is ApiErrorCode {\n  return typeof maybeApiErrorCode === 'string' && ApiErrorCodes.includes(maybeApiErrorCode as any);\n}\n\nexport const INT_MAX: number = 999999999999999;\n\nexport const APP_NAME: string = \"4cast\";\nexport const APP_SLOGAN: string = \"Optimize Your Day\";\n\nexport const isPasswordValid = (pass: string) => pass.length >= 8 && /\\d/.test(pass);\n\nexport const setHrMin = (d:Date,hr:number, min:number) => setMinutes(setHours(d, hr), min)\n\n// from here:\n// https://stackoverflow.com/questions/40929260/find-last-index-of-element-inside-array-by-certain-condition\n\n/**\n* Returns the index of the last element in the array where predicate is true, and -1\n* otherwise.\n* @param array The source array to search in\n* @param predicate find calls predicate once for each element of the array, in descending\n* order, until it finds one where predicate returns true. If such an element is found,\n* findLastIndex immediately returns that element index. Otherwise, findLastIndex returns -1.\n*/\nexport function findLastIndex<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): number {\n    let l = array.length;\n    while (l--) {\n        if (predicate(array[l], l, array))\n            return l;\n    }\n    return -1;\n}\n\n\nexport function assert(val:boolean, msg:string) {\n  if(!val) {\n      throw new Error(msg);\n  }\n}\n","import React from 'react';\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Button, Form, } from 'react-bootstrap'\nimport { newValidApiKey, isApiErrorCode } from '../utils/utils';\n\n\n// onSuccess is a callback that will be run once the user has successfully logged in.\n// In general, the onSuccess callback should make sure to hide the form so that the \n// user doesn't accidentally double submit.\ninterface LoginProps {\n  onSuccess: (apiKey: ApiKey) => void\n}\n\nfunction Login(props: LoginProps) {\n\n  // This represents the state stored in the form. \n  // Note that fields don't just have to be strings. \n  // You could use numbers, booleans, or more complex objects if you wanted.\n  type LoginValue = {\n    email: string,\n    password: string,\n  }\n\n  // onSubmit is a callback that will be run once the user submits their form.\n  \n  // here, we're making use of JavaScript's destructuring assignment: \n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\n  const onSubmit = async (values: LoginValue, { setStatus, setErrors }: FormikHelpers<LoginValue>) => {\n    // Validate input\n    \n    // we start off by assuming no errors\n    let errors: FormikErrors<LoginValue> = {};\n    let hasError = false;\n    if (values.email === \"\") {\n      errors.email = \"Please enter your email\";\n      hasError = true;\n    }\n    if (values.password === \"\") {\n      errors.password = \"Please enter your password\";\n      hasError = true;\n    }\n    \n    // setErrors is a Formik function that automatically sets errors on the correct fields\n    setErrors(errors);\n    \n    // bail early if we have hit any errors\n    if (hasError) {\n      return;\n    }\n\n    // we make our request here\n    const maybeApiKey = await newValidApiKey({\n      userEmail: values.email,\n      userPassword: values.password,\n      duration: 5 * 60 * 60 * 1000\n    });\n\n    // check if the operation was successful\n    if (isApiErrorCode(maybeApiKey)) {\n      // otherwise display errors\n      switch (maybeApiKey) {\n        case \"USER_NONEXISTENT\": {\n          setErrors({\n            email: \"No such user exists\"\n          });\n          break;\n        }\n        case \"PASSWORD_INCORRECT\": {\n          setErrors({\n            password: \"Your password is incorrect\"\n          });\n          break;\n        }\n        default: {\n          // Status is like the global error field of the form. \n          // Only use it when dealing with unknown kinds of errors, \n          // or errors that don't really fit on a single field.\n          setStatus(\"An unknown or network error has occured while trying to log you in\");\n          break;\n        }\n      }\n      return;\n    }\n\n    // on success execute callBack\n    props.onSuccess(maybeApiKey);\n  }\n  \n  \n  // Notice how Formik is a Generic component that does type checking\n  // This helps ensure we make fewer mistakes\n  return <>\n    <Formik<LoginValue>\n      onSubmit={onSubmit}\n      initialStatus=\"\"\n      initialValues={{\n        // these are the default values the form will start with\n        email: \"\",\n        password: \"\",\n      }}\n    >\n      {(fprops) => (\n        /* we enable noValidate so that we can delegate validation to Formik */\n        /* onSubmit={fprops.handleSubmit} means that Formik will handle form submission */\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit}>\n          {/* Use Bootstrap's Form.Group in order to recieve a consistently styled texbox */}\n          <Form.Group>\n            <Form.Label>Email</Form.Label>\n            {/* When making a form, the `type` prop should usually be \"text\" */}\n            {/* unless its an email address or a password */}\n            <Form.Control\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"Email\"\n              value={fprops.values.email}\n              onChange={fprops.handleChange}\n              isInvalid={!!fprops.errors.email}\n            />\n            {/* Feedback fields aren't usually displayed unless we called `setError` in `onSubmit` */}\n            <Form.Control.Feedback type=\"invalid\"> {fprops.errors.email} </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group >\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              value={fprops.values.password}\n              onChange={fprops.handleChange}\n              isInvalid={!!fprops.errors.password}\n            />\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.password}</Form.Control.Feedback>\n          </Form.Group>\n          <br />\n          {/* Hitting this button will submit the form. */}\n          {/* Submitting the form will submit the Formik form, which will call onSubmit. */}\n          {/* If the operation was successful, props.onSuccess will be called */}\n          {/* If it wasn't successful, errors will be set. */}\n          <Button type=\"submit\">Login</Button>\n          <br />\n          {/* This is where the status text will be displayed */}\n          <Form.Text className=\"text-danger\">{fprops.status}</Form.Text>\n          <br />\n          <Form.Text>\n            <a href=\"/forgot_password\">Forgot Password?</a>\n          </Form.Text>\n        </Form>\n      )}\n    </Formik>\n  </>\n}\n\nexport default Login;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAApCAYAAACyXOB4AAAACXBIWXMAAC4jAAAuIwF4pT92AAACgElEQVRYhcVYi3HbMAx9zWUAbVB2A3WCqBt4BHeDZAN3A3UDdQN3gqobKBuoGzgToMccmGNg8E+3707nCw3CT098ABQQUY/rREQ7EU098rUmGIloo/eYiWj4X6ROFMaFiA7/ktTEjyoH5xrVSoIHfjSlKFbtFuqEYFUzPUgNnKwXrGqPLaQOnOQWWGOqaYumszohBFWTC4+V6pzZBLJm5WDlendFyvCXNZjFjdUa4uSTqlWHeJ9/NqbKPA5WaXMHYAWwoxw/ARjedQZAAH5V5PFh81x82WNtQ6pzaDyDmkJj6KBrDdaHs3LP+nVKuS+mmtvcq35t0nU5xdOp5jbX9j4NV+rU9L6xQ++jVCV3112mK6w7twZXvQB4AjBlOT3BWspcc56kOmNqlEmRIm9aKJ0ctN7mDNR0pshLJmfvmGpydpLzWBOpmd7f4S6kl6rJKVNz7B4qBaXuk3VLzt6WyKKsScfKmCZSAyeUZ+YYiJVnrmhOzyUVO0e+u46B74veaEpJOSXk7OUOrlxPzuPalVs8fVy4CD5xUdTwDOAzgLmm0taQcpiZ3LNY/w5gbOkAH16fYTsMtw9TOTDehFRXxB6fKfyhkvhobIzUAuCQ+SMTx+di4T06ArZ0byV7po1dKcgpkC73Goq5F5IavgOn0Ee+q9WbqS6eOoad9sBrM/+9cpxzoF0bRO4Hjt849/rGxGM4JmalTVRm2XYk/BZ0TMQusYoeIiYJpYhpPTGUe5Gx2jPV3mRi/2CVOEditRePq5vV3Dfyp99ChojrHF4SsX7uP8raGzRS9vB+489PAH5oG73Y3wC+MJmviRrkctt8wdxaRS9pFaVtxRJ37tUB4C/qIaI0IJ17gwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { ArrowForward } from '@material-ui/icons';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport {APP_NAME} from '../utils/utils';\n\nimport TransparentLogoIcon from \"../img/innexgo_transparent_icon.png\"\n\nclass SimpleLayout extends React.Component {\n  render() {\n    return (\n      <Container fluid>\n        <Row style={{ minHeight: \"100vh\" }}>\n          <Col md=\"2\" className=\"px-3 py-3\" style={{ backgroundColor: '#990000ff' }}>\n            <a href=\"/\"><img src={TransparentLogoIcon} alt=\"Application Icon\" /></a>\n            <h4 className=\"text-light\">{APP_NAME}</h4>\n            <a href=\"/\" className=\"text-light\">\n              <ArrowForward />Home\n            </a>\n            <br />\n            <a href=\"/dashboard\" className=\"text-light\">\n              <ArrowForward />Log In\n            </a>\n            <br />\n            <a href=\"/register\" className=\"text-light\">\n              <ArrowForward />Register\n            </a>\n            <br />\n            <a href=\"/instructions\" className=\"text-light\">\n              <ArrowForward />Instructions\n            </a>\n            <br />\n            <a href=\"/terms_of_service\" className=\"text-light\">\n              <ArrowForward />Terms of Service\n            </a>\n            <br />\n          </Col>\n          <Col className=\"px-3 py-3\">\n            {this.props.children}\n          </Col>\n        </Row>\n      </Container>\n    )\n  }\n}\n\nexport default SimpleLayout;\n","import React from \"react\";\nimport Login from \"../components/Login\";\nimport SimpleLayout from \"../components/SimpleLayout\";\nimport {Card} from \"react-bootstrap\";\nimport { RouteProps } from \"react-router\";\nimport { Route } from \"react-router-dom\";\n\n\ninterface AuthenticatedRouteProps extends Omit<RouteProps, 'component'> {\n  component: React.ComponentType<AuthenticatedComponentProps>\n  apiKey: ApiKey | null,\n  setApiKey: (data: ApiKey | null) => void\n}\n\nfunction AuthenticatedRoute({\n  component: AuthenticatedComponent,\n  apiKey,\n  setApiKey,\n  ...rest\n}: AuthenticatedRouteProps) {\n\n  const isAuthenticated = apiKey !== null &&\n    apiKey.creationTime + apiKey.duration > Date.now() &&\n    apiKey.apiKeyKind !== \"CANCEL\";\n\n  return (\n    <Route {...rest} >\n      {isAuthenticated\n        ? <AuthenticatedComponent apiKey={apiKey!} setApiKey={setApiKey} />\n        : <SimpleLayout>\n          <div className=\"h-100 w-100 d-flex\">\n            <Card className=\"mx-auto my-auto\">\n              <Card.Body>\n                <Card.Title>Login</Card.Title>\n                <Login onSuccess={x => setApiKey(x)} />\n              </Card.Body>\n            </Card>\n          </div>\n        </SimpleLayout>\n      }\n    </Route>\n  );\n}\n\nexport default AuthenticatedRoute;\n","import React from 'react';\nimport { Menu } from '@material-ui/icons';\nimport { Navbar, Nav } from 'react-bootstrap';\nimport { APP_NAME } from '../utils/utils';\n\n// Bootstrap CSS & JS\nimport '../style/dashboard.scss';\nimport 'bootstrap/dist/js/bootstrap.js';\nimport 'popper.js/dist/popper.js';\n\nimport innexgo_logo from '../img/innexgo_transparent_icon.png';\n\n\ninterface ExternalHeaderProps {\n  title: string;\n  fixed: boolean;\n  transparentTop: boolean;\n}\n\ninterface ExternalHeaderState {\n  scroll: number;\n}\n\nclass ExternalHeader extends React.Component<ExternalHeaderProps, ExternalHeaderState> {\n\n  constructor(props: ExternalHeaderProps) {\n    super(props);\n    this.state = {\n      scroll: 0,\n    };\n  }\n\n  listenToScroll = () => {\n    const winScroll =\n      document.body.scrollTop || document.documentElement.scrollTop\n\n    const height =\n      document.documentElement.scrollHeight -\n      document.documentElement.clientHeight\n\n    const scrolled = winScroll / height\n\n    this.setState({\n      scroll: scrolled,\n    })\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.listenToScroll)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.listenToScroll)\n  }\n\n  render() {\n    const topTransparent = this.state.scroll === 0 && this.props.transparentTop;\n\n    const navStyle = topTransparent ? {\n      transitionDuration: \"0.4s\"\n    } : {\n      transitionDuration: \"0.4s\",\n      backgroundColor: \"#fff\"\n    };\n    const linkStyle = topTransparent ? {\n      color: \"white\",\n    } : {\n      color: \"#000\"\n    }\n\n    return (\n      <header>\n        <nav style={navStyle} className={\"navbar navbar-expand-lg py-3\" + (this.props.fixed ? \" fixed-top\" : \"\")}>\n          <div className=\"container\">\n            <a style={linkStyle} className=\"navbar-brand font-weight-bold\" href=\"/\">{this.props.title}</a>\n            <button className=\"navbar-toggler navbar-toggler-right\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\">\n              <Menu style={linkStyle} />\n            </button>\n            <div className=\"collapse navbar-collapse\"\n              id=\"navbarSupportedContent\">\n              <div className=\"navbar-nav ml-auto\">\n                <a style={linkStyle} className=\"nav-item nav-link font-weight-bold\" href=\"/instructions\">Instructions</a>\n                <a style={linkStyle} className=\"nav-item nav-link font-weight-bold\" href=\"/dashboard\">Login</a>\n                <a style={linkStyle} className=\"nav-item nav-link font-weight-bold\" href=\"/register\">Register</a>\n              </div>\n            </div>\n          </div>\n        </nav>\n      </header>\n    );\n  }\n}\n\ninterface ExternalLayoutProps {\n  fixed: boolean;\n  transparentTop: boolean;\n}\n\nclass ExternalLayout extends React.Component<ExternalLayoutProps> {\n  render() {\n\n    // TODO lets make this look better\n\n    return (\n      <>\n        <ExternalHeader fixed={this.props.fixed} transparentTop={this.props.transparentTop} title={APP_NAME} />\n        {this.props.children}\n        <Navbar bg=\"dark\" variant=\"dark\">\n          <Navbar.Brand href=\"#home\">\n            <img\n              alt={`${APP_NAME} Logo`}\n              src={innexgo_logo}\n              width=\"30\"\n              height=\"30\"\n              className=\"d-inline-block align-top\"\n            />{' '}\n            {APP_NAME}\n          </Navbar.Brand>\n          <Nav className=\"mr-auto\">\n            <Nav.Link>&copy; {APP_NAME}, 2021</Nav.Link>\n          </Nav>\n        </Navbar>\n      </>\n    )\n  }\n}\n\nexport default ExternalLayout;\n","import React from 'react';\n\ntype SectionProps = {\n  id: string\n  name: string\n}\n\nconst Section: React.FunctionComponent<SectionProps> = props => {\n  return <section style={{\n    position: \"relative\",\n  }}>\n    <span\n      id={props.id}\n      style={{\n        position: \"absolute\",\n        top: \"-100px\",\n        visibility: \"hidden\",\n      }}></span>\n    <div className=\"clearfix\">\n      <h2 style={{display: \"inline\", float: \"left\"}}>{props.name}</h2>\n      <a href={`#${props.id}`} className=\"float-right text-muted\"><h3>#</h3></a>\n    </div>\n    {props.children}\n  </section>\n}\n\nexport default Section;\n","import { Jumbotron, Container} from 'react-bootstrap';\n\nimport ExternalLayout from '../components/ExternalLayout';\nimport Section from '../components/Section';\n\nimport {APP_NAME, APP_SLOGAN} from '../utils/utils';\n\nfunction Home() {\n\n  const jumboStyle = {\n    height: \"60vh\",\n    alignItems: \"center\",\n    backgroundAttachment: \"fixed\",\n    backgroundPosition: \"center\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundSize: \"cover\",\n    display: \"flex\",\n    backgroundColor: \"#990000ff\",\n    justifyContent: \"center\"\n  };\n\n\n  return (\n    <ExternalLayout fixed={true} transparentTop={true}>\n      <Jumbotron fluid style={jumboStyle}>\n        <h1 className=\"text-light\">{APP_SLOGAN}</h1>\n      </Jumbotron>\n      <Container>\n        <Section id=\"welcome\" name={`Welcome to ${APP_NAME}`}>\n          <div>\n            Welcome to {APP_NAME}, an application built for a class project, but an application designed for the\n            busiest of people. As students at UCLA, we know how frustrating it is to schedule classes,\n            clubs, and homework so we made this application to help all kinds of people efficiently plan their schedule. We invite you to join us\n            and be prepared for what the day has in store.\n            <a href=\"/register\">Register</a>\n          </div>\n        </Section>\n        <Section id=\"why_us\" name=\"Our Application\">\n          <div>\n            A scheduling app shouldn't have to take more than a few minutes to arrange the multiple events of your day; therefore, we use an algorithm modeled after simulated\n            annealing to choose the best fit for certain events around your Commitments (immovable events such as classes, interviews, work, etc.).\n            <br />\n            With all your events in one place, our application gives you a simple TO-DO feed to see what is upcoming in your schedule, allowing you to take a quick glance and\n            go back to working efficiently.\n          </div>\n        </Section>\n        <Section id=\"aboutCreators\" name=\"About the Creators\">\n          <div>\n            Govind Pimpale: I am a 1st year Computer Science major who is interested in working for startup companies after school\n            <br />\n            Edmund Yim: I am a 3rd year Computer Science and Engineering major interested in working as a software engineer after UCLA.\n            <br />\n            Brandon Le: TODO\n            <br />\n            Edgar Hukassian: I am a 3rd Year Computer Science Major interested in working as a software engineer after school.\n            <br />\n            Warren Pagsuguiron: I am a 4th year Electrical Engineering major who is also passionate about Computer Science. After UCLA, I plan on working on robotics.\n          </div>\n        </Section>\n        <Section id=\"specialThanks\" name=\"Special Thanks\">\n          <div>\n            We want to thank Professor Eggert & the Language and Teaching Assistants of Winter 2021 CS 97 for their hard-work during the quarter.\n            <a href=\"/register\">Register</a>\n          </div>\n        </Section>\n      </Container>\n    </ExternalLayout>\n  )\n}\n\nexport default Home;\n","import React from 'react';\nimport SimpleLayout from '../components/SimpleLayout';\nimport Section from '../components/Section';\n\nfunction Instructions() {\n  return <SimpleLayout>\n    <section>\n      \n    </section>\n  </SimpleLayout>\n}\n\nexport default Instructions;\n","import React from 'react';\nimport SimpleLayout from '../components/SimpleLayout';\nimport Section from '../components/Section';\n\nfunction About() {\n  return <SimpleLayout>\n    <section>\n      <h2>Our Product</h2>\n      <p>\n        We have designed a state-of-the-art calendar that also doubles as a to-do app. Now there is no need for multiple apps for calendars and lists when we have the perfect\n        solution for you, our all-in-one scheduler: \"The insert our name here\". Perfect for work. Perfect for students. Perfect for everyday users that need to find the extra\n        time in their day.\n      </p>\n      <br />\n      <h2>What Our Product Does</h2>\n      <p>\n        Our web-based application allows you to efficiently schedule your commitments from the day-to-day, week-to-week, and month-to-month. We know how hectic and convoluted\n        life can be so we designed this scheduler to make it easy on our users.\n      </p>\n      <h4>Commitments</h4>\n      <p>\n        As students, we understand that there are immovable events in our day-to-day activities that prevent us from doing other things and so we have implemented a feature\n        for our users to easily input these types of Commitments.\n      </p>\n      <h4>Automatic Scheduling</h4>\n      <p>\n        Our automatic scheduling algorithm allows events to be appropriately placed in the day and respects the Commitments you have in place. This algorithm can schedule\n        your recurring tasks and appropriately place them to where it seems best fit. Of course, you can always rearrange the tasks placed for you by dragging them arround\n        the calendar.\n      </p>\n      <h4>To-Do Feed</h4>\n      <p>\n        As a result of your Commitments and scheduled events, we have designed a To-Do feed that chronoligically lists out your tasks. This tool allows you to easly view your\n        activities and remind you of upcoming events.\n      </p>\n      <h4>Short Term Goal Manager</h4>\n      <p>\n        On the go and need to quickly add something to your calendar? We got you! Our application also works from your phones. With this in mind, we have also made it\n        possible to add Goals that can be done in your off-times or be pushed later in the day or week. We have also made it possible to break tasks into subgoals for\n        planning to be easier.\n      </p>\n      <br />\n      <h3>Technologies Used For This Product</h3>\n      <p>\n        In building our application, we used various programming languages: TypeScript, Java, JavaScript, React, HTML, CSS, and SQL.\n      </p>\n    </section>\n  </SimpleLayout>\n}\n\nexport default About;\n","\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\n// Bootstrap CSS & JS\nimport '../style/dashboard.scss';\nimport 'bootstrap/dist/js/bootstrap';\nimport 'popper.js/dist/popper';\n\nfunction Error404() {\n  return (\n    <div style={{\n      display: \"flex\",\n      height: \"100vh\",\n      width: \"100vw\"\n    }}>\n      <div className=\"my-auto mx-auto text-center\">\n        <h1>404 Error.</h1>\n        <h5>Page Not Found</h5>\n        <Link to=\"/\">Return Home</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default Error404\n","import React from 'react';\nimport { Button, Form } from 'react-bootstrap'\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { newVerificationChallenge, isApiErrorCode, isPasswordValid } from '../utils/utils';\n\ntype RegisterFormProps = {\n  onSuccess: () => void\n}\n\nfunction RegisterForm(props: RegisterFormProps) {\n\n  type RegistrationValue = {\n    name: string,\n    email: string,\n    password1: string,\n    password2: string,\n    terms: boolean,\n  }\n\n  const onSubmit = async (values: RegistrationValue, fprops: FormikHelpers<RegistrationValue>) => {\n    // Validate input\n    let errors: FormikErrors<RegistrationValue> = {};\n    let hasError = false;\n    if (values.name === \"\") {\n      errors.name = \"Please enter what you'd like us to call you.\";\n      hasError = true;\n    }\n    if (!values.email.includes(\"@\")) {\n      errors.email = \"Please enter your email\";\n      hasError = true;\n    }\n    if (!isPasswordValid(values.password1)) {\n      errors.password1 = \"Password must have at least 8 chars and 1 number\";\n      hasError = true;\n    }\n    if (values.password2 !== values.password1) {\n      errors.password2 = \"Password does not match\";\n      hasError = true;\n    }\n    if (!values.terms) {\n      errors.terms = \"You must agree to the terms and conditions\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const maybeVerificationChallenge = newVerificationChallenge({\n      userName: values.name,\n      userEmail: values.email,\n      userPassword: values.password1,\n    });\n\n    if (isApiErrorCode(maybeVerificationChallenge)) {\n      // otherwise display errors\n      switch (maybeVerificationChallenge) {\n        case \"USER_EMAIL_EMPTY\": {\n          fprops.setErrors({\n            email: \"No such user exists\"\n          });\n          break;\n        }\n        case \"USER_NAME_EMPTY\": {\n          fprops.setErrors({\n            name: \"Please enter what you'd like us to call you.\"\n          });\n          break;\n        }\n        case \"USER_EXISTENT\": {\n          fprops.setErrors({\n            email: \"A user with this email already exists.\"\n          });\n          break;\n        }\n        case \"PASSWORD_INSECURE\": {\n          fprops.setErrors({\n            password1: \"Password is of insufficient complexity\"\n          });\n          break;\n        }\n        case \"EMAIL_RATELIMIT\": {\n          fprops.setErrors({\n            email: \"Please wait 5 minutes before sending another email.\"\n          });\n          break;\n        }\n        case \"EMAIL_BLACKLISTED\": {\n          fprops.setErrors({\n            email: \"This email address is not permitted to make an account.\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureMessage: \"An unknown or network error has occured while trying to register.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureMessage: \"\",\n      successMessage: \"We've sent an email to verify your address.\"\n    });\n    // execute callback\n    props.onSuccess();\n  }\n  const normalizeInput = (e: string) => e.replace(/[^A-Za-z0-9]+/g, \"\");\n\n  return (\n    <Formik\n      onSubmit={onSubmit}\n      initialStatus={{\n        failureMessage: \"\",\n        successMessage: \"\",\n      }}\n      initialValues={{\n        name: \"\",\n        email: \"\",\n        password1: \"\",\n        password2: \"\",\n        terms: false,\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successMessage !== \"\"}>\n            <Form.Group >\n              <Form.Label >Name</Form.Label>\n              <Form.Control\n                name=\"name\"\n                type=\"text\"\n                placeholder=\"Name\"\n                value={fprops.values.name}\n                onChange={e => fprops.setFieldValue(\"name\", normalizeInput(e.target.value))}\n                isInvalid={!!fprops.errors.name}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group >\n              <Form.Label >Email</Form.Label>\n              <Form.Control\n                name=\"email\"\n                type=\"email\"\n                placeholder=\"Email\"\n                value={fprops.values.email}\n                onChange={fprops.handleChange}\n                isInvalid={!!fprops.errors.email}\n              />\n              <Form.Control.Feedback type=\"invalid\"> {fprops.errors.email} </Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group >\n              <Form.Label >Password</Form.Label>\n              <Form.Control\n                name=\"password1\"\n                type=\"password\"\n                placeholder=\"Password\"\n                value={fprops.values.password1}\n                onChange={fprops.handleChange}\n                isInvalid={!!fprops.errors.password1}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.password1}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group >\n              <Form.Label >Confirm Password</Form.Label>\n              <Form.Control\n                name=\"password2\"\n                type=\"password\"\n                placeholder=\"Confirm Password\"\n                value={fprops.values.password2}\n                onChange={fprops.handleChange}\n                isInvalid={!!fprops.errors.password2}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.password2}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Check>\n              <Form.Check.Input\n                name=\"terms\"\n                checked={fprops.values.terms}\n                onChange={fprops.handleChange}\n                isInvalid={!!fprops.errors.terms}\n              />\n              <Form.Check.Label> Agree to <a target=\"_blank\" rel=\"noopener noreferrer\"  href=\"/terms_of_service\">terms of service</a></Form.Check.Label>\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.terms}</Form.Control.Feedback>\n            </Form.Check>\n            <br />\n            <Button type=\"submit\">Submit Form</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureMessage}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successMessage}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  );\n}\n\nexport default RegisterForm;\n","import React from 'react';\r\nimport { Card} from 'react-bootstrap'\r\n\r\nimport RegisterForm from '../components/RegisterForm';\r\nimport SimpleLayout from '../components/SimpleLayout';\r\n\r\nfunction Register() {\r\n  const [successful, setSuccess] = React.useState(false);\r\n  return (\r\n    <SimpleLayout>\r\n      <div className=\"h-100 w-100 d-flex\">\r\n        <Card className=\"mx-auto my-auto\">\r\n          <Card.Body>\r\n            <Card.Title>Register</Card.Title>\r\n            {successful\r\n              ? <> We've sent an email to verify your address. </>\r\n              : <RegisterForm onSuccess={() => setSuccess(true)} />\r\n            }\r\n          </Card.Body>\r\n        </Card>\r\n      </div>\r\n    </SimpleLayout>\r\n  )\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Card, Button, Form } from \"react-bootstrap\";\r\nimport SimpleLayout from '../components/SimpleLayout';\r\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\r\nimport { newUser, isApiErrorCode } from '../utils/utils';\r\n\r\ntype CreateUserProps = {\r\n  verificationChallengeKey: string;\r\n  postSubmit: (user:User) => void;\r\n}\r\n\r\nfunction CreateUser(props: CreateUserProps) {\r\n  type CreateUserValue = {}\r\n\r\n  const onSubmit = async (values: CreateUserValue,\r\n    fprops: FormikHelpers<CreateUserValue>) => {\r\n\r\n    let errors: FormikErrors<CreateUserValue> = {};\r\n\r\n    // Validate input\r\n\r\n    let hasError = false;\r\n    fprops.setErrors(errors);\r\n    if (hasError) {\r\n      return;\r\n    }\r\n\r\n    const maybeUser = await newUser({\r\n      verificationChallengeKey: props.verificationChallengeKey,\r\n    });\r\n\r\n    if (isApiErrorCode(maybeUser)) {\r\n      switch (maybeUser) {\r\n        case \"VERIFICATION_CHALLENGE_NONEXISTENT\": {\r\n          fprops.setStatus({\r\n            failureResult: \"This registration link is invalid.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n        case \"VERIFICATION_CHALLENGE_TIMED_OUT\": {\r\n          fprops.setStatus({\r\n            failureResult: \"This registration link has timed out.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n        case \"USER_EXISTENT\": {\r\n          fprops.setStatus({\r\n            failureResult: \"This user already exists.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n        default: {\r\n          fprops.setStatus({\r\n            failureResult: \"An unknown or network error has occured while trying to register.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    fprops.setStatus({\r\n      failureResult: \"\",\r\n      successResult: \"User Created\"\r\n    });\r\n    // execute callback\r\n    props.postSubmit(maybeUser);\r\n  }\r\n\r\n  return <>\r\n    <Formik<CreateUserValue>\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        name: \"\",\r\n      }}\r\n      initialStatus={{\r\n        failureResult: \"\",\r\n        successResult: \"\"\r\n      }}\r\n    >\r\n      {(fprops) => <>\r\n        <Form\r\n          noValidate\r\n          onSubmit={fprops.handleSubmit} >\r\n          <div hidden={fprops.status.successResult !== \"\"}>\r\n            <Button type=\"submit\">Complete Registration</Button>\r\n            <br />\r\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\r\n          </div>\r\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\r\n        </Form>\r\n      </>}\r\n    </Formik>\r\n  </>\r\n}\r\n\r\n\r\nfunction RegisterConfirm() {\r\n\r\n  const [user, setUser] = React.useState<User|null>(null);\r\n\r\n  return (\r\n    <SimpleLayout>\r\n      <div className=\"h-100 w-100 d-flex\">\r\n        <Card className=\"mx-auto my-auto\">\r\n          <Card.Body>\r\n            <Card.Title>Complete Account Registration</Card.Title>\r\n            {\r\n              user !== null\r\n                ? <Card.Text> Your account ({user.email}), has been created. Click <a href=\"/\">here</a> to login.</Card.Text>\r\n                : <CreateUser\r\n                  verificationChallengeKey={new URLSearchParams(window.location.search).get(\"verificationChallengeKey\") ?? \"\"}\r\n                  postSubmit={(u:User) => setUser(u)}\r\n                />\r\n            }\r\n          </Card.Body>\r\n        </Card>\r\n      </div>\r\n    </SimpleLayout>\r\n  )\r\n}\r\n\r\nexport default RegisterConfirm;\r\n","import React from 'react';\nimport { Formik, FormikHelpers } from 'formik'\nimport { Button, Card, Form, } from 'react-bootstrap'\nimport { newPasswordReset, isApiErrorCode } from '../utils/utils';\n\nimport SimpleLayout from '../components/SimpleLayout';\n\ntype ForgotPasswordFormProps = {\n  onSuccess: ()=>void;\n}\n\nfunction ForgotPasswordForm(props:ForgotPasswordFormProps) {\n\n  type ForgotPasswordValue = {\n    email: string,\n  }\n\n  const onSubmit = async (values: ForgotPasswordValue, { setErrors, setStatus }: FormikHelpers<ForgotPasswordValue>) => {\n    // Validate input\n    if (values.email === \"\") {\n      setErrors({ email: \"Please enter your email\" });\n      return;\n    }\n\n    // Now send request\n    const maybePasswordResetKey = await newPasswordReset({\n      userEmail: values.email\n    });\n\n    if (isApiErrorCode(maybePasswordResetKey)) {\n      switch (maybePasswordResetKey) {\n        case \"USER_NONEXISTENT\": {\n          setErrors({ email: \"No such user exists.\" });\n          break;\n        }\n        case \"EMAIL_RATELIMIT\": {\n          setErrors({ email: \"Please wait 5 minutes before sending another email.\" });\n          break;\n        }\n        case \"EMAIL_BLACKLISTED\": {\n          setErrors({ email: \"This email address has been blacklisted.\" });\n          break;\n        }\n        default: {\n          setStatus({\n            failureMessage: \"An unknown or network error has occured while trying to reset the password.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    } else {\n      setStatus({\n        failureMessage: \"\",\n        successMessage: \"A reset email has been sent.\"\n      });\n      props.onSuccess();\n    }\n  }\n\n  return (\n    <Formik\n      onSubmit={onSubmit}\n      initialValues={{\n        email: \"\",\n      }}\n      initialStatus={{\n        failureMessage: \"\",\n        successMessage: \"\"\n      }}\n    >\n      {(props) => (\n        <Form\n          noValidate\n          onSubmit={props.handleSubmit} >\n          <Form.Group >\n            <Form.Label>Email</Form.Label>\n            <Form.Control\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"Email\"\n              value={props.values.email}\n              onChange={props.handleChange}\n              isInvalid={!!props.errors.email}\n            />\n            <Form.Control.Feedback type=\"invalid\"> {props.errors.email} </Form.Control.Feedback>\n          </Form.Group>\n          <br />\n          <Button type=\"submit\">Submit</Button>\n          <br />\n          <Form.Text className=\"text-danger\">{props.status.failureMessage}</Form.Text>\n          <Form.Text className=\"text-success\">{props.status.successMessage}</Form.Text>\n        </Form>\n      )}\n    </Formik>\n  )\n}\n\nfunction ForgotPassword() {\n  const [successful, setSuccess] = React.useState(false);\n  return <SimpleLayout>\n    <div className=\"h-100 w-100 d-flex\">\n      <Card className=\"mx-auto my-auto\">\n        <Card.Body>\n          <Card.Title>Send Reset Password Email</Card.Title>\n            {successful\n              ? <Form.Text className=\"text-success\">We've sent an email to reset your password.</Form.Text>\n              : <ForgotPasswordForm onSuccess={() => setSuccess(true)} />\n            }\n        </Card.Body>\n      </Card>\n    </div>\n  </SimpleLayout>\n}\n\nexport default ForgotPassword;\n","import React from 'react';\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Card, Button, Form, } from 'react-bootstrap'\nimport { newResetPassword, isPasswordValid, isApiErrorCode } from '../utils/utils';\n\nimport SimpleLayout from '../components/SimpleLayout';\n\ninterface ResetPasswordProps {\n  resetKey: string,\n  onSuccess: () => void\n}\n\nfunction ResetPasswordForm(props: ResetPasswordProps) {\n  type ResetPasswordValue = {\n    password1: string,\n    password2: string,\n  }\n\n  const onSubmit = async (values: ResetPasswordValue, { setStatus, setErrors }: FormikHelpers<ResetPasswordValue>) => {\n    // Validate input\n    let errors: FormikErrors<ResetPasswordValue> = {};\n    let hasError = false;\n    if (!isPasswordValid(values.password1)) {\n      errors.password1 = \"Password must have at least 8 chars and 1 number\";\n      hasError = true;\n    }\n    if (values.password2 !== values.password1) {\n      errors.password2 = \"Password does not match.\";\n      hasError = true;\n    }\n    setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const passwordResetResult = await newResetPassword({\n      passwordResetKey: props.resetKey,\n      newPassword: values.password1,\n    });\n    if (isApiErrorCode(passwordResetResult)) {\n      switch (passwordResetResult) {\n        case \"OK\": {\n          setStatus({\n            failureMessage: \"\",\n            successMessage: \"Password successfully changed.\"\n          });\n          break;\n        }\n        case \"PASSWORD_RESET_NONEXISTENT\": {\n          setStatus({\n            failureMessage: \"Invalid password reset link.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n        case \"PASSWORD_RESET_TIMED_OUT\": {\n          setStatus({\n            failureMessage: \"Password reset link timed out.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n        case \"PASSWORD_EXISTENT\": {\n          setStatus({\n            failureMessage: \"Password reset link may only be used once.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n        case \"PASSWORD_INSECURE\": {\n          setErrors({\n            password1: \"Password is of insufficient complexity\"\n          });\n          break;\n        }\n        default: {\n          setStatus({\n            failureMessage: \"An unknown or network error has occured while trying to reset password.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n      }\n    } else {\n      props.onSuccess();\n    }\n  }\n  return <>\n    <Formik<ResetPasswordValue>\n      onSubmit={onSubmit}\n      initialStatus={{\n        successMessage: \"\",\n        failureMessage: \"\",\n      }}\n      initialValues={{\n        password1: \"\",\n        password2: \"\",\n      }}\n    >\n      {(props) => (\n        <Form\n          noValidate\n          onSubmit={props.handleSubmit} >\n          <Form.Group >\n            <Form.Label >New Password</Form.Label>\n            <Form.Control\n              name=\"password1\"\n              type=\"password\"\n              placeholder=\"New Password\"\n              value={props.values.password1}\n              onChange={props.handleChange}\n              isInvalid={!!props.errors.password1}\n            />\n            <Form.Control.Feedback type=\"invalid\"> {props.errors.password1} </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group >\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              name=\"password2\"\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              value={props.values.password2}\n              onChange={props.handleChange}\n              isInvalid={!!props.errors.password2}\n            />\n            <Form.Control.Feedback type=\"invalid\">{props.errors.password2}</Form.Control.Feedback>\n          </Form.Group>\n          <br />\n          <Button type=\"submit\">Reset Password</Button>\n          <br />\n          <Form.Text className=\"text-danger\">{props.status.failureMessage}</Form.Text>\n          <Form.Text className=\"text-success\">{props.status.successMessage}</Form.Text>\n        </Form>\n      )}\n    </Formik>\n  </>\n}\n\nfunction ResetPassword() {\n  // get password reset key from url\n  const resetKey = new URLSearchParams(window.location.search).get(\"resetKey\") ?? \"\";\n  const [successful, setSuccess] = React.useState(false);\n  return <SimpleLayout>\n    <div className=\"h-100 w-100 d-flex\">\n      <Card className=\"mx-auto my-auto\">\n        <Card.Body>\n          <Card.Title>Reset Password</Card.Title>\n          {successful\n            ? <Form.Text className=\"text-success\">Password changed successfully</Form.Text>\n            : <ResetPasswordForm resetKey={resetKey} onSuccess={() => setSuccess(true)} />\n          }\n        </Card.Body>\n      </Card>\n    </div>\n  </SimpleLayout>\n}\n\nexport default ResetPassword;\n","import React from 'react';\n\nfunction Loader() {\n  return (\n    <div className=\"d-flex justify-content-center\">\n      <div className=\"spinner-border\" role=\"status\">\n        <span className=\"sr-only\"></span>\n      </div>\n    </div>);\n}\n\nexport default Loader;\n","import React from 'react';\nimport { SvgIconComponent, ExitToApp, Menu } from '@material-ui/icons';\n\n// Bootstrap CSS & Js\nimport '../style/dashboard.scss';\n\nconst iconStyle = {\n  width: \"2rem\",\n  height: \"2rem\",\n};\n\nconst InnerLayoutContext = React.createContext<boolean>(true)\n\ninterface SidebarEntryProps {\n  label: string,\n  icon: SvgIconComponent,\n  href: string,\n}\n\nconst SidebarEntry: React.FunctionComponent<SidebarEntryProps> = props => {\n  const style = {\n    color: \"#fff\"\n  }\n  const Icon = props.icon;\n  if (React.useContext(InnerLayoutContext)) {\n    // collapsed\n    return <a style={style} className=\"nav-item nav-link\" href={props.href}>\n      <Icon style={iconStyle} />\n    </a>\n  } else {\n    // not collapsed\n    return <a style={style} className=\"nav-item nav-link\" href={props.href}>\n      <Icon style={iconStyle} /> {props.label}\n    </a>\n  }\n}\n\nconst Body: React.FunctionComponent = props => <> {props.children} </>\n\ninterface InnerLayoutComposition {\n  SidebarEntry: React.FunctionComponent<SidebarEntryProps>\n  Body: React.FunctionComponent \n}\n\ninterface InnerLayoutProps {\n  name: string\n  logoutCallback: () => void\n}\n\nconst InnerLayout: React.FunctionComponent<React.PropsWithChildren<InnerLayoutProps>> & InnerLayoutComposition =\n  props => {\n    let [collapsed, setCollapsed] = React.useState<boolean>(true);\n\n    const widthrem = collapsed ? 4 : 15;\n\n    const sidebarStyle = {\n      height: \"100%\",\n      width: `${widthrem}rem`,\n      position: \"fixed\" as const,\n      top: 0,\n      left: 0,\n      overflowX: \"hidden\" as const,\n      overflowY: \"hidden\" as const,\n      margin: \"0%\"\n    };\n\n    const sidebarBottom = {\n      position: 'absolute' as const,\n      bottom: 0,\n      right: 0,\n      left: 0,\n    };\n\n    let sidebarChildren: React.ReactElement[] = [];\n    let nonSidebarChildren: React.ReactNode[] = [];\n\n    React.Children.forEach(props.children, child => {\n      if (React.isValidElement(child)) {\n        if (child.type === SidebarEntry) {\n          sidebarChildren.push(child);\n        } else if (child.type === Body) {\n          nonSidebarChildren.push(child);\n        }\n      }\n    });\n\n    return (\n      <InnerLayoutContext.Provider value={collapsed}>\n        <div>\n          <nav className=\"bg-dark text-light\" style={sidebarStyle}>\n            <div className=\"nav-item nav-link\">\n            <Menu style={iconStyle} onClick={_ => setCollapsed(!collapsed)} />\n            </div>\n            {\n              collapsed\n                ? \"\"\n                : <div className=\"nav-item nav-link mx-auto my-3\">\n                  <h6>Welcome, {props.name}</h6>\n                </div>\n            }\n            {sidebarChildren}\n            <div style={sidebarBottom}>\n              <button\n                style={{ color: \"#fff\" }}\n                type=\"button\"\n                className=\"btn nav-item nav-link\"\n                onClick={() => props.logoutCallback()}\n              >\n                <ExitToApp style={iconStyle} /> {collapsed ? \"\" : \"Log Out\"}\n              </button>\n            </div>\n          </nav>\n          <div style={{ marginLeft: `${widthrem}rem` }}>\n            {nonSidebarChildren}\n          </div>\n        </div>\n      </InnerLayoutContext.Provider>\n    )\n  }\n\nInnerLayout.SidebarEntry = SidebarEntry;\nInnerLayout.Body = Body;\n\nexport default InnerLayout;\n","import React from 'react';\nimport { Dashboard, Event, Settings, Search } from '@material-ui/icons';\n\nimport InnerLayout from '../components/InnerLayout';\n\nexport default function DashboardLayout(props: React.PropsWithChildren<AuthenticatedComponentProps>) {\n  return <InnerLayout name={props.apiKey.creator.name} logoutCallback={() => props.setApiKey(null)} >\n    <InnerLayout.SidebarEntry label=\"Dashboard\" icon={Dashboard} href=\"/dashboard\" />\n    <InnerLayout.SidebarEntry label=\"Calendar\" icon={Event} href=\"/calendar\" />\n    <InnerLayout.SidebarEntry label=\"Search\" icon={Search} href=\"/search\" />\n    <InnerLayout.SidebarEntry label=\"Settings\" icon={Settings} href=\"/settings\" />\n    <InnerLayout.Body>\n      {props.children}\n    </InnerLayout.Body>\n  </InnerLayout>\n}\n","import React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { EventContentArg, EventInput } from \"@fullcalendar/react\"\n\nexport function goalDataToEvent(gd: GoalDataScheduled): EventInput {\n  return {\n    id: `GoalData:${gd.goalDataId}`,\n    start: new Date(gd.startTime),\n    end: new Date(gd.startTime + gd.duration),\n    color: \"#00000000\",\n    borderColor: \"#00000000\",\n    goalData: gd\n  }\n}\n\nexport function pastEventDataToEvent(ped: PastEventData): EventInput {\n  return {\n    id: `PastEventData:${ped.pastEventDataId}`,\n    start: new Date(ped.startTime),\n    end: new Date(ped.startTime + ped.duration),\n    color: \"#00000000\",\n    borderColor: \"#00000000\",\n    pastEventData: ped\n  }\n}\n\nexport function GoalCard(props: { goalData: GoalData }) {\n  return <Card className=\"px-1 py-1 h-100 w-100 bg-primary text-light overflow-hidden\">\n    {props.goalData.name}\n  </Card>\n}\n\n// PastEvent\nexport function PastEventCard(props: {\n  pastEventData: PastEventData\n}) {\n  return (\n    <Card className=\"px-1 py-1 h-100 w-100 bg-primary text-light overflow-hidden\" >\n      {props.pastEventData.name}\n    </Card>\n  )\n}\n\n\nfunction CalendarCard(eventInfo: EventContentArg) {\n  const props = eventInfo.event.extendedProps;\n  switch (eventInfo.event.id.split(':')[0]) {\n    case \"PastEventData\":\n      return <PastEventCard pastEventData={props.pastEventData} />\n    case \"GoalData\":\n      return <GoalCard goalData={props.goalData} />\n  }\n}\n\nexport default CalendarCard;\n","import React from 'react'\nimport Loader from '../components/Loader';\nimport { Async, AsyncProps } from 'react-async';\n\nimport FullCalendar from '@fullcalendar/react'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin from '@fullcalendar/interaction'\nimport CalendarCard from '../components/CalendarCard';\nimport { viewTimeUtilityFunctionPoint, viewGoalData, newScheduledGoalData, newTimeUtilityFunction, isApiErrorCode, assert, INT_MAX, findLastIndex } from '../utils/utils';\n\n\ntype SolverDataPoint = {\n  startTime: number,\n  utils: number\n}\n\ntype SolverGoalData = {\n  data: GoalDataScheduled,\n  tuf: SolverDataPoint[],\n  startTime: number,\n  duration: number,\n}\n\ntype CalendarSolverProps = {\n  apiKey: ApiKey;\n  onHide: () => void;\n}\n\ntype ICalendarSolverProps = CalendarSolverProps & {\n  data: SolverGoalData[];\n}\n\nconst lerp = (a: SolverDataPoint, b: SolverDataPoint, startTime: number) => {\n  const t = (startTime - a.startTime) / (b.startTime - a.startTime);\n  return a.utils * (1 - t) + b.utils * t;\n}\n\n// this procedure uses the trapezoidal rule to integrate utility over the span\nconst sgdValue = (sgd: SolverGoalData) => {\n  let sum = 0;\n  // TODO use binary search for finding beginning index\n  assert(sgd.startTime > Math.min(...sgd.tuf.map(p=>p.startTime)),\n    \"sgd's start time must be greater than at least one point in tuf\")\n\n  assert(sgd.startTime + sgd.duration < Math.max(...sgd.tuf.map(p=>p.startTime)),\n    \"sgd's end time must be less than at least one point in tuf\")\n\n  // here, we interpolate a point we can begin integrating at\n  const fi = sgd.tuf.findIndex(p => p.startTime > sgd.startTime)\n  const ftr = {\n    startTime: sgd.startTime,\n    utils: lerp(sgd.tuf[fi - 1], sgd.tuf[fi], sgd.startTime)\n  };\n\n  // here, we interpolate the last point to integrate at\n  const sgdEnd = sgd.startTime + sgd.duration;\n  const li = findLastIndex(sgd.tuf, p => p.startTime < sgdEnd);\n  const ltr = {\n    startTime: sgdEnd,\n    utils: lerp(sgd.tuf[li], sgd.tuf[li + 1], sgdEnd)\n  };\n\n  // create a new array with all of our points.\n  // This will be simple to apply the trapezoidal rule to\n  const tuf = [ftr, ...sgd.tuf.slice(fi, li + 1), ltr];\n\n  // apply non-uniform trapezoidal rule\n  for (let i = 1; i < tuf.length; i++) {\n    const delta = tuf[i].startTime - tuf[i - 1].startTime;\n    const avg = (tuf[i].utils + tuf[i - 1].utils) / 2;\n    sum += avg * delta;\n  }\n\n  return sum;\n}\n\n// sum of all the sgd values\nconst expectedValue = (sgds: SolverGoalData[]) =>\n  sgds\n    .map(s => {console.log(s); return sgdValue(s)})\n    .reduce((accumulator, currentValue) => accumulator + currentValue, 0)\n\nconst neighbor = (sgds: SolverGoalData[]) => {\n  const index = Math.floor(Math.random() * sgds.length);\n  return sgds.map((gd, i) => ({\n    data: gd.data,\n    tuf: gd.tuf,\n    duration: gd.duration,\n    startTime: i === index\n      ? gd.startTime + (Math.random() - 0.5) * 10000000\n      : gd.startTime\n  }))\n}\n\n// our probability acceptance function\nconst pAccept = (ev: number, ev_new: number) => {\n  return ev_new >= ev\n}\n\nfunction ICalendarSolver(props: ICalendarSolverProps) {\n  const [iteration, setIteration] = React.useState(0);\n  const [iterating, setIterating] = React.useState(false);\n\n  React.useEffect(() => {\n    if (iterating) {\n      setTimeout(() => setIteration(iteration + 1), 100);\n    }\n  }, [iteration, iterating]);\n\n  // had problems with react going into infinite loops when using state\n  // therefore we're using ref again. later we might want to look into this.\n  // it works for now though\n  const dataRef = React.useRef<SolverGoalData[]>(props.data);\n\n  const data_new = neighbor(dataRef.current);\n  if (pAccept(expectedValue(dataRef.current), expectedValue(data_new))) {\n    dataRef.current = data_new;\n  }\n\n  return <>\n    <FullCalendar\n      plugins={[timeGridPlugin, interactionPlugin]}\n      customButtons={{\n        stop: {\n          text: \"Stop\",\n          click: () => setIterating(false)\n        },\n        start: {\n          text: \"Start\",\n          click: () => setIterating(true)\n        },\n        commit: {\n          text: 'Commit Changes',\n          click: async () => {\n            // for each element in the middle of the array:\n            for (const sgd of dataRef.current.slice(1, -1)) {\n              const maybeTimeUtilFunction = await newTimeUtilityFunction({\n                startTimes: sgd.tuf.map(p => Math.floor(p.startTime)),\n                utils: sgd.tuf.map(p => p.utils),\n                apiKey: props.apiKey.key,\n              })\n\n              // do better error handling later\n              if (isApiErrorCode(maybeTimeUtilFunction)) {\n                console.log(maybeTimeUtilFunction);\n                continue;\n              }\n\n              const maybeGoalData = await newScheduledGoalData({\n                goalId: sgd.data.goal.goalId,\n                name: sgd.data.name,\n                description: sgd.data.description,\n                durationEstimate: Math.floor(sgd.data.durationEstimate),\n                timeUtilityFunctionId: maybeTimeUtilFunction.timeUtilityFunctionId,\n                startTime: Math.floor(sgd.startTime),\n                duration: Math.floor(sgd.duration),\n                status: \"PENDING\",\n                apiKey: props.apiKey.key,\n              });\n            }\n            props.onHide();\n          }\n        },\n        cancel: {\n          text: 'Cancel Changes',\n          click: props.onHide\n        }\n      }}\n      headerToolbar={{\n        left: 'title prev,next today',\n        center: iterating ? 'stop' : 'start commit cancel',\n        right: 'timeGridDay,timeGridWeek',\n      }}\n      initialView='timeGridWeek'\n      height={\"auto\"}\n      datesSet={({ view }) => /* Keeps window size in sync */view.calendar.updateSize()}\n      allDaySlot={false}\n      slotDuration=\"00:30:00\"\n      nowIndicator={true}\n      editable={false}\n      selectable={false}\n      events={dataRef.current.map(gd => ({\n        id: `GoalData:${gd.data.goal.goalId}`,\n        start: new Date(gd.startTime),\n        end: new Date(gd.startTime + gd.duration),\n        color: \"#00000000\",\n        borderColor: \"#00000000\",\n        goalData: gd.data\n      }))}\n      eventContent={CalendarCard}\n    />\n  </>\n}\n\n\n\nconst loadSolverData = async (props: AsyncProps<SolverGoalData[]>) => {\n  const maybeGoalData = await viewGoalData({\n    creatorUserId: props.apiKey.creator.userId,\n    onlyRecent: true,\n    scheduled: true,\n    status: \"PENDING\",\n    apiKey: props.apiKey.key\n  });\n\n  if (isApiErrorCode(maybeGoalData)) {\n    throw Error;\n  }\n\n  return (\n    await Promise.all(\n      maybeGoalData\n        .filter((gd): gd is GoalDataScheduled => gd.scheduled)\n        .map(async goal => {\n          // load tuf\n          const maybeTuf = await viewTimeUtilityFunctionPoint({\n            timeUtilityFunctionId: goal.timeUtilityFunction.timeUtilityFunctionId,\n            apiKey: props.apiKey.key\n          });\n          // if there's an error return empty list (this will be filtered out)\n          if (isApiErrorCode(maybeTuf)) {\n            return []\n          }\n\n          // then return sgd\n          const tuf = maybeTuf === []\n            ? [{ startTime: 1, utils: 0 }]\n            : maybeTuf\n              .map(tufp => ({\n                startTime: tufp.startTime,\n                utils: tufp.utils\n              }))\n              .sort((a, b) => a.startTime - b.startTime);\n\n          return {\n            data: goal,\n            startTime: goal.startTime,\n            duration: goal.durationEstimate,\n            tuf: [\n              {\n                startTime: 0,\n                utils: tuf[0].utils\n              },\n              ...tuf,\n              {\n                startTime: INT_MAX,\n                utils: tuf[tuf.length - 1].utils\n              }\n            ]\n          }\n        })\n    )\n  ).flat();\n}\n\nfunction CalendarSolver(props: CalendarSolverProps) {\n  return <Async\n    promiseFn={loadSolverData}\n    apiKey={props.apiKey} >\n    {({ reload }) => <>\n      <Async.Pending><Loader /></Async.Pending>\n      <Async.Rejected>\n        <span className=\"text-danger\">An unknown error has occured.</span>\n      </Async.Rejected>\n      <Async.Fulfilled<SolverGoalData[]>>{sgds =>\n        <ICalendarSolver data={sgds} {...props} />\n      }</Async.Fulfilled>\n    </>\n    }\n  </Async>\n}\n\nexport default CalendarSolver;\n","import React from 'react';\nimport { OverlayTrigger, Card, CardProps } from 'react-bootstrap';\nimport { Help } from '@material-ui/icons';\n\ntype NoChildrenCardProps = Omit<CardProps, 'children'|'title'>\n\ntype UtilityWrapperProps = NoChildrenCardProps & {\n  title: string\n  children: [React.ReactElement, React.ReactElement]\n} \n\nfunction UtilityWrapper(props: UtilityWrapperProps) {\n  return <Card {...(props as NoChildrenCardProps )}>\n    <Card.Body>\n      <div className=\"d-flex justify-content-between\">\n        <Card.Title >{props.title}</Card.Title>\n        <OverlayTrigger\n          overlay={props.children[0]}\n          placement=\"auto\"\n        >\n          <button type=\"button\" className=\"btn btn-sm\">\n            <Help />\n          </button>\n        </OverlayTrigger>\n      </div>\n      {props.children[1]}\n    </Card.Body>\n  </Card>\n}\n\nexport default UtilityWrapper;\n","import React from \"react\"\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Button, Form } from \"react-bootstrap\";\nimport { newPastEvent, isApiErrorCode } from \"../utils/utils\";\n\n\ntype CreatePastEventProps = {\n  startTime: number;\n  duration: number;\n  apiKey: ApiKey;\n  postSubmit: () => void;\n}\n\nfunction CreatePastEvent(props: CreatePastEventProps) {\n  type CreatePastEventValue = {\n    name: string,\n    description: string,\n    startTime: number,\n    duration: number,\n  }\n\n  const onSubmit = async (values: CreatePastEventValue,\n    fprops: FormikHelpers<CreatePastEventValue>) => {\n\n    let errors: FormikErrors<CreatePastEventValue> = {};\n\n    // Validate input\n\n    let hasError = false;\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const maybePastEvent = await newPastEvent({\n      name: values.name,\n      description: values.description,\n      startTime: values.startTime,\n      duration: values.duration,\n      apiKey: props.apiKey.key,\n    });\n\n    if (isApiErrorCode(maybePastEvent)) {\n      switch (maybePastEvent) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create pastEvent.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Created\"\n    });\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<CreatePastEventValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: \"\",\n        description: \"\",\n        startTime: props.startTime,\n        duration: props.duration\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Form.Group >\n              <Form.Label>PastEvent Name</Form.Label>\n              <Form.Control\n                name=\"name\"\n                type=\"text\"\n                placeholder=\"Event Name\"\n                as=\"input\"\n                value={fprops.values.name}\n                onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                isInvalid={!!fprops.errors.name}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group >\n              <Form.Label>Description</Form.Label>\n              <Form.Control\n                name=\"description\"\n                type=\"text\"\n                placeholder=\"Description\"\n                as=\"input\"\n                value={fprops.values.description}\n                onChange={e => fprops.setFieldValue(\"description\", e.target.value)}\n                isInvalid={!!fprops.errors.description}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.description}</Form.Control.Feedback>\n            </Form.Group>\n            <Button type=\"submit\">Submit Form</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nexport default CreatePastEvent;\n","import Select from 'react-select'\nimport format from 'date-fns/format'\nimport {setHrMin} from '../utils/utils';\n\ntype TimePickerProps = {\n  time: Date,\n  setTime: (a: Date) => void;\n  minTime?:Date,\n  maxTime?:Date,\n  className?: string\n}\n\ntype OptionType = {\n  label: string,\n  value: Date\n}\n\nfunction TimePicker(props: TimePickerProps) {\n  const options = [];\n  for (let hr = 0; hr < 24; hr++) {\n    for (let min = 0; min < 60; min += 30) {\n      if( props.minTime && props.minTime >= setHrMin(props.time, hr, min)) {\n          continue;\n      }\n      if( props.maxTime && props.maxTime <= setHrMin(props.time, hr, min)) {\n          continue;\n      }\n      options.push({ value: setHrMin(props.time, hr, min), label: format(setHrMin(props.time, hr, min), 'p') });\n    }\n  }\n\n  return <>\n    <Select<OptionType>\n      className={props.className}\n      options={options}\n      defaultValue={{value: new Date(props.time), label: format(props.time, 'p')}}\n      isClearable={false}\n      onChange={o => props.setTime(o!.value)}\n    />\n  </>\n}\n\nexport default TimePicker;\n","import React from 'react'\nimport Select from 'react-select'\nimport { Col, Row } from 'react-bootstrap';\nimport { Line } from 'react-chartjs-2';\nimport moment from 'moment';\nimport TimePicker from '../components/TimePicker';\nimport { setHrMin} from '../utils/utils';\nimport getHours from 'date-fns/getHours'\nimport getMinutes from 'date-fns/getMinutes'\nimport addHours from \"date-fns/addHours\";\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport 'react-day-picker/lib/style.css';\nimport 'chartjs-plugin-dragdata';\n\nconst scale = 100;\n\ntype UtilityPickerProps = {\n  span?: [startTime:number, endTime:number];\n  mutable: boolean,\n  points: { x: number, y: number }[],\n  setPoints: (points: { x: number, y: number }[]) => void,\n}\n\nfunction noTimePrefTUF(start: Date, end: Date) {\n  return [{\n    x: (start.valueOf() + end.valueOf()) / 2,\n    y: scale\n  }]\n}\n\nfunction UtilityPicker(props: UtilityPickerProps) {\n  const [start, setStart] = React.useState(new Date(props.span?.[0] ?? Date.now()));\n  const [end, setEnd] = React.useState(new Date(props.span?.[1] ?? addHours(new Date(), 3).valueOf()));\n\n  // Had problems with stale closures\n  const pointsRef = React.useRef(props.points);\n  pointsRef.current = props.points;\n\n  const lineOptions = {\n    type: 'scatter',\n    dragData: props.mutable,\n    dragX: props.mutable,\n    dragDataRound: 0,\n    tooltips: { enabled: true },\n    scales: {\n      xAxes: [{\n        type: 'time',\n        position: 'bottom',\n        ticks: {\n          min: start,\n          max: end,\n          maxTicksLimit: 10\n        }\n      }],\n      yAxes: [{\n        ticks: {\n          max: scale,\n          min: 0\n        }\n      }]\n    },\n    legend: {\n      display: false\n    },\n    onDragEnd: () => {\n      // sort points such that the points with lower x come first\n      props.setPoints(pointsRef.current\n        .sort((a, b) => moment(a.x).valueOf() - moment(b.x).valueOf())\n        .map(a => ({ x: a.x.valueOf(), y: a.y })));\n    },\n  };\n\n\n  const lineData = {\n    datasets: [\n      {\n        lineTension: 0,\n        label: 'Utility',\n        fill: false,\n        borderColor: 'rgba(255, 99, 132, 0.8)',\n        data: [\n          {\n            x: start,\n            y: props.points.length === 0 ? 0 : props.points[0].y\n          },\n          ...props.points,\n          {\n            x: end,\n            y: props.points.length === 0 ? 0 : props.points[props.points.length - 1].y\n          }],\n      },\n    ],\n  }\n\n  return <>\n    <Row>\n      <Col>\n        <div> Date: </div>\n        <DayPickerInput value={start} onDayChange={day => {\n          setStart(setHrMin(day, getHours(start), getMinutes(start)));\n          setEnd(setHrMin(day, getHours(end), getMinutes(end)));\n        }} />\n      </Col>\n      <Col sm={3}>\n        <div>From:</div>\n        <TimePicker time={start} setTime={t => setStart(t)} maxTime={end} />\n      </Col>\n      <Col sm={3}>\n        <div>To:</div>\n        <TimePicker time={end} setTime={t => setEnd(t)} minTime={start} />\n      </Col>\n      <Col hidden={!props.mutable}>\n        <div>Utility Distribution</div>\n        <Select\n          isClearable={false}\n          defaultValue={{ value: \"\", label: \"Select\" }}\n          options={[\n            { value: \"constant\", label: \"No Time Preference\" },\n            { value: \"deadline\", label: \"Deadline\" },\n            { value: \"interval\", label: \"Interval\" },\n          ]}\n          onChange={o => {\n            const t = (start.valueOf() + end.valueOf()) / 2;\n            switch (o!.value) {\n              case \"constant\": {\n                props.setPoints(noTimePrefTUF(start, end));\n                break;\n              }\n              case \"deadline\": {\n                props.setPoints([{\n                  x: t - 1,\n                  y: scale\n                }, {\n                  x: t + 1,\n                  y: 0\n                }])\n                break;\n              }\n              case \"interval\": {\n                props.setPoints([{\n                  x: t - 1000001,\n                  y: 0\n                }, {\n                  x: t - 1000000,\n                  y: scale\n                }, {\n                  x: t + 1000000,\n                  y: scale\n                }, {\n                  x: t + 1000001,\n                  y: 0\n                }])\n                break;\n              }\n            }\n          }}\n        />\n      </Col>\n    </Row>\n    <Line\n      options={lineOptions}\n      data={lineData} />\n  </>\n}\n\nexport default UtilityPicker;\n","import React from \"react\"\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Col, Row, Card, Button, Form } from \"react-bootstrap\";\nimport { newScheduledGoal, newGoal, newTimeUtilityFunction, isApiErrorCode } from \"../utils/utils\";\nimport UtilityPicker from \"../components/UtilityPicker\"\nimport parseDuration from 'parse-duration';\nimport formatDuration from 'date-fns/formatDuration';\nimport intervalToDuration from 'date-fns/intervalToDuration';\n\n\ntype CreateGoalProps = {\n  span?: [startTime: number, endTime: number];\n  apiKey: ApiKey;\n  postSubmit: () => void;\n}\n\nfunction CreateGoal(props: CreateGoalProps) {\n  type CreateGoalValue = {\n    name: string,\n    durationEstimate: string,\n    description: string,\n    points: { x: number, y: number }[]\n  }\n\n  const onSubmit = async (values: CreateGoalValue,\n    fprops: FormikHelpers<CreateGoalValue>) => {\n\n    let errors: FormikErrors<CreateGoalValue> = {};\n\n    // Validate input\n\n    let hasError = false;\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    const durationEstimate = parseDuration(values.durationEstimate);\n\n    if(durationEstimate === null) {\n      errors.durationEstimate = \"Invalid duration estimate\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const maybeTimeUtilFunction = await newTimeUtilityFunction({\n      startTimes: values.points.map(p => p.x),\n      utils: values.points.map(p => p.y),\n      apiKey: props.apiKey.key,\n    })\n\n    if (isApiErrorCode(maybeTimeUtilFunction)) {\n      switch (maybeTimeUtilFunction) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"TIME_UTILITY_FUNCTION_NOT_VALID\": {\n          fprops.setErrors({\n            points: \"Utility function is invalid.\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create utility function.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n\n    let maybeGoalData = props.span\n      ? await newScheduledGoal({\n        name: values.name,\n        description: values.description,\n        durationEstimate: durationEstimate!,\n        timeUtilityFunctionId: maybeTimeUtilFunction.timeUtilityFunctionId,\n        startTime: props.span[0],\n        duration: props.span[1] - props.span[0],\n        apiKey: props.apiKey.key,\n      })\n      : await newGoal({\n        name: values.name,\n        description: values.description,\n        durationEstimate: durationEstimate!,\n        timeUtilityFunctionId: maybeTimeUtilFunction.timeUtilityFunctionId,\n        apiKey: props.apiKey.key,\n      });\n\n\n    if (isApiErrorCode(maybeGoalData)) {\n      switch (maybeGoalData) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create goal.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Goal Created\"\n    });\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<CreateGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: \"\",\n        description: \"\",\n        durationEstimate: formatDuration(\n          props.span\n            ? intervalToDuration({\n              start: props.span[0],\n              end: props.span[1]\n            })\n            : {\n              minutes: 30,\n            }\n        ),\n        points: [],\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Form.Group>\n              <Card>\n                <Card.Body>\n                  <UtilityPicker\n                    span={props.span}\n                    points={fprops.values.points}\n                    setPoints={p => fprops.setFieldValue(\"points\", p)}\n                    mutable\n                  />\n                </Card.Body>\n              </Card>\n              <Form.Text className=\"text-danger\">{fprops.errors.points}</Form.Text>\n            </Form.Group>\n            <Row>\n              <Form.Group as={Col}>\n                <Form.Control\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"Goal Name\"\n                  as=\"input\"\n                  value={fprops.values.name}\n                  onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                  isInvalid={!!fprops.errors.name}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n              </Form.Group>\n              <Form.Group as={Col}>\n                <Form.Control\n                  name=\"durationEstimate\"\n                  type=\"text\"\n                  placeholder=\"Estimated Duration\"\n                  as=\"input\"\n                  value={fprops.values.durationEstimate}\n                  onChange={e => fprops.setFieldValue(\"durationEstimate\", e.target.value)}\n                  isInvalid={!!fprops.errors.durationEstimate}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.durationEstimate}</Form.Control.Feedback>\n              </Form.Group>\n            </Row>\n            <Form.Group >\n              <Form.Control\n                name=\"description\"\n                type=\"text\"\n                placeholder=\"Goal Description (Optional)\"\n                as=\"textarea\"\n                value={fprops.values.description}\n                onChange={e => fprops.setFieldValue(\"description\", e.target.value)}\n                isInvalid={!!fprops.errors.description}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.description}</Form.Control.Feedback>\n            </Form.Group>\n            <Button type=\"submit\">Submit Form</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\nexport default CreateGoal;\n","import React from 'react';\nimport {Modal} from 'react-bootstrap';\n\ntype DisplayModalProps = {\n  title: string;\n  show: boolean;\n  onClose: () => void;\n  children: React.ReactNode\n}\n\nexport default function DisplayModal(props:DisplayModalProps) {\n  return <Modal\n    show={props.show}\n    onHide={props.onClose}\n    keyboard={false}\n    backdrop=\"static\"\n    size=\"xl\"\n    centered\n  >\n    <Modal.Header closeButton>\n      <Modal.Title>{props.title}</Modal.Title>\n    </Modal.Header>\n    <Modal.Body>\n      {props.children}\n    </Modal.Body>\n  </Modal>\n\n}\n","import React from 'react';\nimport { Form, Button, Table } from 'react-bootstrap'; import Loader from '../components/Loader';\nimport { Async, AsyncProps } from 'react-async';\nimport DisplayModal from '../components/DisplayModal';\nimport { viewPastEventData, newPastEventData, isApiErrorCode} from '../utils/utils';\nimport { Edit, Archive, Unarchive} from '@material-ui/icons';\nimport { Formik, FormikHelpers } from 'formik'\nimport format from 'date-fns/format';\n\n\ntype EditPastEventDataProps = {\n  pastEventData: PastEventData,\n  apiKey: ApiKey,\n  postSubmit: () => void\n};\n\nfunction EditPastEventData(props: EditPastEventDataProps) {\n\n  type EditPastEventDataValue = {\n    name: string,\n    description: string,\n  }\n\n  const onSubmit = async (values: EditPastEventDataValue,\n    fprops: FormikHelpers<EditPastEventDataValue>) => {\n\n    const maybePastEventData = await newPastEventData({\n      pastEventId: props.pastEventData.pastEvent.pastEventId,\n      apiKey: props.apiKey.key,\n      name: values.name,\n      description: values.description,\n      startTime:props.pastEventData.startTime,\n      duration:props.pastEventData.duration,\n      active: props.pastEventData.active,\n    });\n\n    if (isApiErrorCode(maybePastEventData)) {\n      switch (maybePastEventData) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"API_KEY_UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You are not authorized to modify this event.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"PAST_EVENT_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This event does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while modifying event data.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Successfully Modified\"\n    });\n\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<EditPastEventDataValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: props.pastEventData.name,\n        description: props.pastEventData.description\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Form.Group >\n              <Form.Label>Event Name</Form.Label>\n              <Form.Control\n                name=\"name\"\n                type=\"text\"\n                placeholder=\"Event Name\"\n                as=\"input\"\n                value={fprops.values.name}\n                onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                isInvalid={!!fprops.errors.name}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group >\n              <Form.Label >PastEvent Description</Form.Label>\n              <Form.Control\n                name=\"description\"\n                type=\"text\"\n                placeholder=\"Event Description\"\n                value={fprops.values.description}\n                onChange={e => fprops.setFieldValue(\"description\", e.target.value)}\n                isInvalid={!!fprops.errors.description}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.description}</Form.Control.Feedback>\n            </Form.Group>\n            <Button type=\"submit\">Submit</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\n\ntype ArchivePastEventProps = {\n  pastEventData: PastEventData,\n  apiKey: ApiKey,\n  postSubmit: () => void\n};\n\nfunction ArchivePastEvent(props: ArchivePastEventProps) {\n\n  type ArchivePastEventValue = {}\n\n  const onSubmit = async (_: ArchivePastEventValue,\n    fprops: FormikHelpers<ArchivePastEventValue>) => {\n\n    const maybePastEventData = await newPastEventData({\n      pastEventId: props.pastEventData.pastEvent.pastEventId,\n      apiKey: props.apiKey.key,\n      startTime: props.pastEventData.startTime,\n      duration: props.pastEventData.duration,\n      name: props.pastEventData.name,\n      description: props.pastEventData.description,\n      active: !props.pastEventData.active,\n    });\n\n    if (isApiErrorCode(maybePastEventData)) {\n      switch (maybePastEventData) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"API_KEY_UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You are not authorized to manage this event.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"PAST_EVENT_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This event does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while managing event.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Edited\"\n    });\n\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<ArchivePastEventValue>\n      onSubmit={onSubmit}\n      initialValues={{}}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <p>\n              Are you sure you want to {props.pastEventData.active ? \"archive\" : \"unarchive\"} {props.pastEventData.name}?\n            </p>\n            <Button type=\"submit\">Confirm</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\n\n\nconst loadPastEventData = async (props: AsyncProps<PastEventData>) => {\n  const maybePastEventData = await viewPastEventData({\n    pastEventId: props.pastEventId,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  });\n\n  if (isApiErrorCode(maybePastEventData) || maybePastEventData.length === 0) {\n    throw Error;\n  } else {\n    return maybePastEventData[0];\n  }\n}\n\n\nconst ManagePastEventData = (props: {\n  pastEventId: number,\n  apiKey: ApiKey,\n}) => {\n\n  const [showEditPastEventData, setShowEditPastEventData] = React.useState(false);\n  const [showArchivePastEvent, setShowArchivePastEvent] = React.useState(false);\n\n\n  return <Async\n    promiseFn={loadPastEventData}\n    apiKey={props.apiKey}\n    pastEventId={props.pastEventId}>\n    {({ reload }) => <>\n      <Async.Pending><Loader /></Async.Pending>\n      <Async.Rejected>\n        <span className=\"text-danger\">An unknown error has occured.</span>\n      </Async.Rejected>\n      <Async.Fulfilled<PastEventData>>{pastEventData => <>\n        <Table hover bordered>\n          <tbody>\n            <tr>\n              <th>Status</th>\n              <td>{pastEventData.active ? \"Active\" : \"Archived\"}</td>\n            </tr>\n            <tr>\n              <th>Name</th>\n              <td>{pastEventData.name}</td>\n            </tr>\n            <tr>\n              <th>Description</th>\n              <td>{pastEventData.description}</td>\n            </tr>\n            <tr>\n              <th>Creation Time</th>\n              <td>{format(pastEventData.pastEvent.creationTime, \"MMM do\")} </td>\n            </tr>\n          </tbody>\n        </Table>\n        <Button variant=\"secondary\" onClick={_ => setShowEditPastEventData(true)}>Edit <Edit /></Button>\n\n        { pastEventData.active\n            ? <Button variant=\"danger\" onClick={_ => setShowArchivePastEvent(true)}>Archive <Archive /></Button>\n            : <Button variant=\"success\" onClick={_ => setShowArchivePastEvent(true)}>Unarchive <Unarchive /></Button>\n        }\n\n        <DisplayModal\n          title=\"Edit Event\"\n          show={showEditPastEventData}\n          onClose={() => setShowEditPastEventData(false)}\n        >\n          <EditPastEventData\n            pastEventData={pastEventData}\n            apiKey={props.apiKey}\n            postSubmit={() => {\n              setShowEditPastEventData(false);\n              reload();\n            }}\n          />\n        </DisplayModal>\n\n        <DisplayModal\n          title=\"Archive Event\"\n          show={showArchivePastEvent}\n          onClose={() => setShowArchivePastEvent(false)}\n        >\n          <ArchivePastEvent\n            pastEventData={pastEventData}\n            apiKey={props.apiKey}\n            postSubmit={() => {\n              setShowArchivePastEvent(false);\n              reload();\n            }}\n          />\n        </DisplayModal>\n      </>\n      }\n      </Async.Fulfilled>\n    </>}\n  </Async>\n}\n\nexport default ManagePastEventData;\n","import React from 'react';\nimport { Col, Row, Card, Form, Button } from 'react-bootstrap';\nimport Loader from '../components/Loader';\nimport { Async, AsyncProps } from 'react-async';\nimport DisplayModal from '../components/DisplayModal';\nimport UtilityPicker from '../components/UtilityPicker';\nimport { viewTimeUtilityFunctionPoint, newTimeUtilityFunction, viewGoalData, newGoalData, newScheduledGoalData, isApiErrorCode } from '../utils/utils';\nimport { Edit, Cancel, } from '@material-ui/icons';\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport parseDuration from 'parse-duration';\nimport formatDuration from 'date-fns/formatDuration';\nimport intervalToDuration from 'date-fns/intervalToDuration';\nimport format from 'date-fns/format';\n\n\ntype EditGoalProps = {\n  goalData: GoalData,\n  tuf: TimeUtilityFunctionPoint[],\n  apiKey: ApiKey,\n  postSubmit: () => void\n};\n\nfunction EditGoal(props: EditGoalProps) {\n\n  type EditGoalValue = {\n    name: string,\n    description: string,\n    durationEstimate: string,\n    startTime: number | null,\n    duration: number | null,\n    points: { x: number, y: number }[]\n  }\n\n  const onSubmit = async (values: EditGoalValue,\n    fprops: FormikHelpers<EditGoalValue>) => {\n\n    let hasError = false;\n    let errors: FormikErrors<EditGoalValue> = {};\n\n    if (values.name === \"\") {\n      errors.name = \"Please enter an event name\";\n      hasError = true;\n    }\n\n    const durationEstimate = parseDuration(values.durationEstimate);\n\n    if(durationEstimate === null || durationEstimate < 1) {\n      errors.durationEstimate = \"Invalid duration estimate\";\n      hasError = true;\n    }\n\n    fprops.setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    // TODO: check if utility function has been changed before creating a new one\n    // this will be more efficient\n    const maybeTimeUtilFunction = await newTimeUtilityFunction({\n      startTimes: values.points.map(p => p.x),\n      utils: values.points.map(p => p.y),\n      apiKey: props.apiKey.key,\n    })\n\n    if (isApiErrorCode(maybeTimeUtilFunction)) {\n      switch (maybeTimeUtilFunction) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"TIME_UTILITY_FUNCTION_NOT_VALID\": {\n          fprops.setErrors({\n            points: \"Utility function is invalid.\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while trying to create utility function.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    const maybeGoalData = values.startTime !== null && values.duration !== null\n      ? await newScheduledGoalData({\n        goalId: props.goalData.goal.goalId,\n        name: values.name,\n        description: values.description,\n        durationEstimate: durationEstimate!,\n        timeUtilityFunctionId: maybeTimeUtilFunction.timeUtilityFunctionId,\n        startTime: values.startTime,\n        duration: values.duration,\n        status: props.goalData.status,\n        apiKey: props.apiKey.key,\n      })\n      : await newGoalData({\n        goalId: props.goalData.goal.goalId,\n        name: values.name,\n        description: values.description,\n        durationEstimate: durationEstimate!,\n        timeUtilityFunctionId: maybeTimeUtilFunction.timeUtilityFunctionId,\n        status: props.goalData.status,\n        apiKey: props.apiKey.key,\n      })\n\n    if (isApiErrorCode(maybeGoalData)) {\n      switch (maybeGoalData) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"API_KEY_UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You are not authorized to modify this goal.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"GOAL_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This goal does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while modifying goal data.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Goal Successfully Modified\"\n    });\n\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<EditGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{\n        name: props.goalData.name,\n        description: props.goalData.description,\n        startTime: props.goalData.scheduled ? props.goalData.startTime : null,\n        duration: props.goalData.scheduled ? props.goalData.duration : null,\n        durationEstimate: formatDuration(\n          intervalToDuration({\n            start: 0,\n            end: props.goalData.durationEstimate\n          })\n        ),\n        points: props.tuf.map(p => ({ x: p.startTime, y: p.utils }))\n      }}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <Row>\n              <Form.Group as={Col}>\n                <Form.Label>Name</Form.Label>\n                <Form.Control\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"Goal Name\"\n                  as=\"input\"\n                  value={fprops.values.name}\n                  onChange={e => fprops.setFieldValue(\"name\", e.target.value)}\n                  isInvalid={!!fprops.errors.name}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.name}</Form.Control.Feedback>\n              </Form.Group>\n              <Form.Group as={Col}>\n                <Form.Label>Estimated Duration</Form.Label>\n                <Form.Control\n                  name=\"durationEstimate\"\n                  type=\"text\"\n                  placeholder=\"Estimated Duration\"\n                  as=\"input\"\n                  value={fprops.values.durationEstimate}\n                  onChange={e => fprops.setFieldValue(\"durationEstimate\", e.target.value)}\n                  isInvalid={!!fprops.errors.durationEstimate}\n                />\n                <Form.Control.Feedback type=\"invalid\">{fprops.errors.durationEstimate}</Form.Control.Feedback>\n              </Form.Group>\n            </Row>\n            <Form.Group >\n              <Form.Label >Goal Description</Form.Label>\n              <Form.Control\n                name=\"description\"\n                type=\"text\"\n                placeholder=\"Goal Description\"\n                value={fprops.values.description}\n                onChange={e => fprops.setFieldValue(\"description\", e.target.value)}\n                isInvalid={!!fprops.errors.description}\n              />\n              <Form.Control.Feedback type=\"invalid\">{fprops.errors.description}</Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group>\n              <Card>\n                <Card.Body>\n                  <UtilityPicker\n                    span={[\n                      Math.min(...props.tuf.map(p => p.startTime)) - 100000,\n                      Math.max(...props.tuf.map(p => p.startTime)) + 100000\n                    ]}\n                    points={fprops.values.points}\n                    setPoints={p => fprops.setFieldValue(\"points\", p)}\n                    mutable\n                  />\n                </Card.Body>\n              </Card>\n              <Form.Text className=\"text-danger\">{fprops.errors.points}</Form.Text>\n            </Form.Group>\n            <Button type=\"submit\">Submit</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\ntype CancelGoalProps = {\n  goalData: GoalData,\n  apiKey: ApiKey,\n  postSubmit: () => void\n};\n\nfunction CancelGoal(props: CancelGoalProps) {\n\n  type CancelGoalValue = {}\n\n  const onSubmit = async (_: CancelGoalValue,\n    fprops: FormikHelpers<CancelGoalValue>) => {\n\n    const maybeGoalData = props.goalData.scheduled\n      ? await newScheduledGoalData({\n        goalId: props.goalData.goal.goalId,\n        apiKey: props.apiKey.key,\n        name: props.goalData.name,\n        description: props.goalData.description,\n        durationEstimate: props.goalData.durationEstimate,\n        timeUtilityFunctionId: props.goalData.timeUtilityFunction.timeUtilityFunctionId,\n        startTime: props.goalData.startTime,\n        duration: props.goalData.duration,\n        status: \"CANCEL\",\n      })\n      : await newGoalData({\n        goalId: props.goalData.goal.goalId,\n        apiKey: props.apiKey.key,\n        name: props.goalData.name,\n        description: props.goalData.description,\n        durationEstimate: props.goalData.durationEstimate,\n        timeUtilityFunctionId: props.goalData.timeUtilityFunction.timeUtilityFunctionId,\n        status: \"CANCEL\",\n      });\n\n    if (isApiErrorCode(maybeGoalData)) {\n      switch (maybeGoalData) {\n        case \"API_KEY_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"You have been automatically logged out. Please relogin.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"API_KEY_UNAUTHORIZED\": {\n          fprops.setStatus({\n            failureResult: \"You are not authorized to manage this goal.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        case \"PAST_EVENT_NONEXISTENT\": {\n          fprops.setStatus({\n            failureResult: \"This goal does not exist.\",\n            successResult: \"\"\n          });\n          break;\n        }\n        default: {\n          fprops.setStatus({\n            failureResult: \"An unknown or network error has occured while managing goal.\",\n            successResult: \"\"\n          });\n          break;\n        }\n      }\n      return;\n    }\n\n    fprops.setStatus({\n      failureResult: \"\",\n      successResult: \"Event Edited\"\n    });\n\n    // execute callback\n    props.postSubmit();\n  }\n\n  return <>\n    <Formik<CancelGoalValue>\n      onSubmit={onSubmit}\n      initialValues={{}}\n      initialStatus={{\n        failureResult: \"\",\n        successResult: \"\"\n      }}\n    >\n      {(fprops) => <>\n        <Form\n          noValidate\n          onSubmit={fprops.handleSubmit} >\n          <div hidden={fprops.status.successResult !== \"\"}>\n            <p>\n              Are you sure you want to cancel goal for {props.goalData.name}?\n            </p>\n            <Button type=\"submit\">Confirm</Button>\n            <br />\n            <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\n          </div>\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\n        </Form>\n      </>}\n    </Formik>\n  </>\n}\n\ntype ManageGoalData = {\n  goalData: GoalData,\n  tuf: TimeUtilityFunctionPoint[],\n}\n\nconst loadManageGoalData = async (props: AsyncProps<ManageGoalData>) => {\n  const maybeGoalData = await viewGoalData({\n    goalId: props.goalId,\n    onlyRecent: true,\n    apiKey: props.apiKey.key\n  });\n\n  if (isApiErrorCode(maybeGoalData) || maybeGoalData.length === 0) {\n    throw Error;\n  }\n\n  const goalData = maybeGoalData[0];\n\n  const maybeTuf = await viewTimeUtilityFunctionPoint({\n    timeUtilityFunctionId: goalData.timeUtilityFunction.timeUtilityFunctionId,\n    apiKey: props.apiKey.key\n  });\n\n  if (isApiErrorCode(maybeTuf) || maybeTuf.length === 0) {\n    throw Error;\n  }\n\n  return {\n    goalData,\n    tuf: maybeTuf\n  };\n}\n\n\nconst ManageGoal = (props: {\n  goalId: number,\n  apiKey: ApiKey,\n  onChange: () => void\n}) => {\n\n  const [showEditGoal, setShowEditGoal] = React.useState(false);\n  const [showCancelGoal, setShowCancelGoal] = React.useState(false);\n\n  return <Async\n    promiseFn={loadManageGoalData}\n    apiKey={props.apiKey}\n    goalId={props.goalId}>\n    {({ reload }) => <>\n      <Async.Pending><Loader /></Async.Pending>\n      <Async.Rejected>\n        <span className=\"text-danger\">An unknown error has occured.</span>\n      </Async.Rejected>\n      <Async.Fulfilled<ManageGoalData >>{mgd => <>\n        <td>\n          {mgd.goalData.name}\n          <br />\n          <small>{mgd.goalData.status}</small>\n        </td>\n        <td>\n          {mgd.goalData.scheduled ? format(mgd.goalData.startTime, \"p EEE, MMM do\") : \"NOT SCHEDULED\"}\n          <br />\n          <small>Estimate: {\n            formatDuration(intervalToDuration({\n              start: 0,\n              end: mgd.goalData.durationEstimate\n            }))\n          }</small>\n        </td>\n        <td>{mgd.goalData.description}</td>\n        <td>\n          <UtilityPicker\n            span={[\n              Math.min(...mgd.tuf.map(p => p.startTime)) - 100000,\n              Math.max(...mgd.tuf.map(p => p.startTime)) + 100000\n            ]}\n            points={mgd.tuf.map(p => ({ x: p.startTime, y: p.utils }))}\n            setPoints={() => null}\n            mutable={false}\n          />\n        </td>\n        <td>\n          <Button variant=\"link\" onClick={_ => setShowEditGoal(true)}><Edit /></Button>\n          {mgd.goalData.status !== \"CANCEL\"\n            ? <Button variant=\"link\" onClick={_ => setShowCancelGoal(true)}><Cancel /></Button>\n            : <> </>\n          }\n        </td>\n        <DisplayModal\n          title=\"Edit Goal\"\n          show={showEditGoal}\n          onClose={() => setShowEditGoal(false)}\n        >\n          <EditGoal\n            goalData={mgd.goalData}\n            tuf={mgd.tuf}\n            apiKey={props.apiKey}\n            postSubmit={() => {\n              setShowEditGoal(false);\n              reload();\n            }}\n          />\n        </DisplayModal>\n        <DisplayModal\n          title=\"Cancel Goal\"\n          show={showCancelGoal}\n          onClose={() => setShowCancelGoal(false)}\n        >\n          <CancelGoal\n            goalData={mgd.goalData}\n            apiKey={props.apiKey}\n            postSubmit={() => {\n              setShowCancelGoal(false);\n              props.onChange();\n            }}\n          />\n        </DisplayModal>\n      </>\n      }\n      </Async.Fulfilled>\n    </>}\n  </Async>\n}\n\nexport default ManageGoal;\n","import React from 'react'\nimport { Table } from 'react-bootstrap';\nimport DisplayModal from '../components/DisplayModal';\nimport { Add } from '@material-ui/icons'\nimport ManageGoal from '../components/ManageGoal';\nimport CreateGoal from '../components/CreateGoal';\n\ntype ManageGoalTableProps = {\n  goalIds: number[],\n  apiKey: ApiKey,\n  reload: () => void,\n  mutable: boolean,\n  addable: boolean,\n}\n\nfunction ManageGoalTable(props: ManageGoalTableProps) {\n  const [showCreateGoal, setShowCreateGoal] = React.useState(false);\n  return <>\n    <Table hover bordered>\n      <thead>\n        <th>Name</th>\n        <th>Time</th>\n        <th>Description</th>\n        <th>Utility</th>\n        <th>Actions</th>\n      </thead>\n      <tr hidden={!props.addable}>\n        <td colSpan={5} className=\"px-0 py-0\">\n          <button\n            className=\"h-100 w-100 mx-0 my-0\"\n            style={{ borderStyle: 'dashed', borderWidth: \"medium\" }}\n            onClick={() => setShowCreateGoal(true)}\n          >\n            <Add className=\"mx-auto my-auto text-muted\" fontSize=\"large\" />\n          </button>\n        </td>\n      </tr>\n      {props.goalIds.length !== 0 ? <> </> :\n        <tr> <td colSpan={5} className=\"text-center\"> No Goals </td> </tr>\n      }\n      {props.goalIds.map(gi =>\n        <tr>\n          <ManageGoal\n            key={gi}\n            goalId={gi}\n            apiKey={props.apiKey}\n            onChange={props.reload}\n          />\n        </tr>\n      )}\n    </Table>\n    <DisplayModal\n      title=\"New Goal\"\n      show={showCreateGoal}\n      onClose={() => setShowCreateGoal(false)}\n    >\n      <CreateGoal\n        apiKey={props.apiKey}\n        postSubmit={() => {\n          setShowCreateGoal(false);\n          props.reload();\n        }}\n      />\n    </DisplayModal>\n  </>\n}\n\nexport default ManageGoalTable;\n","import React from 'react'\nimport Loader from '../components/Loader';\nimport FullCalendar, { EventApi, DateSelectArg, EventClickArg } from '@fullcalendar/react'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction'\nimport DashboardLayout from '../components/DashboardLayout';\nimport CalendarSolver from '../components/CalendarSolver';\nimport CalendarCard, { pastEventDataToEvent, goalDataToEvent } from '../components/CalendarCard';\n\nimport { Async, AsyncProps } from 'react-async';\nimport { Row, Col, Tab, Tabs, Popover, Container, } from 'react-bootstrap';\nimport { newPastEventData, newScheduledGoalData, viewPastEventData, viewGoalData, isApiErrorCode } from '../utils/utils';\n\nimport UtilityWrapper from '../components/UtilityWrapper';\n\nimport CreatePastEvent from '../components/CreatePastEvent';\nimport CreateGoal from '../components/CreateGoal';\nimport ManagePastEvent from '../components/ManagePastEvent';\nimport ManageGoalTable from '../components/ManageGoalTable';\nimport DisplayModal from '../components/DisplayModal';\n\n\ntype UnscheduledGoalCardProps = {\n  onChange: () => void;\n  goalData: GoalDataUnscheduled;\n}\n\nfunction UnscheduledGoalCard(props: UnscheduledGoalCardProps) {\n  let elRef = React.useRef<HTMLDivElement>(null);\n\n  const event = {\n    id: `GoalData:${props.goalData.goalDataId}`,\n    duration: props.goalData.durationEstimate,\n    color: \"#00000000\",\n    borderColor: \"#00000000\",\n    goalData: props.goalData\n  };\n\n  React.useEffect(() => {\n    let draggable = new Draggable(elRef.current!, {\n      eventData: event\n    });\n\n    // a cleanup function\n    return () => draggable.destroy();\n  });\n\n  return (\n    <div\n      ref={elRef}\n      className=\"fc-event fc-h-event mb-1 fc-daygrid-event fc-daygrid-block-event p-2\"\n      data-custom={JSON.stringify({ goalData: props.goalData })}\n      title={props.goalData.name}\n      style={{\n        cursor: \"pointer\"\n      }}\n    >\n      <div className=\"fc-event-main\">\n        <div>\n          {props.goalData.name}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nconst loadUnscheduledGoalData = async (props: AsyncProps<GoalDataUnscheduled[]>) => {\n  const maybeGoalData = await viewGoalData({\n    creatorUserId: props.apiKey.creator.userId,\n    onlyRecent: true,\n    scheduled: false,\n    status: \"PENDING\",\n    apiKey: props.apiKey.key,\n  });\n\n  if (isApiErrorCode(maybeGoalData)) {\n    throw Error;\n  }\n\n  return maybeGoalData\n    .filter((x): x is GoalDataUnscheduled => !x.scheduled);\n}\n\n\n\ntype EventCalendarProps = {\n  apiKey: ApiKey,\n}\n\n// TODO make it so that selected data and selected modals are equivalent\n// Look at AdminManageAdminships for examples\n\nfunction EventCalendar(props: EventCalendarProps) {\n\n  // whether we're currently in optimize mode or not\n  const [optimizing, setOptimizing] = React.useState(false);\n\n  // Closing it should also unselect anything using it\n  const [selectedSpan, setSelectedSpanRaw] = React.useState<[number, number] | null>(null);\n  const setSelectedSpan = (a: [number, number] | null) => {\n    setSelectedSpanRaw(a)\n    if (!a && calendarRef.current != null) {\n      calendarRef.current.getApi().unselect();\n    }\n  }\n\n  // the currently selected data\n  const [selectedManageGoalData, setSelectedManageGoalData] = React.useState<GoalData | null>(null);\n  const [selectedManagePastEventData, setSelectedManagePastEventData] = React.useState<PastEventData | null>(null);\n\n  const calendarRef = React.useRef<FullCalendar | null>(null);\n\n  const eventSource = async (\n    args: {\n      start: Date;\n      end: Date;\n      startStr: string;\n      endStr: string;\n      timeZone: string;\n    }) => {\n\n    const maybePastEventData = await viewPastEventData({\n      creatorUserId: props.apiKey.creator.userId,\n      minStartTime: args.start.valueOf(),\n      maxStartTime: args.end.valueOf(),\n      onlyRecent: true,\n      active: true,\n      apiKey: props.apiKey.key\n    });\n\n    const maybeGoalData = await viewGoalData({\n      creatorUserId: props.apiKey.creator.userId,\n      minStartTime: args.start.valueOf(),\n      maxStartTime: args.end.valueOf(),\n      onlyRecent: true,\n      scheduled: true,\n      status: \"PENDING\",\n      apiKey: props.apiKey.key\n    });\n\n    const pastEventData = isApiErrorCode(maybePastEventData)\n      ? []\n      : maybePastEventData.map(pastEventDataToEvent)\n\n    const task = isApiErrorCode(maybeGoalData)\n      ? []\n      : maybeGoalData\n        // this asserts that x is scheduled if x's scheduled is true\n        .filter((x): x is GoalDataScheduled => x.scheduled)\n        .map(goalDataToEvent);\n    return [...pastEventData, ...task];\n  }\n\n  //this handler runs any time we recieve a click on an event\n  const clickHandler = (eca: EventClickArg) => {\n    const props = eca.event.extendedProps;\n    // we switch on what type it is\n    switch (eca.event.id.split(':')[0]) {\n      case \"PastEventData\": {\n        setSelectedManagePastEventData(props.pastEventData);\n        break;\n      }\n      case \"GoalData\": {\n        setSelectedManageGoalData(props.goalData);\n        break;\n      }\n    }\n  }\n\n  const changeHandler = async (event: EventApi, oldEventProps: Record<string, any>, revert: () => void) => {\n    switch (event.id.split(':')[0]) {\n      case \"PastEventData\": {\n        const oped = oldEventProps.pastEventData;\n        const maybePastEventData = await newPastEventData({\n          pastEventId: oped.pastEvent.pastEventId,\n          name: oped.name,\n          description: oped.description,\n          startTime: event.start!.valueOf(),\n          duration: event.end!.valueOf() - event.start!.valueOf(),\n          active: oped.active,\n          apiKey: props.apiKey.key,\n        });\n        if (isApiErrorCode(maybePastEventData)) {\n          revert();\n        }\n        event.setExtendedProp(\"pastEventData\", maybePastEventData);\n        break;\n      }\n      case \"GoalData\": {\n        const ogd = oldEventProps.goalData;\n        const maybeGoalData = await newScheduledGoalData({\n          goalId: ogd.goal.goalId,\n          name: ogd.name,\n          description: ogd.description,\n          durationEstimate: ogd.durationEstimate,\n          timeUtilityFunctionId: ogd.timeUtilityFunction.timeUtilityFunctionId,\n          startTime: event.start!.valueOf(),\n          duration: event.end!.valueOf() - event.start!.valueOf(),\n          status: ogd.status,\n          apiKey: props.apiKey.key\n        })\n        if (isApiErrorCode(maybeGoalData)) {\n          revert();\n        }\n        event.setExtendedProp(\"goalData\", maybeGoalData);\n        break;\n      }\n      default: {\n        revert();\n        break;\n      }\n    }\n  }\n\n  if (optimizing) {\n    return <CalendarSolver\n      apiKey={props.apiKey}\n      onHide={() => setOptimizing(false)}\n    />\n  }\n\n  return <Row>\n    <Col lg={2}>\n      <Async\n        promiseFn={loadUnscheduledGoalData}\n        apiKey={props.apiKey} >\n        {({ reload }) => <>\n          <Async.Pending><Loader /></Async.Pending>\n          <Async.Rejected>\n            <span className=\"text-danger\">An unknown error has occured.</span>\n          </Async.Rejected>\n          <Async.Fulfilled<GoalDataUnscheduled[]>>{gdus =>\n            gdus.map(gdu =>\n              <UnscheduledGoalCard\n                key={gdu.goalDataId}\n                goalData={gdu}\n                onChange={reload}\n              />\n            )\n          }\n          </Async.Fulfilled>\n        </>}\n      </Async>\n    </Col>\n    <Col xl={10}>\n      <FullCalendar\n        ref={calendarRef}\n        plugins={[timeGridPlugin, interactionPlugin]}\n        customButtons={{\n          optimize: {\n            text: 'Optimize',\n            click: () => setOptimizing(true)\n          }\n        }}\n        headerToolbar={{\n          left: 'title prev,next today',\n          center: 'optimize',\n          right: 'timeGridDay,timeGridWeek',\n        }}\n        initialView='timeGridWeek'\n        height={\"auto\"}\n        datesSet={({ view }) => /* Keeps window size in sync */view.calendar.updateSize()}\n        allDaySlot={false}\n        slotDuration=\"00:30:00\"\n        nowIndicator={true}\n        editable={true}\n        selectable={true}\n        selectMirror={true}\n        events={eventSource}\n        eventContent={CalendarCard}\n        unselectCancel=\".modal-content\"\n        eventClick={clickHandler}\n        eventOverlap={false}\n        eventResize={(era) => changeHandler(era.event, era.oldEvent.extendedProps, era.revert)}\n        eventDrop={(eda) => changeHandler(eda.event, eda.oldEvent.extendedProps, eda.revert)}\n        eventReceive={(era) => {\n          // hide event\n          era.draggedEl.hidden = true;\n          changeHandler(\n            era.event,\n            JSON.parse(era.draggedEl.getAttribute(\"data-custom\")!),\n            era.revert\n          )\n          // delete the current event (it'll be reloaded when we fetch scheduled events)\n          era.event.remove();\n          // force reload to get the new scheduled event\n          if (calendarRef.current != null) {\n            calendarRef.current.getApi().refetchEvents();\n          }\n        }}\n        unselect={() => {\n          setSelectedSpan(null);\n        }}\n        select={(dsa: DateSelectArg) => {\n          // only open modal if this date is in the future\n          if (dsa.start.valueOf() > Date.now()) {\n            setSelectedSpan([\n              dsa.start.valueOf(),\n              dsa.end.valueOf()\n            ]);\n          } else {\n            if (calendarRef.current != null) {\n              calendarRef.current.getApi().unselect();\n            }\n          }\n        }}\n      />\n    </Col>\n\n\n    {selectedSpan === null ? <> </> :\n      <DisplayModal\n        title=\"New Event\"\n        show={selectedSpan !== null}\n        onClose={() => setSelectedSpan(null)}\n      >\n        <Tabs className=\"py-3\">\n          <Tab eventKey=\"task\" title=\"Create Task\">\n            <CreateGoal\n              apiKey={props.apiKey}\n              span={selectedSpan}\n              postSubmit={() => setSelectedSpan(null)}\n            />\n          </Tab>\n          <Tab eventKey=\"event\" title=\"Create Event\">\n            <CreatePastEvent\n              apiKey={props.apiKey}\n              startTime={selectedSpan[0]}\n              duration={selectedSpan[1] - selectedSpan[0]}\n              postSubmit={() => setSelectedSpan(null)}\n            />\n          </Tab>\n        </Tabs>\n      </DisplayModal>\n    }\n    {selectedManagePastEventData === null ? <> </> :\n      <DisplayModal\n        title=\"Manage Event\"\n        show={selectedManagePastEventData !== null}\n        onClose={() => setSelectedManagePastEventData(null)}\n      >\n        <ManagePastEvent pastEventId={selectedManagePastEventData.pastEvent.pastEventId} apiKey={props.apiKey} />\n      </DisplayModal>\n    }\n    {selectedManageGoalData === null ? <> </> :\n      <DisplayModal\n        title=\"Manage Event\"\n        show={selectedManageGoalData !== null}\n        onClose={() => setSelectedManageGoalData(null)}\n      >\n        <ManageGoalTable\n          goalIds={[selectedManageGoalData.goal.goalId]}\n          apiKey={props.apiKey}\n          reload={() => setSelectedManageGoalData(null)}\n          mutable\n          addable={false}\n        />\n      </DisplayModal>\n    }\n  </Row>\n}\n\nfunction CalendarWidget(props: AuthenticatedComponentProps) {\n  return <UtilityWrapper title=\"Upcoming Appointments\">\n    <Popover id=\"information-tooltip\">\n      This screen shows all future appointments.\n      You can click any date to add an appointment on that date,\n      or click an existing appointment to delete it.\n    </Popover>\n    <EventCalendar apiKey={props.apiKey} />\n  </UtilityWrapper>\n};\n\nfunction Calendar(props: AuthenticatedComponentProps) {\n  return <DashboardLayout {...props} >\n    <Container fluid className=\"py-3 px-3\">\n      <CalendarWidget {...props} />\n    </Container>\n  </DashboardLayout>\n}\n\nexport default Calendar;\n","import React from 'react'\nimport { Row, Container, Col, Form} from 'react-bootstrap';\nimport { Async, AsyncProps } from 'react-async';\nimport Section from '../components/Section';\nimport DashboardLayout from '../components/DashboardLayout';\nimport ManageGoalTable from '../components/ManageGoalTable';\nimport Loader from '../components/Loader';\nimport { viewGoalData, isApiErrorCode} from '../utils/utils';\n\ntype DashboardData = {\n  goalData: GoalData\n}\n\nconst loadDashboardData = async (props: AsyncProps<DashboardData[]>) => {\n  const maybeGoalData = await viewGoalData({\n    creatorUserId: props.apiKey.creator.userId,\n    onlyRecent: true,\n    status: \"PENDING\",\n    apiKey: props.apiKey.key,\n  });\n\n  if (isApiErrorCode(maybeGoalData)) {\n    throw Error;\n  }\n\n  return maybeGoalData.map(goalData => ({ goalData }));\n}\n\nfunction Dashboard(props: AuthenticatedComponentProps) {\n  return <DashboardLayout {...props}>\n    <Container fluid className=\"py-4 px-4\">\n      <Row className=\"justify-content-md-center\">\n        <Col md={8}>\n          <Section id=\"goals\" name=\"My Goals\">\n            <Async promiseFn={loadDashboardData} apiKey={props.apiKey}>\n              {({ reload }) => <>\n                <Async.Pending><Loader /></Async.Pending>\n                <Async.Rejected>\n                  <Form.Text className=\"text-danger\">An unknown error has occured while loading data.</Form.Text>\n                </Async.Rejected>\n                <Async.Fulfilled<DashboardData[]>>{ddata =>\n                  <ManageGoalTable\n                    reload={reload}\n                    apiKey={props.apiKey}\n                    goalIds={ddata.map(gd => gd.goalData.goal.goalId)}\n                    mutable\n                    addable\n                  />\n                }</Async.Fulfilled>\n              </>}\n            </Async>\n          </Section>\n        </Col>\n      </Row>\n    </Container>\n  </DashboardLayout>\n}\n\nexport default Dashboard;\n","import React from 'react';\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\nimport { Button, Form, } from 'react-bootstrap'\nimport { newChangePassword, isPasswordValid, isApiErrorCode } from '../utils/utils';\n\ninterface CreatePasswordProps {\n  apiKey: ApiKey,\n  onSuccess: () => void\n}\n\nfunction CreatePassword(props: CreatePasswordProps) {\n  type CreatePasswordValue = {\n    oldpassword: string,\n    password1: string,\n    password2: string,\n  }\n\n  const onSubmit = async (values: CreatePasswordValue, { setStatus, setErrors }: FormikHelpers<CreatePasswordValue>) => {\n    // Validate input\n    let errors: FormikErrors<CreatePasswordValue> = {};\n    let hasError = false;\n    if (!isPasswordValid(values.password1)) {\n      errors.password1 = \"Password must have at least 8 chars and 1 number\";\n      hasError = true;\n    }\n    if (values.password2 !== values.password1) {\n      errors.password2 = \"Password does not match.\";\n      hasError = true;\n    }\n    setErrors(errors);\n    if (hasError) {\n      return;\n    }\n\n    const passwordChangeResult = await newChangePassword({\n      userId: props.apiKey.creator.userId,\n      oldPassword: values.oldpassword,\n      newPassword: values.password1,\n      apiKey: props.apiKey.key,\n    });\n    if (isApiErrorCode(passwordChangeResult)) {\n      switch (passwordChangeResult) {\n        case \"OK\": {\n          setStatus({\n            failureMessage: \"\",\n            successMessage: \"Password successfully changed.\"\n          });\n          break;\n        }\n        case \"API_KEY_UNAUTHORIZED\": {\n          setStatus({\n            failureMessage: \"Please log back in and try again\",\n            successMessage: \"\"\n          });\n          break;\n        }\n        case \"PASSWORD_CANNOT_CREATE_FOR_OTHERS\": {\n          setStatus({\n            failureMessage: \"You may only change your own password\",\n            successMessage: \"\"\n          });\n          break;\n        }\n        case \"PASSWORD_INSECURE\": {\n          setErrors({\n            password1: \"Password is of insufficient complexity\"\n          });\n          break;\n        }\n        default: {\n          setStatus({\n            failureMessage: \"An unknown or network error has occured while trying to reset password.\",\n            successMessage: \"\"\n          });\n          break;\n        }\n      }\n    } else {\n      props.onSuccess();\n    }\n  }\n  return <>\n    <Formik<CreatePasswordValue>\n      onSubmit={onSubmit}\n      initialStatus={{\n        successMessage: \"\",\n        failureMessage: \"\",\n      }}\n      initialValues={{\n        oldpassword: \"\",\n        password1: \"\",\n        password2: \"\",\n      }}\n    >\n      {(props) => (\n        <Form\n          noValidate\n          onSubmit={props.handleSubmit} >\n          <Form.Group >\n            <Form.Label >Old Password</Form.Label>\n            <Form.Control\n              name=\"oldpassword\"\n              type=\"password\"\n              placeholder=\"Old Password\"\n              value={props.values.oldpassword}\n              onChange={props.handleChange}\n              isInvalid={!!props.errors.password1}\n            />\n            <Form.Control.Feedback type=\"invalid\"> {props.errors.oldpassword} </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label >New Password</Form.Label>\n            <Form.Control\n              name=\"password1\"\n              type=\"password\"\n              placeholder=\"New Password\"\n              value={props.values.password1}\n              onChange={props.handleChange}\n              isInvalid={!!props.errors.password1}\n            />\n            <Form.Control.Feedback type=\"invalid\"> {props.errors.password1} </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              name=\"password2\"\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              value={props.values.password2}\n              onChange={props.handleChange}\n              isInvalid={!!props.errors.password2}\n            />\n            <Form.Control.Feedback type=\"invalid\">{props.errors.password2}</Form.Control.Feedback>\n          </Form.Group>\n          <br />\n          <Button type=\"submit\">Change Password</Button>\n          <br />\n          <Form.Text className=\"text-danger\">{props.status.failureMessage}</Form.Text>\n          <Form.Text className=\"text-success\">{props.status.successMessage}</Form.Text>\n        </Form>\n      )}\n    </Formik>\n  </>\n}\n\nexport default CreatePassword;\n","import React from 'react';\nimport { Popover, Form, Container } from 'react-bootstrap'\n\nimport UtilityWrapper from '../components/UtilityWrapper';\n\nimport DashboardLayout from '../components/DashboardLayout';\nimport CreatePassword from '../components/CreatePassword';\n\nfunction Settings(props: AuthenticatedComponentProps) {\n  // TODO actually add backend components to handle changing the name properly\n  // Also, make the name and email and password changes into one box initially\n  // Then, when you click on them to change, a modal should pop up\n  // IMO this would look better than the tiny boxes we have now\n\n  const [passwdSuccess, setPasswdSuccess] = React.useState(false);\n  const [subscribeSuccess, setSubscribeSuccess] = React.useState(false);\n  return <DashboardLayout {...props}>\n    <Container fluid className=\"py-4 px-4\">\n      <div className=\"mx-3 my-3\">\n        <UtilityWrapper title=\"Change Password\">\n          <Popover id=\"information-tooltip\"> Shows basic information about this course. </Popover>\n          {passwdSuccess\n            ? <Form.Text className=\"text-success\">Password changed successfully</Form.Text>\n            : <CreatePassword apiKey={props.apiKey} onSuccess={() => setPasswdSuccess(true)} />\n          }\n        </UtilityWrapper>\n      </div>\n    </Container>\n  </DashboardLayout>\n}\n\nexport default Settings;\n","import React from 'react'\r\nimport { Button, Container, Form, Row, Col } from 'react-bootstrap';\r\nimport DashboardLayout from '../components/DashboardLayout';\r\nimport ManageGoalTable from '../components/ManageGoalTable';\r\nimport { viewGoalData, isApiErrorCode } from '../utils/utils';\r\n\r\nimport { Formik, FormikHelpers, FormikErrors } from 'formik'\r\n\r\ntype SearchProps = {\r\n  apiKey: ApiKey;\r\n  postSubmit: (a: GoalData[]) => void;\r\n}\r\n\r\nfunction SearchForm(props: SearchProps) {\r\n  type SearchValue = { search: string }\r\n\r\n  const onSubmit = async (values: SearchValue, fprops: FormikHelpers<SearchValue>) => {\r\n\r\n    let errors: FormikErrors<SearchValue> = {};\r\n\r\n    // Validate input\r\n\r\n    let hasError = false;\r\n    fprops.setErrors(errors);\r\n    if (hasError) {\r\n      return;\r\n    }\r\n\r\n    const maybeGoalData = await viewGoalData({\r\n      creatorUserId: props.apiKey.creator.userId,\r\n      onlyRecent: true,\r\n      partialName: values.search,\r\n      status: \"PENDING\",\r\n      apiKey: props.apiKey.key,\r\n    });\r\n\r\n    if (isApiErrorCode(maybeGoalData)) {\r\n      switch (maybeGoalData) {\r\n        case \"API_KEY_UNAUTHORIZED\": {\r\n          fprops.setStatus({\r\n            failureResult: \"You have been automatically logged out.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n        default: {\r\n          fprops.setStatus({\r\n            failureResult: \"An unknown or network error has occured while trying to register.\",\r\n            successResult: \"\"\r\n          });\r\n          break;\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    fprops.setStatus({\r\n      failureResult: \"\",\r\n      successResult: \"Successfully searched\"\r\n    });\r\n    // execute callback\r\n    props.postSubmit(maybeGoalData);\r\n  }\r\n\r\n  return <>\r\n    <Formik<SearchValue>\r\n      onSubmit={onSubmit}\r\n      initialValues={{\r\n        search: \"\",\r\n      }}\r\n      initialStatus={{\r\n        failureResult: \"\",\r\n        successResult: \"\"\r\n      }}\r\n    >\r\n      {(fprops) => <>\r\n        <Form\r\n          noValidate\r\n          onSubmit={fprops.handleSubmit} >\r\n          <Form.Group >\r\n            <h4>Search by Name</h4>\r\n            <Form.Control\r\n              name=\"search\"\r\n              type=\"text\"\r\n              placeholder=\"Search\"\r\n              value={fprops.values.search}\r\n              onChange={e => fprops.setFieldValue(\"search\", e.target.value)}\r\n              isInvalid={!!fprops.errors.search}\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">{fprops.errors.search}</Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Button type=\"submit\">Search</Button>\r\n          <br />\r\n          <Form.Text className=\"text-danger\">{fprops.status.failureResult}</Form.Text>\r\n          <Form.Text className=\"text-success\">{fprops.status.successResult}</Form.Text>\r\n        </Form>\r\n      </>}\r\n    </Formik>\r\n  </>\r\n}\r\n\r\nfunction Search(props: AuthenticatedComponentProps) {\r\n  const [search, setSearch] = React.useState<GoalData[]>([]);\r\n  return <DashboardLayout {...props}>\r\n    <Container fluid className=\"py-4 px-4\">\r\n      <SearchForm\r\n        apiKey={props.apiKey}\r\n        postSubmit={setSearch}\r\n      />\r\n      <Row className=\"justify-content-md-center\">\r\n        <Col md={8}>\r\n          <ManageGoalTable\r\n            goalIds={search.map(d => d.goal.goalId)}\r\n            apiKey={props.apiKey}\r\n            reload={() => setSearch(search)}\r\n            addable={false}\r\n            mutable\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  </DashboardLayout>\r\n}\r\n\r\nexport default Search;\r\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nimport AuthenticatedRoute from './components/AuthenticatedRoute';\n\n// public pages\nimport Home from './pages/Home';\nimport Instructions from './pages/Instructions';\nimport About from './pages/About';\nimport Error404 from './pages/Error404';\n\n// register\nimport Register from './pages/Register';\nimport RegisterConfirm from './pages/RegisterConfirm';\n\n// When you forget password\nimport ForgotPassword from './pages/ForgotPassword';\nimport ResetPassword from './pages/ResetPassword';\n\n// calendar\nimport Calendar from './pages/Calendar';\n\n// todo list\nimport Dashboard from './pages/Dashboard';\n\n// settings\nimport Settings from './pages/Settings';\n\n// search\nimport Search from './pages/Search';\n\nfunction getPreexistingApiKey() {\n  const preexistingApiKeyString = localStorage.getItem(\"apiKey\");\n  if (preexistingApiKeyString == null) {\n    return null;\n  } else {\n    try {\n      // TODO validate here\n      return JSON.parse(preexistingApiKeyString) as ApiKey;\n    } catch (e) {\n      // try to clean up a bad config\n      localStorage.setItem(\"apiKey\", JSON.stringify(null));\n      return null;\n    }\n  }\n}\n\nfunction App() {\n  const [apiKey, setApiKeyState] = React.useState(getPreexistingApiKey());\n  const apiKeyGetSetter = {\n    apiKey: apiKey,\n    setApiKey: (data: ApiKey | null) => {\n      localStorage.setItem(\"apiKey\", JSON.stringify(data));\n      setApiKeyState(data);\n    }\n  };\n\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/instructions\" component={Instructions} />\n        <Route path=\"/about\" component={About} />\n        <Route path=\"/forgot_password\" component={ForgotPassword} />\n        <Route path=\"/reset_password\" component={ResetPassword} />\n        <Route path=\"/register\" component={Register} />\n        <Route path=\"/register_confirm\" component={RegisterConfirm} />\n        <AuthenticatedRoute path=\"/calendar\" {...apiKeyGetSetter} component={Calendar} />\n        <AuthenticatedRoute path=\"/dashboard\" {...apiKeyGetSetter} component={Dashboard} />\n        <AuthenticatedRoute path=\"/settings\" {...apiKeyGetSetter} component={Settings} />\n        <AuthenticatedRoute path=\"/search\" {...apiKeyGetSetter} component={Search} />\n        <Route path=\"/\" component={Error404} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}